function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(this);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2;a=self;b=a.FSharpSPA=a.FSharpSPA||{};c=b.Client=b.Client||{};d=a.WebSharper=a.WebSharper||{};e=d.Operators=d.Operators||{};f=d.Obj=d.Obj||{};g=d.UI=d.UI||{};h=g.Templating=g.Templating||{};i=h.Runtime=h.Runtime||{};j=i.Server=i.Server||{};k=j.TemplateInstance=j.TemplateInstance||{};l=d.Arrays=d.Arrays||{};m=j.ProviderBuilder=j.ProviderBuilder||{};n=d.Unchecked=d.Unchecked||{};o=a.FSharpSPA_Templates=a.FSharpSPA_Templates||{};p=a.StartupCode$FSharpSPA$Client=a.StartupCode$FSharpSPA$Client||{};q=a.System=a.System||{};r=q.Guid=q.Guid||{};s=d.Collections=d.Collections||{};t=s.List=s.List||{};u=j.Handler=j.Handler||{};v=g.Client=g.Client||{};w=v.Templates=v.Templates||{};x=g.Doc=g.Doc||{};y=d.JavaScript=d.JavaScript||{};z=y.Pervasives=y.Pervasives||{};A=s.Dictionary=s.Dictionary||{};B=b.Solver=b.Solver||{};C=b.Year2020Common=b.Year2020Common||{};D=b.Year2020Day3=b.Year2020Day3||{};E=g.Var$1=g.Var$1||{};F=s.HashSet=s.HashSet||{};G=d.Seq=d.Seq||{};H=j.TemplateInitializer=j.TemplateInitializer||{};I=a.EventTarget;J=a.Node;K=y.JS=y.JS||{};L=g.View=g.View||{};M=d.Numeric=d.Numeric||{};N=a.Object;O=g.AttrProxy=g.AttrProxy||{};P=g.Var=g.Var||{};Q=g.CheckedInput=g.CheckedInput||{};R=g.HtmlModule=g.HtmlModule||{};S=R.attr=R.attr||{};T=B.Status=B.Status||{};U=B.Cmd=B.Cmd||{};V=d.Strings=d.Strings||{};W=D.State=D.State||{};X=D.Move=D.Move||{};Y=g.ConcreteVar=g.ConcreteVar||{};Z=g.Snap=g.Snap||{};_0=s.DictionaryUtil=s.DictionaryUtil||{};_1=d.Enumerator=d.Enumerator||{};_2=_1.T=_1.T||{};_3=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};_4=a.WindowOrWorkerGlobalScope;_5=g.Docs=g.Docs||{};_6=g.DocElemNode=g.DocElemNode||{};_7=a.CharacterData;_8=g.Array=g.Array||{};_9=a.StartupCode$FSharpSPA$Year2020Day3=a.StartupCode$FSharpSPA$Year2020Day3||{};_=g.Abbrev=g.Abbrev||{};$=_.Fresh=_.Fresh||{};ba=g.Elt=g.Elt||{};bb=w.Prepare=w.Prepare||{};bc=d.Slice=d.Slice||{};bd=g.DomUtility=g.DomUtility||{};be=s.KeyCollection=s.KeyCollection||{};bf=g.An=g.An||{};bg=v.Settings=v.Settings||{};bh=_.Mailbox=_.Mailbox||{};bi=v.Attrs=v.Attrs||{};bj=bi.Dyn=bi.Dyn||{};bk=g.Attrs=g.Attrs||{};bl=d.List=d.List||{};bm=bl.T=bl.T||{};bn=g.AttrModule=g.AttrModule||{};bo=g.Updates=g.Updates||{};bp=s.ValueCollection=s.ValueCollection||{};bq=v.Docs=v.Docs||{};br=bq.RunState=bq.RunState||{};bs=bq.NodeSet=bq.NodeSet||{};bt=d.Concurrency=d.Concurrency||{};bu=g.Anims=g.Anims||{};bv=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bw=s.HashSetUtil=s.HashSetUtil||{};bx=a.Error;by=d.FormatException=d.FormatException||{};bz=d.OverflowException=d.OverflowException||{};bA=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bB=g.BindVar=g.BindVar||{};bC=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bD=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bE=g.AppendList=g.AppendList||{};bF=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bG=g.DynamicAttrNode=g.DynamicAttrNode||{};bH=bt.Scheduler=bt.Scheduler||{};bI=g.Easing=g.Easing||{};bJ=bt.AsyncBody=bt.AsyncBody||{};bK=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bL=bt.CT=bt.CT||{};bM=_.HashSet=_.HashSet||{};bN=g.String=g.String||{};bO=d.CancellationTokenSource=d.CancellationTokenSource||{};bP=bq.DomNodes=bq.DomNodes||{};bQ=d.Char=d.Char||{};bR=d.OperationCanceledException=d.OperationCanceledException||{};bS=d.Lazy=d.Lazy||{};bT=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bU=d.Queue=d.Queue||{};bV=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};bW=bV.LazyRecord=bV.LazyRecord||{};bX=a.jQuery;bY=a.console;bZ=a.IntelliFactory;b0=bZ&&bZ.Runtime;b1=a.Math;b2=a.Date;c.Main=function(){var b3,b4,b5,b6,b7;b3=(b4=(b5=new m.New$1(),(b5.h.push({$:0,$0:"quicktest",$1:c.AoC()}),b5)),(b6=u.CompleteHoles(b4.k,b4.h,[]),(b7=new k.New(b6[1],o.aoc2020(b6[0])),b4.i=b7,b7))).get_Doc();w.LoadLocalTemplates("");x.RunById("aoc",b3);};c.AoC=function(){p.$cctor();return p.AoC;};c.produceSolution=function(b3,b4,b5,b6,b7,b8,b9,b_,b$){return x.Element("div",[],[x.Element("h2",[],[x.TextNode(b5)]),x.Element("p",[],[x.TextNode(b6)]),x.Element("a",[O.Create("href",b7),O.Create("target","_blank")],[x.TextNode(b8)]),x.Element("br",[],[]),x.Button(b9,[],function(){bX.ajax(b_,{beforeSend:function(ca){return ca.setRequestHeader("crossDomain","");},crossDomain:true,success:function(ca){bX("#"+b4).val(ca);return b3.Set({$:1,$0:ca});}}).done(function(){return bY.log("Done");});}),x.Element("br",[],[]),x.Element("textarea",[O.Create("id",b4),O.Create("style","height:100px")],[]),x.Element("br",[],[]),x.BindView(function(ca){return ca!=null&&ca.$==1?x.Concat([x.Button("Solve it!",[],function(){c.Solve(b$,"solved"+b4,a.String(bX("#"+b4).val()));}),x.Element("br",[],[]),x.Element("label",[],[x.TextNode("Solution")]),x.Element("input",[O.Create("id","solved"+b4)],[])]):x.get_Empty();},b3.get_View())]);};c.Solve=function(b3,b4,b5){var b6;bX("#"+b4).val("");b6=a.String(b3(b5));bX("#"+b4).val(b6);};e.FailWith=function(b3){throw new bx(b3);};e.KeyValue=function(b3){return[b3.K,b3.V];};f=d.Obj=b0.Class({Equals:function(b3){return this===b3;},GetHashCode:function(){return -1;}},null,f);f.New=b0.Ctor(function(){},f);k=j.TemplateInstance=b0.Class({get_Doc:function(){return this.doc;}},f,k);k.New=b0.Ctor(function(b3,b4){f.New.call(this);this.doc=b4;this.allVars=b3.$==0?b3.$0:e.FailWith("Should not happen");},k);l.get=function(b3,b4){l.checkBounds(b3,b4);return b3[b4];};l.checkBounds=function(b3,b4){if(b4<0||b4>=b3.length)e.FailWith("Index was outside the bounds of the array.");};l.length=function(b3){return b3.dims===2?b3.length*b3.length:b3.length;};l.set=function(b3,b4,b5){l.checkBounds(b3,b4);b3[b4]=b5;};m=j.ProviderBuilder=b0.Class({},f,m);m.New$1=b0.Ctor(function(){var b3;f.New.call(this);this.i=null;this.k=(b3=r.NewGuid(),a.String(b3));this.h=[];b0.SetOptional(this,"s",null);},m);n.Equals=function(b3,b4){var b5,b6,b7,b8;if(b3===b4)return true;else{b5=typeof b3;if(b5=="object"){if(b3===null||b3===void 0||b4===null||b4===void 0)return false;else if("Equals"in b3)return b3.Equals(b4);else if(b3 instanceof a.Array&&b4 instanceof a.Array)return n.arrayEquals(b3,b4);else if(b3 instanceof a.Date&&b4 instanceof a.Date)return n.dateEquals(b3,b4);else{b6=[true];for(var b9 in b3)if(function(b_){b6[0]=!b3.hasOwnProperty(b_)||b4.hasOwnProperty(b_)&&n.Equals(b3[b_],b4[b_]);return!b6[0];}(b9))break;if(b6[0]){for(var b_ in b4)if(function(b$){b6[0]=!b4.hasOwnProperty(b$)||b3.hasOwnProperty(b$);return!b6[0];}(b_))break;}return b6[0];}}else return b5=="function"&&("$Func"in b3?b3.$Func===b4.$Func&&b3.$Target===b4.$Target:"$Invokes"in b3&&"$Invokes"in b4&&n.arrayEquals(b3.$Invokes,b4.$Invokes));}};n.arrayEquals=function(b3,b4){var b5,b6;if(l.length(b3)===l.length(b4)){b5=true;b6=0;while(b5&&b6<l.length(b3)){!n.Equals(l.get(b3,b6),l.get(b4,b6))?b5=false:void 0;b6=b6+1;}return b5;}else return false;};n.dateEquals=function(b3,b4){return b3.getTime()===b4.getTime();};n.Hash=function(b3){var b4;b4=typeof b3;return b4=="function"?0:b4=="boolean"?b3?1:0:b4=="number"?b3:b4=="string"?n.hashString(b3):b4=="object"?b3==null?0:b3 instanceof a.Array?n.hashArray(b3):n.hashObject(b3):0;};n.hashString=function(b3){var b4,b5,b6;if(b3===null)return 0;else{b4=5381;for(b5=0,b6=b3.length-1;b5<=b6;b5++)b4=n.hashMix(b4,b3[b5].charCodeAt());return b4;}};n.hashArray=function(b3){var b4,b5,b6;b4=-34948909;for(b5=0,b6=l.length(b3)-1;b5<=b6;b5++)b4=n.hashMix(b4,n.Hash(l.get(b3,b5)));return b4;};n.hashObject=function(b3){var b4,b5;if("GetHashCode"in b3)return b3.GetHashCode();else{b4=[0];for(var b6 in b3)if(function(b7){b4[0]=n.hashMix(n.hashMix(b4[0],n.hashString(b7)),n.Hash(b3[b7]));return false;}(b6))break;return b4[0];}};n.hashMix=function(b3,b4){return(b3<<5)+b3+b4;};n.Compare=function(b3,b4){var b5,b6,b7,b8,b9,b_;if(b3===b4)return 0;else{b6=typeof b3;switch(b6=="function"?1:b6=="boolean"?2:b6=="number"?2:b6=="string"?2:b6=="object"?3:0){case 0:return typeof b4=="undefined"?0:-1;case 1:return e.FailWith("Cannot compare function values.");case 2:return b3<b4?-1:1;case 3:if(b3===null)b7=-1;else if(b4===null)b7=1;else if("CompareTo"in b3)b7=b3.CompareTo(b4);else if("CompareTo0"in b3)b7=b3.CompareTo0(b4);else if(b3 instanceof a.Array&&b4 instanceof a.Array)b7=n.compareArrays(b3,b4);else if(b3 instanceof a.Date&&b4 instanceof a.Date)b7=n.compareDates(b3,b4);else{b8=[0];for(var b$ in b3)if(function(ca){return!b3.hasOwnProperty(ca)?false:!b4.hasOwnProperty(ca)?(b8[0]=1,true):(b8[0]=n.Compare(b3[ca],b4[ca]),b8[0]!==0);}(b$))break;if(b8[0]===0){for(var ca in b4)if(function(cb){return!b4.hasOwnProperty(cb)?false:!b3.hasOwnProperty(cb)&&(b8[0]=-1,true);}(ca))break;}b7=b8[0];}return b7;}}};n.compareArrays=function(b3,b4){var b5,b6;if(l.length(b3)<l.length(b4))return -1;else if(l.length(b3)>l.length(b4))return 1;else{b5=0;b6=0;while(b5===0&&b6<l.length(b3)){b5=n.Compare(l.get(b3,b6),l.get(b4,b6));b6=b6+1;}return b5;}};n.compareDates=function(b3,b4){return n.Compare(b3.getTime(),b4.getTime());};o.aoc2020=function(b3){w.LoadLocalTemplates("index");return b3?w.NamedTemplate("index",{$:1,$0:"aoc2020"},b3):void 0;};p.$cctor=function(){var b3,b4,b5;p.$cctor=a.ignore;p.AoC=(b3=E.Create$1(null),(b4=E.Create$1(null),(b5=E.Create$1(null),x.Element("div",[],[c.produceSolution(b3,"inputText2019_02_01","year 2019","day 2 part 1","https://adventofcode.com/2019/day/2","visit advent of code 2019 day 2","Grab input day 2 part 1 2019","Content/input_2019_02.txt",B.Solve),c.produceSolution(b4,"inputText2020_03_01","year 2020","day 3 part 1","https://adventofcode.com/2020/day/3","visit advent of code 2020 day 3","Grab input day 3 part 1 2020","Content/input_2020_03.txt",function(b6){return D.phase1(l.map(C.cleanLine,l.filter(function(b7){return V.Trim(b7).length>0;},V.SplitChars(b6,["\n"],0))));}),c.produceSolution(b5,"inputText2020_03_02","year 2020","day 3 part 2","https://adventofcode.com/2020/day/3","visit advent of code 2020 day 3","Grab input day 3 part 2 2020","Content/input_2020_03.txt",function(b6){return D.phase2(l.map(C.cleanLine,l.filter(function(b7){return V.Trim(b7).length>0;},V.SplitChars(b6,["\n"],0))));})]))));};r.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(b3){var b4,b5;b4=b1.random()*16|0;b5=b3=="x"?b4:b4&3|8;return b5.toString(16);});};t=s.List=b0.Class({GetEnumerator:function(){return _1.Get(this);},GetEnumerator0:function(){return _1.Get0(this);}},null,t);u.CompleteHoles=function(b3,b4,b5){var b7,b8,b9,b_,b$;function b6(ca,cb){var cc;return b8.Contains(ca)?null:(cc=cb===0?H.GetOrAddHoleFor(b3,ca,function(){return{$:8,$0:ca,$1:E.Create$1("")};}):cb===1?H.GetOrAddHoleFor(b3,ca,function(){return{$:13,$0:ca,$1:E.Create$1(0)};}):cb===2?H.GetOrAddHoleFor(b3,ca,function(){return{$:9,$0:ca,$1:E.Create$1(false)};}):e.FailWith("Invalid value type"),(b7.set_Item(ca,cc),{$:1,$0:cc}));}b7=new A.New$5();b8=new F.New$3();b9=_1.Get(b4);try{while(b9.MoveNext()){b_=b9.Current();b$=b_.$0;b8.Add(b$);b7.set_Item(b$,b_);}}finally{if(typeof b9=="object"&&"Dispose"in b9)b9.Dispose();}return[G.append(b4,l.choose(function(ca){return b6(ca[0],ca[1]);},b5)),{$:0,$0:b7}];};w.LoadLocalTemplates=function(b3){!w.LocalTemplatesLoaded()?(w.set_LocalTemplatesLoaded(true),w.LoadNestedTemplates(self.document.body,"")):void 0;w.LoadedTemplates().set_Item(b3,w.LoadedTemplateFile(""));};w.NamedTemplate=function(b3,b4,b5){var b6,b7;b6=(b7=null,[w.LoadedTemplateFile(b3).TryGetValue(b4==null?"":b4.$0,{get:function(){return b7;},set:function(b8){b7=b8;}}),b7]);return b6[0]?w.ChildrenTemplate(b6[1].cloneNode(true),b5):(bY.warn("Local template doesn't exist",b4),x.get_Empty());};w.LocalTemplatesLoaded=function(){_3.$cctor();return _3.LocalTemplatesLoaded;};w.set_LocalTemplatesLoaded=function(b3){_3.$cctor();_3.LocalTemplatesLoaded=b3;};w.LoadNestedTemplates=function(b3,b4){var b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg;function b5(ch){var ci,cj;if(!b6.ContainsKey(ch)){ci=(cj=null,[b7.TryGetValue(ch,{get:function(){return cj;},set:function(ck){cj=ck;}}),cj]);ci[0]?(cg.Add(ch),b7.Remove(ch),w.PrepareTemplateStrict(b4,{$:1,$0:ch},ci[1],{$:1,$0:b5})):bY.warn(cg.Contains(ch)?"Encountered loop when instantiating "+ch:"Local template does not exist: "+ch);}}b6=w.LoadedTemplateFile(b4);b7=new A.New$5();b8=b3.querySelectorAll("[ws-template]");for(b9=0,b_=b8.length-1;b9<=b_;b9++){b$=b8[b9];ca=b$.getAttribute("ws-template").toLowerCase();b$.removeAttribute("ws-template");b7.set_Item(ca,w.FakeRootSingle(b$));}cb=b3.querySelectorAll("[ws-children-template]");for(cc=0,cd=cb.length-1;cc<=cd;cc++){ce=cb[cc];cf=ce.getAttribute("ws-children-template").toLowerCase();ce.removeAttribute("ws-children-template");b7.set_Item(cf,w.FakeRoot(ce));}cg=new F.New$3();while(b7.count>0)b5(G.head(b7.get_Keys()));};w.LoadedTemplates=function(){_3.$cctor();return _3.LoadedTemplates;};w.LoadedTemplateFile=function(b3){var b4,b5,b6;b4=(b5=null,[w.LoadedTemplates().TryGetValue(b3,{get:function(){return b5;},set:function(b7){b5=b7;}}),b5]);return b4[0]?b4[1]:(b6=new A.New$5(),(w.LoadedTemplates().set_Item(b3,b6),b6));};w.ChildrenTemplate=function(b3,b4){var b5,b6,b7,b8,b9;b5=w.InlineTemplate(b3,G.append(b4,w.GlobalHoles().get_Values()));b6=b5[1];b7=b5[0];b8=b7.Els;return!n.Equals(b8,null)&&b8.length===1&&(l.get(b8,0)instanceof J&&(n.Equals(l.get(b8,0).nodeType,J.ELEMENT_NODE)&&(b9=l.get(b8,0),true)))?ba.TreeNode(b7,b6):x.Mk({$:6,$0:b7},b6);};w.FakeRootSingle=function(b3){var b4,b5,b6,b7;b3.removeAttribute("ws-template");b4=b3.getAttribute("ws-replace");b4===null?void 0:(b3.removeAttribute("ws-replace"),b5=b3.parentNode,n.Equals(b5,null)?void 0:(b6=self.document.createElement(b3.tagName),b6.setAttribute("ws-replace",b4),b5.replaceChild(b6,b3)));b7=self.document.createElement("div");b7.appendChild(b3);return b7;};w.FakeRoot=function(b3){var b4;b4=self.document.createElement("div");while(b3.hasChildNodes())b4.appendChild(b3.firstChild);return b4;};w.PrepareTemplateStrict=function(b3,b4,b5,b6){var b7;function b8(cb,cc){var cd,ce,cf,cg,ch,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD;function ci(cE){}while(true)switch(cb){case 0:if(cc!==null){cd=cc.nextSibling;if(n.Equals(cc.nodeType,J.TEXT_NODE))bb.convertTextNode(cc);else if(n.Equals(cc.nodeType,J.ELEMENT_NODE))b_(cc);cc=cd;}else return null;break;case 1:cj=bc.string(cc.nodeName,{$:1,$0:3},null).toLowerCase();ck=(ce=cj.indexOf("."),ce===-1?[b3,cj]:[bc.string(cj,null,{$:1,$0:ce-1}),bc.string(cj,{$:1,$0:ce+1},null)]);cl=ck[1];cm=ck[0];if(cm!==""&&!w.LoadedTemplates().ContainsKey(cm))return bb.failNotLoaded(cl);else{if(cm===""&&b6!=null)b6.$0(cl);cn=w.LoadedTemplates().get_Item(cm);if(!cn.ContainsKey(cl))return bb.failNotLoaded(cl);else{co=cn.get_Item(cl);cp=co.cloneNode(true);cq=new F.New$3();cr=new A.New$5();cs=cc.attributes;for(ct=0,cu=cs.length-1;ct<=cu;ct++){cv=cs.item(ct).name.toLowerCase();cr.set_Item(cv,(cw=cs.item(ct).nodeValue,cw===""?cv:cw.toLowerCase()));!cq.Add(cv)?bY.warn("Hole mapped twice",cv):void 0;}for(cx=0,cy=cc.childNodes.length-1;cx<=cy;cx++){cz=cc.childNodes[cx];n.Equals(cz.nodeType,J.ELEMENT_NODE)?!cq.Add(cz.nodeName.toLowerCase())?bY.warn("Hole filled twice",cl):void 0:void 0;}cA=cc.childNodes.length===1&&n.Equals(cc.firstChild.nodeType,J.TEXT_NODE);if(cA){cg=bb.fillTextHole(cp,cc.firstChild.textContent,cl);((function(cE){return function(cF){if(cF!=null)cE(cF.$0);};}((ch=function(cE){return function(cF){return cE.Add(cF);};}(cq),function(cE){return ci(ch(cE));})))(cg));}bb.removeHolesExcept(cp,cq);if(!cA){for(cB=0,cC=cc.childNodes.length-1;cB<=cC;cB++){cD=cc.childNodes[cB];n.Equals(cD.nodeType,J.ELEMENT_NODE)?cD.hasAttributes()?bb.fillInstanceAttrs(cp,cD):b9(cp,cD):void 0;}}bb.mapHoles(cp,cr);bb.fill(cp,cc.parentNode,cc);cc.parentNode.removeChild(cc);return;}}break;}}function b9(cb,cc){var cd,cf,cg;function ce(ch,ci){var cj;if(cf==="title"&&cc.hasChildNodes()){cj=bd.ParseHTMLIntoFakeRoot(cc.textContent);cc.removeChild(cc.firstChild);while(cj.hasChildNodes())cc.appendChild(cj.firstChild);}else null;b_(cc);return bb.fill(cc,ch,ci);}cf=cc.nodeName.toLowerCase();w.foreachNotPreserved(cb,"[ws-attr-holes]",function(ch){var ci,cj,ck,cl,cm;ci=V.SplitChars(ch.getAttribute("ws-attr-holes"),[" "],1);for(cj=0,ck=ci.length-1;cj<=ck;cj++){cl=l.get(ci,cj);ch.setAttribute(cl,(cm=new a.RegExp("\\${"+cf+"}","ig"),ch.getAttribute(cl).replace(cm,cc.textContent)));}});cg=cb.querySelector("[ws-hole="+cf+"]");if(n.Equals(cg,null)){cd=cb.querySelector("[ws-replace="+cf+"]");return n.Equals(cd,null)?null:(ce(cd.parentNode,cd),void cd.parentNode.removeChild(cd));}else{while(cg.hasChildNodes())cg.removeChild(cg.lastChild);cg.removeAttribute("ws-hole");return ce(cg,null);}}function b_(cb){if(!cb.hasAttribute("ws-preserve"))if(V.StartsWith(cb.nodeName.toLowerCase(),"ws-"))ca(cb);else{bb.convertAttrs(cb);b$(cb.firstChild);}}function b$(cb){return b8(0,cb);}function ca(cb){return b8(1,cb);}b7=(b4==null?"":b4.$0).toLowerCase();w.LoadedTemplateFile(b3).set_Item(b7,b5);b5.hasChildNodes()?(function(cb){var cc,cd,ce,cf;while(true){cc=cb.querySelector("[ws-template]");if(n.Equals(cc,null)){cd=cb.querySelector("[ws-children-template]");if(n.Equals(cd,null))return null;else{ce=cd.getAttribute("ws-children-template");cd.removeAttribute("ws-children-template");w.PrepareTemplateStrict(b3,{$:1,$0:ce},cd,null);cb=cb;}}else{cf=cc.getAttribute("ws-template");(w.PrepareSingleTemplate(b3,{$:1,$0:cf},cc))(null);cb=cb;}}}(b5),b$(b5.firstChild)):void 0;};w.InlineTemplate=function(b3,b4){var b5,b6,b7,b8,b$,ca,cb,cc,cd,ce,cf;function b9(cg,ch){var ci,cj,ck;ci=bk.Insert(cg,ch);ca.push(bk.Updates(ci));cb.push([cg,ci]);cj=b0.GetOptional(ci.OnAfterRender);return cj==null?null:(ck=cj.$0,void cc.push(function(){ck(cg);}));}function b_(cg){var ch,ci;ch=(ci=null,[cd.TryGetValue(cg,{get:function(){return ci;},set:function(cj){ci=cj;}}),ci]);return ch[0]?ch[1].$==0?{$:1,$0:ch[1].$1}:ch[1].$==1?{$:1,$0:x.TextNode(ch[1].$1)}:ch[1].$==2?{$:1,$0:x.TextView(ch[1].$1)}:ch[1].$==8?{$:1,$0:x.TextView(ch[1].$1.get_View())}:ch[1].$==9?{$:1,$0:x.TextView(L.Map(a.String,ch[1].$1.get_View()))}:ch[1].$==10?{$:1,$0:x.TextView(L.Map(function(cj){return cj.get_Input();},ch[1].$1.get_View()))}:ch[1].$==11?{$:1,$0:x.TextView(L.Map(a.String,ch[1].$1.get_View()))}:ch[1].$==12?{$:1,$0:x.TextView(L.Map(function(cj){return cj.get_Input();},ch[1].$1.get_View()))}:ch[1].$==13?{$:1,$0:x.TextView(L.Map(a.String,ch[1].$1.get_View()))}:(bY.warn("Content hole filled with attribute data",cg),null):null;}b$=[];ca=[];cb=[];cc=[];cd=new A.New$5();ce=_1.Get(b4);try{while(ce.MoveNext()){cf=ce.Current();cd.set_Item(cf.$0,cf);}}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}b5=bd.ChildrenArray(b3);w.foreachNotPreserved(b3,"[ws-hole]",function(cg){var ch,ci,cj;cj=cg.getAttribute("ws-hole");cg.removeAttribute("ws-hole");while(cg.hasChildNodes())cg.removeChild(cg.lastChild);ch=b_(cj);ch!=null&&ch.$==1?(ci=ch.$0,_5.LinkElement(cg,ci.docNode),b$.push(_6.New(bk.Empty(cg),ci.docNode,null,cg,$.Int(),null)),ca.push(ci.updates)):void 0;});w.foreachNotPreserved(b3,"[ws-replace]",function(cg){var ch,ci,cj,ck,cl,cm;ch=b_(cg.getAttribute("ws-replace"));ch!=null&&ch.$==1?(ci=ch.$0,cj=cg.parentNode,ck=self.document.createTextNode(""),cj.replaceChild(ck,cg),cl=_5.InsertBeforeDelim(ck,ci.docNode),cm=l.tryFindIndex(function(cn){return cg===cn;},b5),cm==null?void 0:l.set(b5,cm.$0,ci.docNode),b$.push(_6.New(bk.Empty(cj),ci.docNode,{$:1,$0:[cl,ck]},cj,$.Int(),null)),ca.push(ci.updates)):void 0;});w.foreachNotPreserved(b3,"[ws-attr]",function(cg){var ch,ci,cj;ch=cg.getAttribute("ws-attr");cg.removeAttribute("ws-attr");ci=(cj=null,[cd.TryGetValue(ch,{get:function(){return cj;},set:function(ck){cj=ck;}}),cj]);ci[0]?ci[1].$==3?b9(cg,ci[1].$1):bY.warn("Attribute hole filled with non-attribute data",ch):void 0;});w.foreachNotPreserved(b3,"[ws-on]",function(cg){b9(cg,O.Concat(l.choose(function(ch){var ci,cj,ck;ci=V.SplitChars(ch,[":"],1);cj=(ck=null,[cd.TryGetValue(l.get(ci,1),{get:function(){return ck;},set:function(cl){ck=cl;}}),ck]);return cj[0]?cj[1].$==4?{$:1,$0:bn.Handler(l.get(ci,0),cj[1].$1)}:cj[1].$==5?{$:1,$0:O.Handler(l.get(ci,0),cj[1].$1)}:(bY.warn("Event hole on"+l.get(ci,0)+" filled with non-event data",l.get(ci,1)),null):null;},V.SplitChars(cg.getAttribute("ws-on"),[" "],1))));cg.removeAttribute("ws-on");});w.foreachNotPreserved(b3,"[ws-onafterrender]",function(cg){var ch,ci,cj;ch=cg.getAttribute("ws-onafterrender");ci=(cj=null,[cd.TryGetValue(ch,{get:function(){return cj;},set:function(ck){cj=ck;}}),cj]);ci[0]?ci[1].$==6?(cg.removeAttribute("ws-onafterrender"),b9(cg,bn.OnAfterRender(ci[1].$1))):ci[1].$==7?(cg.removeAttribute("ws-onafterrender"),b9(cg,bn.OnAfterRender(ci[1].$1))):bY.warn("onafterrender hole filled with non-onafterrender data",ch):void 0;});w.foreachNotPreserved(b3,"[ws-var]",function(cg){var ch,ci,cj;ch=cg.getAttribute("ws-var");cg.removeAttribute("ws-var");ci=(cj=null,[cd.TryGetValue(ch,{get:function(){return cj;},set:function(ck){cj=ck;}}),cj]);ci[0]?ci[1].$==8?b9(cg,bn.Value(ci[1].$1)):ci[1].$==9?b9(cg,bn.Checked(ci[1].$1)):ci[1].$==10?b9(cg,bn.IntValue(ci[1].$1)):ci[1].$==11?b9(cg,bn.IntValueUnchecked(ci[1].$1)):ci[1].$==12?b9(cg,bn.FloatValue(ci[1].$1)):ci[1].$==13?b9(cg,bn.FloatValueUnchecked(ci[1].$1)):bY.warn("Var hole filled with non-Var data",ch):void 0;});w.foreachNotPreserved(b3,"[ws-attr-holes]",function(cg){var ch,ci,cj,ck;ch=new a.RegExp(w.TextHoleRE(),"g");ci=V.SplitChars(cg.getAttribute("ws-attr-holes"),[" "],1);cg.removeAttribute("ws-attr-holes");for(cj=0,ck=ci.length-1;cj<=ck;cj++)(function(){var cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx;cu=l.get(ci,cj);cv=cg.getAttribute(cu);cl=null;cm=0;cw=[];while(cl=ch.exec(cv),cl!==null){cx=bc.string(cv,{$:1,$0:cm},{$:1,$0:ch.lastIndex-l.get(cl,0).length-1});cm=ch.lastIndex;cw.push([cx,l.get(cl,1)]);}co=bc.string(cv,{$:1,$0:cm},null);ch.lastIndex=0;cp=l.foldBack(function(cy,cz){return(function(cA){var cB,cC;cB=cA[0];cC=cA[1];return function(cD){var cE,cF,cG,cH,cI;cE=cD[0];cF=cD[1];cG=(cH=(cI=null,[cd.TryGetValue(cC,{get:function(){return cI;},set:function(cJ){cI=cJ;}}),cI]),cH[0]?cH[1].$==1?{$:0,$0:cH[1].$1}:cH[1].$==2?{$:1,$0:cH[1].$1}:cH[1].$==8?{$:1,$0:cH[1].$1.get_View()}:cH[1].$==9?{$:1,$0:L.Map(a.String,cH[1].$1.get_View())}:cH[1].$==10?{$:1,$0:L.Map(function(cJ){return cJ.get_Input();},cH[1].$1.get_View())}:cH[1].$==11?{$:1,$0:L.Map(a.String,cH[1].$1.get_View())}:cH[1].$==12?{$:1,$0:L.Map(function(cJ){return cJ.get_Input();},cH[1].$1.get_View())}:cH[1].$==13?{$:1,$0:L.Map(a.String,cH[1].$1.get_View())}:(bY.warn("Attribute value hole filled with non-text data",cC),{$:0,$0:""}):{$:0,$0:""});return cG.$==1?[cB,new bm({$:1,$0:cE===""?cG.$0:L.Map(function(cJ){return cJ+cE;},cG.$0),$1:cF})]:[cB+cG.$0+cE,cF];};}(cy))(cz);},cw,[co,bm.Empty]);return b9(cg,cp[1].$==1?cp[1].$1.$==1?cp[1].$1.$1.$==1?cp[1].$1.$1.$1.$==0?(cq=cp[0],bn.Dynamic(cu,L.Map3(function(cy,cz,cA){return cq+cy+cz+cA;},cp[1].$0,cp[1].$1.$0,cp[1].$1.$1.$0))):(cr=cp[0],bn.Dynamic(cu,L.Map(function(cy){return cr+V.concat("",cy);},L.Sequence(cp[1])))):(cs=cp[0],bn.Dynamic(cu,L.Map2(function(cy,cz){return cs+cy+cz;},cp[1].$0,cp[1].$1.$0))):cp[0]===""?bn.Dynamic(cu,cp[1].$0):(ct=cp[0],bn.Dynamic(cu,L.Map(function(cy){return ct+cy;},cp[1].$0))):O.Create(cu,cp[0]));}());});return[b0.DeleteEmptyFields({Els:b5,Dirty:true,Holes:b$,Attrs:cb,Render:(b6=cc.length==0?null:{$:1,$0:function(cg){l.iter(function(ch){ch(cg);},cc);}},b6?b6.$0:void 0),El:(b7=!n.Equals(b5,null)&&b5.length===1&&(l.get(b5,0)instanceof J&&(l.get(b5,0)instanceof a.Element&&(b8=l.get(b5,0),true)))?{$:1,$0:b8}:null,b7?b7.$0:void 0)},["Render","El"]),_8.TreeReduce(L.Const(),L.Map2Unit,ca)];};w.GlobalHoles=function(){_3.$cctor();return _3.GlobalHoles;};w.foreachNotPreserved=function(b3,b4,b5){bd.IterSelector(b3,b4,function(b6){if(b6.closest("[ws-preserve]")==null)b5(b6);});};w.PrepareSingleTemplate=function(b3,b4,b5){var b6;b6=w.FakeRootSingle(b5);return function(b7){w.PrepareTemplateStrict(b3,b4,b6,b7);};};w.TextHoleRE=function(){_3.$cctor();return _3.TextHoleRE;};x=g.Doc=b0.Class({},f,x);x.RunById=function(b3,b4){var b5;b5=self.document.getElementById(b3);n.Equals(b5,null)?e.FailWith("invalid id: "+b3):x.Run(b5,b4);};x.Run=function(b3,b4){_5.LinkElement(b3,b4.docNode);x.RunInPlace(false,b3,b4);};x.Concat=function(b3){var b4;b4=_8.ofSeqNonCopying(b3);return _8.TreeReduce(x.get_Empty(),x.Append,b4);};x.get_Empty=function(){return x.Mk(null,L.Const());};x.RunInPlace=function(b3,b4,b5){var b6;b6=_5.CreateRunState(b4,b5.docNode);L.Sink(bf.get_UseAnimations()||bg.BatchUpdatesEnabled()?bh.StartProcessor(_5.PerformAnimatedUpdate(b3,b6,b5.docNode)):function(){_5.PerformSyncUpdate(b3,b6,b5.docNode);},b5.updates);};x.Element=function(b3,b4,b5){var b6,b7;b6=O.Concat(b4);b7=x.Concat(b5);return ba.New(self.document.createElement(b3),b6,b7);};x.TextNode=function(b3){return x.Mk({$:5,$0:self.document.createTextNode(b3)},L.Const());};x.Button=function(b3,b4,b5){var b6;b6=O.Concat(b4);return ba.New(x.Clickable("button",b5),b6,x.TextNode(b3));};x.BindView=function(b3,b4){return x.EmbedView(L.Map(b3,b4));};x.Append=function(b3,b4){return x.Mk({$:0,$0:b3.docNode,$1:b4.docNode},L.Map2Unit(b3.updates,b4.updates));};x.Mk=function(b3,b4){return new x.New(b3,b4);};x.Clickable=function(b3,b4){var b5;b5=self.document.createElement(b3);b5.addEventListener("click",function(b6){b6.preventDefault();return b4();},false);return b5;};x.EmbedView=function(b3){var b4;b4=_5.CreateEmbedNode();return x.Mk({$:2,$0:b4},L.Map(a.ignore,L.Bind(function(b5){_5.UpdateEmbedNode(b4,b5.docNode);return b5.updates;},b3)));};x.TextView=function(b3){var b4;b4=_5.CreateTextNode();return x.Mk({$:4,$0:b4},L.Map(function(b5){_5.UpdateTextNode(b4,b5);},b3));};x.New=b0.Ctor(function(b3,b4){f.New.call(this);this.docNode=b3;this.updates=b4;},x);z.NewFromSeq=function(b3){var b4,b5,b6;b4={};b5=_1.Get(b3);try{while(b5.MoveNext()){b6=b5.Current();b4[b6[0]]=b6[1];}}finally{if(typeof b5=="object"&&"Dispose"in b5)b5.Dispose();}return b4;};A=s.Dictionary=b0.Class({set_Item:function(b3,b4){this.set(b3,b4);},set:function(b3,b4){var b5,b6,b7,b8;b5=this;b6=this.hash(b3);b7=this.data[b6];b7==null?(this.count=this.count+1,this.data[b6]=new a.Array({K:b3,V:b4})):(b8=l.tryFindIndex(function(b9){return b5.equals.apply(null,[(e.KeyValue(b9))[0],b3]);},b7),b8==null?(this.count=this.count+1,b7.push({K:b3,V:b4})):b7[b8.$0]={K:b3,V:b4});},TryGetValue:function(b3,b4){var b5,b6,b7;b5=this;b6=this.data[this.hash(b3)];return b6==null?false:(b7=l.tryPick(function(b8){var b9;b9=e.KeyValue(b8);return b5.equals.apply(null,[b9[0],b3])?{$:1,$0:b9[1]}:null;},b6),b7!=null&&b7.$==1&&(b4.set(b7.$0),true));},ContainsKey:function(b3){var b4,b5;b4=this;b5=this.data[this.hash(b3)];return b5==null?false:l.exists(function(b6){return b4.equals.apply(null,[(e.KeyValue(b6))[0],b3]);},b5);},Remove:function(b3){return this.remove(b3);},get_Keys:function(){return new be.New(this);},get_Values:function(){return new bp.New(this);},remove:function(b3){var b4,b5,b6,b7;b4=this;b5=this.hash(b3);b6=this.data[b5];return b6==null?false:(b7=l.filter(function(b8){return!b4.equals.apply(null,[(e.KeyValue(b8))[0],b3]);},b6),l.length(b7)<b6.length&&(this.count=this.count-1,this.data[b5]=b7,true));},get_Item:function(b3){return this.get(b3);},get:function(b3){var b4,b5;b4=this;b5=this.data[this.hash(b3)];return b5==null?_0.notPresent():l.pick(function(b6){var b7;b7=e.KeyValue(b6);return b4.equals.apply(null,[b7[0],b3])?{$:1,$0:b7[1]}:null;},b5);},GetEnumerator:function(){return _1.Get0(this);},GetEnumerator0:function(){return _1.Get0(l.concat(K.GetFieldValues(this.data)));}},f,A);A.New$5=b0.Ctor(function(){A.New$6.call(this,[],n.Equals,n.Hash);},A);A.New$6=b0.Ctor(function(b3,b4,b5){var b6,b7;f.New.call(this);this.equals=b4;this.hash=b5;this.count=0;this.data=[];b6=_1.Get(b3);try{while(b6.MoveNext()){b7=b6.Current();this.set(b7.K,b7.V);}}finally{if(typeof b6=="object"&&"Dispose"in b6)b6.Dispose();}},A);B.Solve=function(b3){var b4,b5,b6,b7,b8;b4=T.New(B.readInts(b3),0,false);b5=true;b6=U.New(l.get(b4.memory,b4.position),l.get(b4.memory,b4.position+1),l.get(b4.memory,b4.position+2),l.get(b4.memory,b4.position+3));b7=l.mapi(function(b9,b_){return b9===1?12:b9===2?2:b_;},b4.memory);b8=false;return l.get(G.last(G.unfold(function(b9){var b_;return b9.finished?null:(b_=B.runCmd(b5?b6:U.New(l.get(b9.memory,b9.position),l.get(b9.memory,b9.position+1),l.get(b9.memory,b9.position+2),l.get(b9.memory,b9.position+3)),b5?T.New(b7,b9.position,b9.finished):b9),(b5?b5=false:void 0,{$:1,$0:[b_,b_]}));},b4)).memory,0);};B.runCmd=function(b3,b4){var b5,b6,b7;b5=b3.opcode;return b5===1?(b6=l.mapi(function(b8,b9){return b8===b3.dest?l.get(b4.memory,b3.op1)+l.get(b4.memory,b3.op2):b9;},b4.memory),T.New(b6,b4.position+4,l.get(b6,b4.position+4)===99)):b5===2?(b7=l.mapi(function(b8,b9){return b8===b3.dest?l.get(b4.memory,b3.op1)*l.get(b4.memory,b3.op2):b9;},b4.memory),T.New(b7,b4.position+4,l.get(b7,b4.position+4)===99)):e.FailWith("wrong position");};B.readInts=function(b3){return l.map(M.ParseInt32,V.SplitChars(b3,[","],0));};l.filter=function(b3,b4){var b5,b6,b7;b5=[];for(b6=0,b7=b4.length-1;b6<=b7;b6++)if(b3(b4[b6]))b5.push(b4[b6]);return b5;};l.map=function(b3,b4){var b5,b6,b7;b5=new a.Array(b4.length);for(b6=0,b7=b4.length-1;b6<=b7;b6++)b5[b6]=b3(b4[b6]);return b5;};l.choose=function(b3,b4){var b5,b6,b7,b8;b5=[];for(b6=0,b7=b4.length-1;b6<=b7;b6++){b8=b3(b4[b6]);b8==null?void 0:b5.push(b8.$0);}return b5;};l.mapi=function(b3,b4){var b5,b6,b7;b5=new a.Array(b4.length);for(b6=0,b7=b4.length-1;b6<=b7;b6++)b5[b6]=b3(b6,b4[b6]);return b5;};l.fold=function(b3,b4,b5){var b6,b7,b8;b6=b4;for(b7=0,b8=b5.length-1;b7<=b8;b7++)b6=b3(b6,b5[b7]);return b6;};l.tryFindIndex=function(b3,b4){var b5,b6;b5=null;b6=0;while(b6<b4.length&&b5==null){b3(b4[b6])?b5={$:1,$0:b6}:void 0;b6=b6+1;}return b5;};l.tryPick=function(b3,b4){var b5,b6,b7;b5=null;b6=0;while(b6<b4.length&&b5==null){b7=b3(b4[b6]);b7!=null&&b7.$==1?b5=b7:void 0;b6=b6+1;}return b5;};l.exists=function(b3,b4){var b5,b6,b7,b8;b5=false;b6=0;b8=l.length(b4);while(!b5&&b6<b8)if(b3(b4[b6]))b5=true;else b6=b6+1;return b5;};l.concat=function(b3){return a.Array.prototype.concat.apply([],l.ofSeq(b3));};l.ofList=function(b3){var b4,b5;b5=[];b4=b3;while(!(b4.$==0)){b5.push(bl.head(b4));b4=bl.tail(b4);}return b5;};l.foldBack=function(b3,b4,b5){var b6,b7,b8,b9,b_;b6=b5;b8=b4.length;for(b9=1,b_=b8;b9<=b_;b9++)b6=b3(b4[b8-b9],b6);return b6;};l.iter=function(b3,b4){var b5,b6;for(b5=0,b6=b4.length-1;b5<=b6;b5++)b3(b4[b5]);};l.ofSeq=function(b3){var b4,b5;if(b3 instanceof a.Array)return b3.slice();else if(b3 instanceof bm)return l.ofList(b3);else{b4=[];b5=_1.Get(b3);try{while(b5.MoveNext())b4.push(b5.Current());return b4;}finally{if(typeof b5=="object"&&"Dispose"in b5)b5.Dispose();}}};l.init=function(b3,b4){var b5,b6,b7;b3<0?e.FailWith("Negative size given."):null;b5=new a.Array(b3);for(b6=0,b7=b3-1;b6<=b7;b6++)b5[b6]=b4(b6);return b5;};l.pick=function(b3,b4){var b5;b5=l.tryPick(b3,b4);return b5==null?e.FailWith("KeyNotFoundException"):b5.$0;};l.forall=function(b3,b4){var b5,b6,b7,b8;b5=true;b6=0;b8=l.length(b4);while(b5&&b6<b8)if(b3(b4[b6]))b6=b6+1;else b5=false;return b5;};l.create=function(b3,b4){var b5,b6,b7;b5=new a.Array(b3);for(b6=0,b7=b3-1;b6<=b7;b6++)b5[b6]=b4;return b5;};C.cleanLine=function(b3){return V.Trim(V.Replace(V.Replace(b3,"\n",""),"\r",""));};C.solver=function(b3,b4,b5,b6){return C.generator(C.analyse,b3,b4,b5,b6);};C.generator=function(b3,b4,b5,b6,b7){return l.fold(b5,b6,b3(b4,b7));};C.analyse=function(b3,b4){return l.map(b3,b4);};D.phase1=function(b3){var b4,b5;b4=l.get(b3,0).length;b5=l.length(b3);bY.log("cols",b4,"rows",b5);return C.solver(D.liner,function(b6,b7){return D.step1(b4,b5,b6,b7);},D.start(),b3).result;};D.phase2=function(b3){var b4,b5;b4=l.get(b3,0).length;b5=l.length(b3);bY.log("cols",b4,"rows",b5);return l.fold(function(b6,b7){return b6*b7;},1,l.map(function(b6){return C.solver(D.liner,function(b7,b8){return D.step(b4,b5,b6,b7,b8);},D.start(),b3).result;},[X.New(1,1),X.New(3,1),X.New(5,1),X.New(7,1),X.New(1,2)]));};D.liner=function(b3){return l.map(function(b4){return b4==="#";},V.ToCharArray(b3));};D.step1=function(b3,b4,b5,b6){return D.step(b3,b4,D.move1(),b5,b6);};D.start=function(){_9.$cctor();return _9.start;};D.step=function(b3,b4,b5,b6,b7){return b6.curr_row<b6.ypos?W.New(b6.result,b6.xpos,b6.ypos,b6.curr_row+1):W.New(l.get(b7,b6.xpos)?b6.result+1:b6.result,(b6.xpos+b5.right)%b3,(b6.ypos+b5.down)%b4,b6.curr_row+1);};D.move1=function(){_9.$cctor();return _9.move1;};E=g.Var$1=b0.Class({},f,E);E.Create$1=function(b3){return new Y.New(false,Z.New({$:2,$0:b3,$1:[]}),b3);};F=s.HashSet=b0.Class({Add:function(b3){return this.add(b3);},Contains:function(b3){var b4;b4=this.data[this.hash(b3)];return b4==null?false:this.arrContains(b3,b4);},add:function(b3){var b4,b5;b4=this.hash(b3);b5=this.data[b4];return b5==null?(this.data[b4]=[b3],this.count=this.count+1,true):this.arrContains(b3,b5)?false:(b5.push(b3),this.count=this.count+1,true);},arrContains:function(b3,b4){var b5,b6,b7,b8;b5=true;b6=0;b8=b4.length;while(b5&&b6<b8)if(this.equals.apply(null,[b4[b6],b3]))b5=false;else b6=b6+1;return!b5;},ExceptWith:function(b3){var b4;b4=_1.Get(b3);try{while(b4.MoveNext())this.Remove(b4.Current());}finally{if(typeof b4=="object"&&"Dispose"in b4)b4.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(b3){var b4,b5,b6,b7;b4=0;b5=bw.concat(this.data);for(b6=0,b7=b5.length-1;b6<=b7;b6++)l.set(b3,b6,b5[b6]);},IntersectWith:function(b3){var b4,b5,b6,b7,b8;b4=new F.New$4(b3,this.equals,this.hash);b5=bw.concat(this.data);for(b6=0,b7=b5.length-1;b6<=b7;b6++){b8=b5[b6];!b4.Contains(b8)?this.Remove(b8):void 0;}},Remove:function(b3){var b4;b4=this.data[this.hash(b3)];return b4==null?false:this.arrRemove(b3,b4)&&(this.count=this.count-1,true);},arrRemove:function(b3,b4){var b5,b6,b7,b8;b5=true;b6=0;b8=b4.length;while(b5&&b6<b8)if(this.equals.apply(null,[b4[b6],b3])){b4.splice.apply(b4,[b6,1]);b5=false;}else b6=b6+1;return!b5;},GetEnumerator:function(){return _1.Get(bw.concat(this.data));},GetEnumerator0:function(){return _1.Get(bw.concat(this.data));}},f,F);F.New$3=b0.Ctor(function(){F.New$4.call(this,[],n.Equals,n.Hash);},F);F.New$4=b0.Ctor(function(b3,b4,b5){var b6;f.New.call(this);this.equals=b4;this.hash=b5;this.data=[];this.count=0;b6=_1.Get(b3);try{while(b6.MoveNext())this.add(b6.Current());}finally{if(typeof b6=="object"&&"Dispose"in b6)b6.Dispose();}},F);F.New$2=b0.Ctor(function(b3){F.New$4.call(this,b3,n.Equals,n.Hash);},F);G.append=function(b3,b4){return{GetEnumerator:function(){var b5,b6;b5=_1.Get(b3);b6=[true];return new _2.New(b5,null,function(b7){var b8;return b7.s.MoveNext()?(b7.c=b7.s.Current(),true):(b8=b7.s,!n.Equals(b8,null)?b8.Dispose():void 0,b7.s=null,b6[0]&&(b6[0]=false,b7.s=_1.Get(b4),b7.s.MoveNext()?(b7.c=b7.s.Current(),true):(b7.s.Dispose(),b7.s=null,false)));},function(b7){var b8;b8=b7.s;!n.Equals(b8,null)?b8.Dispose():void 0;});}};};G.unfold=function(b3,b4){return{GetEnumerator:function(){return new _2.New(b4,null,function(b5){var b6;b6=b3(b5.s);return b6==null?false:(b5.c=b6.$0[0],b5.s=b6.$0[1],true);},void 0);}};};G.head=function(b3){var b4;b4=_1.Get(b3);try{return b4.MoveNext()?b4.Current():G.insufficient();}finally{if(typeof b4=="object"&&"Dispose"in b4)b4.Dispose();}};G.fold=function(b3,b4,b5){var b6,b7;b6=b4;b7=_1.Get(b5);try{while(b7.MoveNext())b6=b3(b6,b7.Current());return b6;}finally{if(typeof b7=="object"&&"Dispose"in b7)b7.Dispose();}};G.iter=function(b3,b4){var b5;b5=_1.Get(b4);try{while(b5.MoveNext())b3(b5.Current());}finally{if(typeof b5=="object"&&"Dispose"in b5)b5.Dispose();}};G.map=function(b3,b4){return{GetEnumerator:function(){var b5;b5=_1.Get(b4);return new _2.New(null,null,function(b6){return b5.MoveNext()&&(b6.c=b3(b5.Current()),true);},function(){b5.Dispose();});}};};G.max=function(b3){var b4,b5,b6;b4=_1.Get(b3);try{if(!b4.MoveNext())G.seqEmpty();b5=b4.Current();while(b4.MoveNext()){b6=b4.Current();n.Compare(b6,b5)===1?b5=b6:void 0;}return b5;}finally{if(typeof b4=="object"&&"Dispose"in b4)b4.Dispose();}};G.seqEmpty=function(){return e.FailWith("The input sequence was empty.");};G.forall=function(b3,b4){return!G.exists(function(b5){return!b3(b5);},b4);};G.exists=function(b3,b4){var b5,b6;b5=_1.Get(b4);try{b6=false;while(!b6&&b5.MoveNext())b6=b3(b5.Current());return b6;}finally{if(typeof b5=="object"&&"Dispose"in b5)b5.Dispose();}};H.$cctor=function(){H.$cctor=a.ignore;H.initialized=new A.New$5();};H=j.TemplateInitializer=b0.Class({},f,H);H.GetOrAddHoleFor=function(b3,b4,b5){var b6,b7,b8,b9;H.$cctor();b6=H.GetHolesFor(b3);b7=(b8=null,[b6.TryGetValue(b4,{get:function(){return b8;},set:function(b_){b8=b_;}}),b8]);return b7[0]?b7[1]:(b9=b5(),(b6.set_Item(b4,b9),b9));};H.GetHolesFor=function(b3){var b4,b5,b6;H.$cctor();b4=(b5=null,[H.initialized.TryGetValue(b3,{get:function(){return b5;},set:function(b7){b5=b7;}}),b5]);return b4[0]?b4[1]:(b6=new A.New$5(),(H.initialized.set_Item(b3,b6),b6));};K.GetFieldValues=function(b3){var b4,b5;b4=[];for(var b6 in b3)b4.push(b3[b6]);return b4;};L=g.View=b0.Class({},null,L);M.ParseInt32=function(b3){return M.Parse(b3,-2147483648,2147483647,"Value was either too large or too small for an Int32.");};M.TryParseInt32=function(b3,b4){return M.TryParse(b3,-2147483648,2147483647,b4);};O=g.AttrProxy=b0.Class({},null,O);O.Create=function(b3,b4){return bk.Static(function(b5){b5.setAttribute(b3,b4);});};O.Concat=function(b3){var b4;b4=_8.ofSeqNonCopying(b3);return _8.TreeReduce(bk.EmptyAttr(),O.Append,b4);};O.Handler=function(b3,b4){return O.HandlerImpl(b3,b4);};O.Append=function(b3,b4){return bk.AppendTree(b3,b4);};O.HandlerImpl=function(b3,b4){return bk.Static(function(b5){b5.addEventListener(b3,function(b6){return(b4(b5))(b6);},false);});};P=g.Var=b0.Class({},f,P);P.New=b0.Ctor(function(){f.New.call(this);},P);Q=g.CheckedInput=b0.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,Q);S=R.attr=b0.Class({},f,S);T.New=function(b3,b4,b5){return{memory:b3,position:b4,finished:b5};};U.New=function(b3,b4,b5,b6){return{opcode:b3,op1:b4,op2:b5,dest:b6};};V.SplitChars=function(b3,b4,b5){return V.Split(b3,new a.RegExp("["+V.RegexEscape(b4.join(""))+"]"),b5);};V.Trim=function(b3){return b3.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};V.Split=function(b3,b4,b5){return b5===1?l.filter(function(b6){return b6!=="";},V.SplitWith(b3,b4)):V.SplitWith(b3,b4);};V.RegexEscape=function(b3){return b3.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};V.Replace=function(b3,b4,b5){function b6(b7){var b8,b9,b_;b8=b7.indexOf(b4);return b8!==-1?(b9=V.ReplaceOnce(b7,b4,b5),(b_=b8+b5.length,V.Substring(b9,0,b8+b5.length)+b6(b9.substring(b_)))):b7;}return b6(b3);};V.SplitWith=function(b3,b4){return b3.split(b4);};V.ReplaceOnce=function(b3,b4,b5){return b3.replace(b4,b5);};V.ToCharArray=function(b3){return l.init(b3.length,function(b4){return b3[b4];});};V.concat=function(b3,b4){return l.ofSeq(b4).join(b3);};V.StartsWith=function(b3,b4){return b3.substring(0,b4.length)==b4;};V.Substring=function(b3,b4,b5){return b3.substr(b4,b5);};V.forall=function(b3,b4){return G.forall(b3,V.protect(b4));};V.protect=function(b3){return b3===null?"":b3;};W.New=function(b3,b4,b5,b6){return{result:b3,xpos:b4,ypos:b5,curr_row:b6};};X.New=function(b3,b4){return{right:b3,down:b4};};Y=g.ConcreteVar=b0.Class({Set:function(b3){if(this.isConst)(function(b4){return b4("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(b4){bY.log(b4);}));else{Z.Obsolete(this.snap);this.current=b3;this.snap=Z.New({$:2,$0:b3,$1:[]});}},get_View:function(){return this.view;},Get:function(){return this.current;},UpdateMaybe:function(b3){var b4;b4=b3(this.Get());b4!=null&&b4.$==1?this.Set(b4.$0):void 0;}},P,Y);Y.New=b0.Ctor(function(b3,b4,b5){var b6;b6=this;P.New.call(this);this.isConst=b3;this.current=b5;this.snap=b4;this.view=function(){return b6.snap;};this.id=$.Int();},Y);Z.WhenRun=function(b3,b4,b5){var b6;b6=b3.s;b6==null?b5():b6!=null&&b6.$==2?(b6.$1.push(b5),b4(b6.$0)):b6!=null&&b6.$==3?(b6.$0.push(b4),b6.$1.push(b5)):b4(b6.$0);};Z.Map=function(b3,b4){var b5,b6;b5=b4.s;return b5!=null&&b5.$==0?Z.New({$:0,$0:b3(b5.$0)}):(b6=Z.New({$:3,$0:[],$1:[]}),(Z.When(b4,function(b7){Z.MarkDone(b6,b4,b3(b7));},b6),b6));};Z.Map2Unit=function(b3,b4){var b5,b6,b7;function b8(){var b9,b_,b$;if(!(b9=b7.s,b9!=null&&b9.$==0||b9!=null&&b9.$==2)){b_=Z.ValueAndForever(b3);b$=Z.ValueAndForever(b4);b_!=null&&b_.$==1?b$!=null&&b$.$==1?b_.$0[1]&&b$.$0[1]?Z.MarkForever(b7,null):Z.MarkReady(b7,null):void 0:void 0;}}b5=b3.s;b6=b4.s;return b5!=null&&b5.$==0?b6!=null&&b6.$==0?Z.New({$:0,$0:null}):b4:b6!=null&&b6.$==0?b3:(b7=Z.New({$:3,$0:[],$1:[]}),(Z.When(b3,b8,b7),Z.When(b4,b8,b7),b7));};Z.Map3=function(b3,b4,b5,b6){var b7,b8,b9,b_;function b$(ca){var cb,cc,cd,ce;if(!(cb=b_.s,cb!=null&&cb.$==0||cb!=null&&cb.$==2)){cc=Z.ValueAndForever(b4);cd=Z.ValueAndForever(b5);ce=Z.ValueAndForever(b6);cc!=null&&cc.$==1?cd!=null&&cd.$==1?ce!=null&&ce.$==1?cc.$0[1]&&cd.$0[1]&&ce.$0[1]?Z.MarkForever(b_,b3(cc.$0[0],cd.$0[0],ce.$0[0])):Z.MarkReady(b_,b3(cc.$0[0],cd.$0[0],ce.$0[0])):void 0:void 0:void 0;}}b7=b4.s;b8=b5.s;b9=b6.s;return b7!=null&&b7.$==0?b8!=null&&b8.$==0?b9!=null&&b9.$==0?Z.New({$:0,$0:b3(b7.$0,b8.$0,b9.$0)}):Z.Map3Opt1(b3,b7.$0,b8.$0,b6):b9!=null&&b9.$==0?Z.Map3Opt2(b3,b7.$0,b9.$0,b5):Z.Map3Opt3(b3,b7.$0,b5,b6):b8!=null&&b8.$==0?b9!=null&&b9.$==0?Z.Map3Opt4(b3,b8.$0,b9.$0,b4):Z.Map3Opt5(b3,b8.$0,b4,b6):b9!=null&&b9.$==0?Z.Map3Opt6(b3,b9.$0,b4,b5):(b_=Z.New({$:3,$0:[],$1:[]}),(Z.When(b4,b$,b_),Z.When(b5,b$,b_),Z.When(b6,b$,b_),b_));};Z.Sequence=function(b3){var b4,b5,b6;function b7(b8){var b9;if(b6[0]===0){b9=l.map(function(b_){var b$;b$=b_.s;return b$!=null&&b$.$==0?b$.$0:b$!=null&&b$.$==2?b$.$0:e.FailWith("value not found by View.Sequence");},b4);l.forall(function(b_){var b$;b$=b_.s;return b$!=null&&b$.$==0;},b4)?Z.MarkForever(b5,b9):Z.MarkReady(b5,b9);}else b6[0]--;}b4=l.ofSeq(b3);return b4.length==0?Z.New({$:0,$0:[]}):(b5=Z.New({$:3,$0:[],$1:[]}),(b6=[l.length(b4)-1],(l.iter(function(b8){Z.When(b8,b7,b5);},b4),b5)));};Z.Map2=function(b3,b4,b5){var b6,b7,b8;function b9(b_){var b$,ca,cb;if(!(b$=b8.s,b$!=null&&b$.$==0||b$!=null&&b$.$==2)){ca=Z.ValueAndForever(b4);cb=Z.ValueAndForever(b5);ca!=null&&ca.$==1?cb!=null&&cb.$==1?ca.$0[1]&&cb.$0[1]?Z.MarkForever(b8,b3(ca.$0[0],cb.$0[0])):Z.MarkReady(b8,b3(ca.$0[0],cb.$0[0])):void 0:void 0;}}b6=b4.s;b7=b5.s;return b6!=null&&b6.$==0?b7!=null&&b7.$==0?Z.New({$:0,$0:b3(b6.$0,b7.$0)}):Z.Map2Opt1(b3,b6.$0,b5):b7!=null&&b7.$==0?Z.Map2Opt2(b3,b7.$0,b4):(b8=Z.New({$:3,$0:[],$1:[]}),(Z.When(b4,b9,b8),Z.When(b5,b9,b8),b8));};Z.Copy=function(b3){var b4,b5,b6;b4=b3.s;return b4==null?b3:b4!=null&&b4.$==2?(b5=Z.New({$:2,$0:b4.$0,$1:[]}),(Z.WhenObsolete(b3,b5),b5)):b4!=null&&b4.$==3?(b6=Z.New({$:3,$0:[],$1:[]}),(Z.When(b3,function(b7){Z.MarkDone(b6,b3,b7);},b6),b6)):b3;};Z.WhenObsoleteRun=function(b3,b4){var b5;b5=b3.s;b5==null?b4():b5!=null&&b5.$==2?b5.$1.push(b4):b5!=null&&b5.$==3?b5.$1.push(b4):void 0;};Z.When=function(b3,b4,b5){var b6;b6=b3.s;b6==null?Z.Obsolete(b5):b6!=null&&b6.$==2?(Z.EnqueueSafe(b6.$1,b5),b4(b6.$0)):b6!=null&&b6.$==3?(b6.$0.push(b4),Z.EnqueueSafe(b6.$1,b5)):b4(b6.$0);};Z.MarkDone=function(b3,b4,b5){var b6;if(b6=b4.s,b6!=null&&b6.$==0)Z.MarkForever(b3,b5);else Z.MarkReady(b3,b5);};Z.ValueAndForever=function(b3){var b4;b4=b3.s;return b4!=null&&b4.$==0?{$:1,$0:[b4.$0,true]}:b4!=null&&b4.$==2?{$:1,$0:[b4.$0,false]}:null;};Z.MarkForever=function(b3,b4){var b5,b6,b7,b8;b5=b3.s;if(b5!=null&&b5.$==3){b3.s={$:0,$0:b4};b6=b5.$0;for(b7=0,b8=l.length(b6)-1;b7<=b8;b7++)(l.get(b6,b7))(b4);}else void 0;};Z.MarkReady=function(b3,b4){var b5,b6,b7,b8;b5=b3.s;if(b5!=null&&b5.$==3){b3.s={$:2,$0:b4,$1:b5.$1};b6=b5.$0;for(b7=0,b8=l.length(b6)-1;b7<=b8;b7++)(l.get(b6,b7))(b4);}else void 0;};Z.Map3Opt1=function(b3,b4,b5,b6){return Z.Map(function(b7){return b3(b4,b5,b7);},b6);};Z.Map3Opt2=function(b3,b4,b5,b6){return Z.Map(function(b7){return b3(b4,b7,b5);},b6);};Z.Map3Opt3=function(b3,b4,b5,b6){return Z.Map2(function(b7,b8){return b3(b4,b7,b8);},b5,b6);};Z.Map3Opt4=function(b3,b4,b5,b6){return Z.Map(function(b7){return b3(b7,b4,b5);},b6);};Z.Map3Opt5=function(b3,b4,b5,b6){return Z.Map2(function(b7,b8){return b3(b7,b4,b8);},b5,b6);};Z.Map3Opt6=function(b3,b4,b5,b6){return Z.Map2(function(b7,b8){return b3(b7,b8,b4);},b5,b6);};Z.Map2Opt1=function(b3,b4,b5){return Z.Map(function(b6){return b3(b4,b6);},b5);};Z.Map2Opt2=function(b3,b4,b5){return Z.Map(function(b6){return b3(b6,b4);},b5);};Z.WhenObsolete=function(b3,b4){var b5;b5=b3.s;b5==null?Z.Obsolete(b4):b5!=null&&b5.$==2?Z.EnqueueSafe(b5.$1,b4):b5!=null&&b5.$==3?Z.EnqueueSafe(b5.$1,b4):void 0;};Z.Join=function(b3){var b4;b4=Z.New({$:3,$0:[],$1:[]});Z.When(b3,function(b5){var b6;b6=b5();Z.When(b6,function(b7){var b8,b9;if((b8=b6.s,b8!=null&&b8.$==0)&&(b9=b3.s,b9!=null&&b9.$==0))Z.MarkForever(b4,b7);else Z.MarkReady(b4,b7);},b4);},b4);return b4;};Z.EnqueueSafe=function(b3,b4){var b5,b6,b7,b8;b3.push(b4);if(b3.length%20===0){b5=b3.slice(0);bU.Clear(b3);for(b6=0,b7=l.length(b5)-1;b6<=b7;b6++){b8=l.get(b5,b6);typeof b8=="object"?function(b9){if(b9.s)b3.push(b9);}(b8):function(b9){b3.push(b9);}(b8);}}else void 0;};_0.notPresent=function(){return e.FailWith("The given key was not present in the dictionary.");};_1.Get=function(b3){return b3 instanceof a.Array?_1.ArrayEnumerator(b3):n.Equals(typeof b3,"string")?_1.StringEnumerator(b3):b3.GetEnumerator();};_1.ArrayEnumerator=function(b3){return new _2.New(0,null,function(b4){var b5;b5=b4.s;return b5<l.length(b3)&&(b4.c=l.get(b3,b5),b4.s=b5+1,true);},void 0);};_1.StringEnumerator=function(b3){return new _2.New(0,null,function(b4){var b5;b5=b4.s;return b5<b3.length&&(b4.c=b3[b5],b4.s=b5+1,true);},void 0);};_1.Get0=function(b3){return b3 instanceof a.Array?_1.ArrayEnumerator(b3):n.Equals(typeof b3,"string")?_1.StringEnumerator(b3):"GetEnumerator0"in b3?b3.GetEnumerator0():b3.GetEnumerator();};_2=_1.T=b0.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},f,_2);_2.New=b0.Ctor(function(b3,b4,b5,b6){f.New.call(this);this.s=b3;this.c=b4;this.n=b5;this.d=b6;},_2);_3.$cctor=function(){_3.$cctor=a.ignore;_3.LoadedTemplates=new A.New$5();_3.LocalTemplatesLoaded=false;_3.GlobalHoles=new A.New$5();_3.TextHoleRE="\\${([^}]+)}";_3.RenderedFullDocTemplate=null;};_5.LinkElement=function(b3,b4){_5.InsertDoc(b3,b4,null);};_5.InsertDoc=function(b3,b4,b5){var b6;return b4!=null&&b4.$==1?_5.InsertNode(b3,b4.$0.El,b5):b4!=null&&b4.$==2?(b6=b4.$0,(b6.Dirty=false,_5.InsertDoc(b3,b6.Current,b5))):b4==null?b5:b4!=null&&b4.$==4?_5.InsertNode(b3,b4.$0.Text,b5):b4!=null&&b4.$==5?_5.InsertNode(b3,b4.$0,b5):b4!=null&&b4.$==6?l.foldBack(function(b7,b8){return b7==null||b7.constructor===N?_5.InsertDoc(b3,b7,b8):_5.InsertNode(b3,b7,b8);},b4.$0.Els,b5):_5.InsertDoc(b3,b4.$0,_5.InsertDoc(b3,b4.$1,b5));};_5.CreateRunState=function(b3,b4){return br.New(bs.get_Empty(),_5.CreateElemNode(b3,bk.EmptyAttr(),b4));};_5.PerformAnimatedUpdate=function(b3,b4,b5){var b6;return bf.get_UseAnimations()?(b6=null,bt.Delay(function(){var b7,b8,b9;b7=bs.FindAll(b5);b8=_5.ComputeChangeAnim(b4,b7);b9=_5.ComputeEnterAnim(b4,b7);return bt.Bind(bf.Play(bf.Append(b8,_5.ComputeExitAnim(b4,b7))),function(){return bt.Bind(_5.SyncElemNodesNextFrame(b3,b4),function(){return bt.Bind(bf.Play(b9),function(){b4.PreviousNodes=b7;return bt.Return(null);});});});})):_5.SyncElemNodesNextFrame(b3,b4);};_5.PerformSyncUpdate=function(b3,b4,b5){var b6;b6=bs.FindAll(b5);_5.SyncElemNode(b3,b4.Top);b4.PreviousNodes=b6;};_5.InsertBeforeDelim=function(b3,b4){var b5,b6;b5=b3.parentNode;b6=self.document.createTextNode("");b5.insertBefore(b6,b3);_5.LinkPrevElement(b3,b4);return b6;};_5.InsertNode=function(b3,b4,b5){bd.InsertAt(b3,b5,b4);return b4;};_5.CreateElemNode=function(b3,b4,b5){var b6;_5.LinkElement(b3,b5);b6=bk.Insert(b3,b4);return _6.New(b6,b5,null,b3,$.Int(),b0.GetOptional(b6.OnAfterRender));};_5.SyncElemNodesNextFrame=function(b3,b4){function b5(b6){a.requestAnimationFrame(function(){_5.SyncElemNode(b3,b4.Top);b6();});}return bg.BatchUpdatesEnabled()?bt.FromContinuations(function(b6,b7,b8){return b5.apply(null,[b6,b7,b8]);}):(_5.SyncElemNode(b3,b4.Top),bt.Return(null));};_5.ComputeExitAnim=function(b3,b4){return bf.Concat(l.map(function(b5){return bk.GetExitAnim(b5.Attr);},bs.ToArray(bs.Except(b4,bs.Filter(function(b5){return bk.HasExitAnim(b5.Attr);},b3.PreviousNodes)))));};_5.ComputeEnterAnim=function(b3,b4){return bf.Concat(l.map(function(b5){return bk.GetEnterAnim(b5.Attr);},bs.ToArray(bs.Except(b3.PreviousNodes,bs.Filter(function(b5){return bk.HasEnterAnim(b5.Attr);},b4)))));};_5.ComputeChangeAnim=function(b3,b4){var b5;function b6(b7){return bk.HasChangeAnim(b7.Attr);}b5=function(b7){return bs.Filter(b6,b7);};return bf.Concat(l.map(function(b7){return bk.GetChangeAnim(b7.Attr);},bs.ToArray(bs.Intersect(b5(b3.PreviousNodes),b5(b4)))));};_5.SyncElemNode=function(b3,b4){!b3?_5.SyncElement(b4):void 0;_5.Sync(b4.Children);_5.AfterRender(b4);};_5.CreateEmbedNode=function(){return{Current:null,Dirty:false};};_5.UpdateEmbedNode=function(b3,b4){b3.Current=b4;b3.Dirty=true;};_5.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};_5.UpdateTextNode=function(b3,b4){b3.Value=b4;b3.Dirty=true;};_5.LinkPrevElement=function(b3,b4){_5.InsertDoc(b3.parentNode,b4,b3);};_5.SyncElement=function(b3){function b4(b5){function b6(b7){var b8,b9;return b7!=null&&b7.$==0?b6(b7.$0)||b6(b7.$1):b7!=null&&b7.$==2?(b8=b7.$0,b8.Dirty||b6(b8.Current)):b7!=null&&b7.$==6&&(b9=b7.$0,b9.Dirty||l.exists(b4,b9.Holes));}return b6(b5.Children);}bk.Sync(b3.El,b3.Attr);b4(b3)?_5.DoSyncElement(b3):void 0;};_5.Sync=function(b3){var b4,b5;if(b3!=null&&b3.$==1)_5.SyncElemNode(false,b3.$0);else if(b3!=null&&b3.$==2)_5.Sync(b3.$0.Current);else if(b3==null);else if(b3!=null&&b3.$==5);else if(b3!=null&&b3.$==4){b4=b3.$0;b4.Dirty?(b4.Text.nodeValue=b4.Value,b4.Dirty=false):void 0;}else if(b3!=null&&b3.$==6){b5=b3.$0;l.iter(function(b6){_5.SyncElemNode(false,b6);},b5.Holes);l.iter(function(b6){bk.Sync(b6[0],b6[1]);},b5.Attrs);_5.AfterRender(b5);}else{_5.Sync(b3.$0);_5.Sync(b3.$1);}};_5.AfterRender=function(b3){var b4;b4=b0.GetOptional(b3.Render);b4!=null&&b4.$==1?(b4.$0(b3.El),b0.SetOptional(b3,"Render",null)):void 0;};_5.DoSyncElement=function(b3){var b4,b5,b6;function b7(b8,b9){var b_,b$;return b8!=null&&b8.$==1?b8.$0.El:b8!=null&&b8.$==2?(b_=b8.$0,b_.Dirty?(b_.Dirty=false,_5.InsertDoc(b4,b_.Current,b9)):b7(b_.Current,b9)):b8==null?b9:b8!=null&&b8.$==4?b8.$0.Text:b8!=null&&b8.$==5?b8.$0:b8!=null&&b8.$==6?(b$=b8.$0,(b$.Dirty?b$.Dirty=false:void 0,l.foldBack(function(ca,cb){return ca==null||ca.constructor===N?b7(ca,cb):ca;},b$.Els,b9))):b7(b8.$0,b7(b8.$1,b9));}b4=b3.El;bP.Iter((b5=b3.El,function(b8){bd.RemoveNode(b5,b8);}),bP.Except(bP.DocChildren(b3),bP.Children(b3.El,b0.GetOptional(b3.Delimiters))));b7(b3.Children,(b6=b0.GetOptional(b3.Delimiters),b6!=null&&b6.$==1?b6.$0[1]:null));};_6=g.DocElemNode=b0.Class({Equals:function(b3){return this.ElKey===b3.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_6);_6.New=function(b3,b4,b5,b6,b7,b8){var b9;return new _6((b9={Attr:b3,Children:b4,El:b6,ElKey:b7},(b0.SetOptional(b9,"Delimiters",b5),b0.SetOptional(b9,"Render",b8),b9)));};_8.ofSeqNonCopying=function(b3){var b4,b5;if(b3 instanceof a.Array)return b3;else if(b3 instanceof bm)return l.ofList(b3);else if(b3===null)return[];else{b4=[];b5=_1.Get(b3);try{while(b5.MoveNext())b4.push(b5.Current());return b4;}finally{if(typeof b5=="object"&&"Dispose"in b5)b5.Dispose();}}};_8.TreeReduce=function(b3,b4,b5){var b6;function b7(b8,b9){var b_,b$;return b9<=0?b3:b9===1&&(b8>=0&&b8<b6)?l.get(b5,b8):(b$=b9/2>>0,b4(b7(b8,b$),b7(b8+b$,b9-b$)));}b6=l.length(b5);return b7(0,b6);};_8.MapTreeReduce=function(b3,b4,b5,b6){var b7;function b8(b9,b_){var b$,ca;return b_<=0?b4:b_===1&&(b9>=0&&b9<b7)?b3(l.get(b6,b9)):(ca=b_/2>>0,b5(b8(b9,ca),b8(b9+ca,b_-ca)));}b7=l.length(b6);return b8(0,b7);};L.Const=function(b3){var b4;b4=Z.New({$:0,$0:b3});return function(){return b4;};};L.Sink=function(b3,b4){function b5(){Z.WhenRun(b4(),b3,function(){bt.scheduler().Fork(b5);});}bt.scheduler().Fork(b5);};L.Map=function(b3,b4){return L.CreateLazy(function(){return Z.Map(b3,b4());});};L.Map2Unit=function(b3,b4){return L.CreateLazy(function(){return Z.Map2Unit(b3(),b4());});};L.Map3=function(b3,b4,b5,b6){return L.CreateLazy(function(){return Z.Map3(b3,b4(),b5(),b6());});};L.Sequence=function(b3){return L.CreateLazy(function(){return Z.Sequence(G.map(function(b4){return b4();},b3));});};L.Map2=function(b3,b4,b5){return L.CreateLazy(function(){return Z.Map2(b3,b4(),b5());});};L.Bind=function(b3,b4){return L.Join(L.Map(b3,b4));};L.CreateLazy=function(b3){var b4;b4={c:null,o:b3};return function(){var b5,b6;b5=b4.c;return b5===null?(b5=b4.o(),b4.c=b5,(b6=b5.s,b6!=null&&b6.$==0)?b4.o=null:Z.WhenObsoleteRun(b5,function(){b4.c=null;}),b5):b5;};};L.Join=function(b3){return L.CreateLazy(function(){return Z.Join(b3());});};G.last=function(b3){var b4,b5;b4=_1.Get(b3);try{if(!b4.MoveNext())b5=G.insufficient();else{while(b4.MoveNext());b5=b4.Current();}return b5;}finally{if(typeof b4=="object"&&"Dispose"in b4)b4.Dispose();}};G.insufficient=function(){return e.FailWith("The input sequence has an insufficient number of elements.");};_9.$cctor=function(){_9.$cctor=a.ignore;_9.move1=X.New(3,1);_9.start=W.New(0,0,0,0);_9.test=l.map(C.cleanLine,V.SplitChars(V.Replace(V.Replace("..##.........##.........##.........##.........##.........##.......\r\n#..O#...#..#...#...#..#...#...#..#...#...#..#...#...#..#...#...#..\r\n.#....X..#..#....#..#..#....#..#..#....#..#..#....#..#..#....#..#.\r\n..#.#...#O#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#\r\n.#...##..#..X...##..#..#...##..#..#...##..#..#...##..#..#...##..#.\r\n..#.##.......#.X#.......#.##.......#.##.......#.##.......#.##.....\r\n.#.#.#....#.#.#.#.O..#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#\r\n.#........#.#........X.#........#.#........#.#........#.#........#\r\n#.##...#...#.##...#...#.X#...#...#.##...#...#.##...#...#.##...#...\r\n#...##....##...##....##...#X....##...##....##...##....##...##....#\r\n.#..#...#.#.#..#...#.#.#..#...X.#.#..#...#.#.#..#...#.#.#..#...#.#","O","."),"X","#"),["\n"],0));};$.Int=function(){$.set_counter($.counter()+1);return $.counter();};$.set_counter=function(b3){bA.$cctor();bA.counter=b3;};$.counter=function(){bA.$cctor();return bA.counter;};ba=g.Elt=b0.Class({},x,ba);ba.TreeNode=function(b3,b4){var b5,b6;function b7(b8){return b8[1];}b5=bo.Create(b4);return new ba.New$1({$:6,$0:b3},L.Map2Unit((b6=l.map(function(b8){return bk.Updates(b7(b8));},b3.Attrs),_8.TreeReduce(L.Const(),L.Map2Unit,b6)),b5.v),l.get(b3.Els,0),b5);};ba.New=function(b3,b4,b5){var b6,b7;b6=_5.CreateElemNode(b3,b4,b5.docNode);b7=bo.Create(b5.updates);return new ba.New$1({$:1,$0:b6},L.Map2Unit(bk.Updates(b6.Attr),b7.v),b3,b7);};ba.New$1=b0.Ctor(function(b3,b4,b5,b6){x.New.call(this,b3,b4);this.docNode$1=b3;this.updates$1=b4;this.elt=b5;this.rvUpdates=b6;},ba);bb.convertTextNode=function(b3){var b4,b5,b6,b7,b8,b9;b4=null;b5=0;b7=b3.textContent;b8=new a.RegExp(w.TextHoleRE(),"g");while(b4=b8.exec(b7),b4!==null){b3.parentNode.insertBefore(self.document.createTextNode(bc.string(b7,{$:1,$0:b5},{$:1,$0:b8.lastIndex-l.get(b4,0).length-1})),b3);b5=b8.lastIndex;b9=self.document.createElement("span");b9.setAttribute("ws-replace",l.get(b4,1).toLowerCase());b3.parentNode.insertBefore(b9,b3);}b8.lastIndex=0;b3.textContent=bc.string(b7,{$:1,$0:b5},null);};bb.failNotLoaded=function(b3){bY.warn("Instantiating non-loaded template",b3);};bb.fillTextHole=function(b3,b4,b5){var b6;b6=b3.querySelector("[ws-replace]");return n.Equals(b6,null)?(bY.warn("Filling non-existent text hole",b5),null):(b6.parentNode.replaceChild(self.document.createTextNode(b4),b6),{$:1,$0:b6.getAttribute("ws-replace")});};bb.removeHolesExcept=function(b3,b4){function b5(b6){w.foreachNotPreserved(b3,"["+b6+"]",function(b7){if(!b4.Contains(b7.getAttribute(b6)))b7.removeAttribute(b6);});}b5("ws-attr");b5("ws-onafterrender");b5("ws-var");w.foreachNotPreserved(b3,"[ws-hole]",function(b6){if(!b4.Contains(b6.getAttribute("ws-hole"))){b6.removeAttribute("ws-hole");while(b6.hasChildNodes())b6.removeChild(b6.lastChild);}});w.foreachNotPreserved(b3,"[ws-replace]",function(b6){if(!b4.Contains(b6.getAttribute("ws-replace")))b6.parentNode.removeChild(b6);});w.foreachNotPreserved(b3,"[ws-on]",function(b6){b6.setAttribute("ws-on",V.concat(" ",l.filter(function(b7){return b4.Contains(l.get(V.SplitChars(b7,[":"],1),1));},V.SplitChars(b6.getAttribute("ws-on"),[" "],1))));});w.foreachNotPreserved(b3,"[ws-attr-holes]",function(b6){var b7,b8,b9,b_,b$;b7=V.SplitChars(b6.getAttribute("ws-attr-holes"),[" "],1);for(b8=0,b9=b7.length-1;b8<=b9;b8++){b_=l.get(b7,b8);b6.setAttribute(b_,(b$=new a.RegExp(w.TextHoleRE(),"g"),b6.getAttribute(b_).replace(b$,function(ca,cb){return b4.Contains(cb)?ca:"";})));}});};bb.fillInstanceAttrs=function(b3,b4){var b5,b6,b7,b8,b9;bb.convertAttrs(b4);b5=b4.nodeName.toLowerCase();b6=b3.querySelector("[ws-attr="+b5+"]");if(n.Equals(b6,null))bY.warn("Filling non-existent attr hole",b5);else{b6.removeAttribute("ws-attr");for(b7=0,b8=b4.attributes.length-1;b7<=b8;b7++){b9=b4.attributes.item(b7);b9.name==="class"&&b6.hasAttribute("class")?b6.setAttribute("class",b6.getAttribute("class")+" "+b9.nodeValue):b6.setAttribute(b9.name,b9.nodeValue);}}};bb.mapHoles=function(b3,b4){function b5(b6){w.foreachNotPreserved(b3,"["+b6+"]",function(b7){var b8,b9;b8=(b9=null,[b4.TryGetValue(b7.getAttribute(b6).toLowerCase(),{get:function(){return b9;},set:function(b_){b9=b_;}}),b9]);b8[0]?b7.setAttribute(b6,b8[1]):void 0;});}b5("ws-hole");b5("ws-replace");b5("ws-attr");b5("ws-onafterrender");b5("ws-var");w.foreachNotPreserved(b3,"[ws-on]",function(b6){b6.setAttribute("ws-on",V.concat(" ",l.map(function(b7){var b8,b9,b_;b8=V.SplitChars(b7,[":"],1);b9=(b_=null,[b4.TryGetValue(l.get(b8,1),{get:function(){return b_;},set:function(b$){b_=b$;}}),b_]);return b9[0]?l.get(b8,0)+":"+b9[1]:b7;},V.SplitChars(b6.getAttribute("ws-on"),[" "],1))));});w.foreachNotPreserved(b3,"[ws-attr-holes]",function(b6){var b7,b8,b9;b7=V.SplitChars(b6.getAttribute("ws-attr-holes"),[" "],1);for(b8=0,b9=b7.length-1;b8<=b9;b8++)(function(){var b_;function b$(ca,cb){var cc;cc=e.KeyValue(cb);return ca.replace(new a.RegExp("\\${"+cc[0]+"}","ig"),"${"+cc[1]+"}");}b_=l.get(b7,b8);return b6.setAttribute(b_,(((b0.Curried3(G.fold))(b$))(b6.getAttribute(b_)))(b4));}());});};bb.fill=function(b3,b4,b5){while(true)if(b3.hasChildNodes())b5=b4.insertBefore(b3.lastChild,b5);else return null;};bb.convertAttrs=function(b3){var b5,b6,b7,b8,b9,b_,b$,ca;function b4(cb){var cc;cc=b3.getAttribute(cb);cc===null?void 0:b3.setAttribute(cb,cc.toLowerCase());}b5=b3.attributes;b6=[];b7=[];b8=[];for(b9=0,b_=b5.length-1;b9<=b_;b9++){b$=b5.item(b9);V.StartsWith(b$.nodeName,"ws-on")&&b$.nodeName!=="ws-onafterrender"&&b$.nodeName!=="ws-on"?(b6.push(b$.nodeName),b7.push(bc.string(b$.nodeName,{$:1,$0:"ws-on".length},null)+":"+b$.nodeValue.toLowerCase())):!V.StartsWith(b$.nodeName,"ws-")&&(new a.RegExp(w.TextHoleRE())).test(b$.nodeValue)?(b$.nodeValue=(ca=new a.RegExp(w.TextHoleRE(),"g"),b$.nodeValue.replace(ca,function(cb,cc){return"${"+cc.toLowerCase()+"}";})),b8.push(b$.nodeName)):void 0;}!(b7.length==0)?b3.setAttribute("ws-on",V.concat(" ",b7)):void 0;!(b8.length==0)?b3.setAttribute("ws-attr-holes",V.concat(" ",b8)):void 0;b4("ws-hole");b4("ws-replace");b4("ws-attr");b4("ws-onafterrender");b4("ws-var");l.iter(function(cb){b3.removeAttribute(cb);},b6);};bc.string=function(b3,b4,b5){return b4==null?b5!=null&&b5.$==1?b3.slice(0,b5.$0+1):"":b5==null?b3.slice(b4.$0):b3.slice(b4.$0,b5.$0+1);};bd.ParseHTMLIntoFakeRoot=function(b3){var b4,b5,b6,b7,b8;b4=self.document.createElement("div");return!bd.rhtml().test(b3)?(b4.appendChild(self.document.createTextNode(b3)),b4):(b5=(b6=bd.rtagName().exec(b3),n.Equals(b6,null)?"":l.get(b6,1).toLowerCase()),(b7=(b8=(bd.wrapMap())[b5],b8?b8:bd.defaultWrap()),(b4.innerHTML=b7[1]+b3.replace(bd.rxhtmlTag(),"<$1></$2>")+b7[2],function(b9,b_){var b$;while(true)if(b_===0)return b9;else{b$=b_;b9=b9.lastChild;b_=b$-1;}}(b4,b7[0]))));};bd.ChildrenArray=function(b3){var b4,b5,b6;b4=[];for(b5=0,b6=b3.childNodes.length-1;b5<=b6;b5++)b4.push(b3.childNodes[b5]);return b4;};bd.rhtml=function(){bC.$cctor();return bC.rhtml;};bd.wrapMap=function(){bC.$cctor();return bC.wrapMap;};bd.defaultWrap=function(){bC.$cctor();return bC.defaultWrap;};bd.rxhtmlTag=function(){bC.$cctor();return bC.rxhtmlTag;};bd.rtagName=function(){bC.$cctor();return bC.rtagName;};bd.IterSelector=function(b3,b4,b5){var b6,b7,b8;b6=b3.querySelectorAll(b4);for(b7=0,b8=b6.length-1;b7<=b8;b7++)b5(b6[b7]);};bd.InsertAt=function(b3,b4,b5){var b6;if(!(b5.parentNode===b3&&b4===(b6=b5.nextSibling,n.Equals(b6,null)?null:b6)))b3.insertBefore(b5,b4);};bd.RemoveNode=function(b3,b4){if(b4.parentNode===b3)b3.removeChild(b4);};be=s.KeyCollection=b0.Class({GetEnumerator$1:function(){return _1.Get(G.map(function(b3){return b3.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,be);be.New=b0.Ctor(function(b3){f.New.call(this);this.d=b3;},be);bf.get_UseAnimations=function(){return bu.UseAnimations();};bf.Play=function(b3){var b4;b4=null;return bt.Delay(function(){return bt.Bind(bf.Run(a.ignore,bu.Actions(b3)),function(){bu.Finalize(b3);return bt.Return(null);});});};bf.Append=function(b3,b4){return{$:0,$0:bE.Append(b3.$0,b4.$0)};};bf.Run=function(b3,b4){var b5;function b6(b7){function b8(b9,b_){var b$;b$=b_-b9;b4.Compute(b$);b3();return b$<=b5?void a.requestAnimationFrame(function(ca){b8(b9,ca);}):b7();}a.requestAnimationFrame(function(b9){b8(b9,b9);});}b5=b4.Duration;return b5===0?bt.Zero():bt.FromContinuations(function(b7,b8,b9){return b6.apply(null,[b7,b8,b9]);});};bf.Concat=function(b3){return{$:0,$0:bE.Concat(G.map(bu.List,b3))};};bf.get_Empty=function(){return{$:0,$0:bE.Empty()};};bg.BatchUpdatesEnabled=function(){bv.$cctor();return bv.BatchUpdatesEnabled;};bh.StartProcessor=function(b3){var b4;function b5(){var b6;b6=null;return bt.Delay(function(){return bt.Bind(b3,function(){var b7;b7=b4[0];return b7===1?(b4[0]=0,bt.Zero()):b7===2?(b4[0]=1,b5()):bt.Zero();});});}b4=[0];return function(){var b6;b6=b4[0];b6===0?(b4[0]=1,bt.Start(b5(),null)):b6===1?b4[0]=2:void 0;};};bj.New=function(b3,b4,b5,b6){var b7;b7={DynElem:b3,DynFlags:b4,DynNodes:b5};b0.SetOptional(b7,"OnAfterRender",b6);return b7;};bk.Static=function(b3){return new O({$:3,$0:b3});};bk.Insert=function(b3,b4){var b5,b6,b7;function b8(b9){if(!(b9===null))if(b9!=null&&b9.$==1)b5.push(b9.$0);else if(b9!=null&&b9.$==2){b8(b9.$0);b8(b9.$1);}else if(b9!=null&&b9.$==3)b9.$0(b3);else if(b9!=null&&b9.$==4)b6.push(b9.$0);}b5=[];b6=[];b8(b4);b7=b5.slice(0);return bj.New(b3,bk.Flags(b4),b7,b6.length===0?null:{$:1,$0:function(b9){G.iter(function(b_){b_(b9);},b6);}});};bk.Updates=function(b3){return _8.MapTreeReduce(function(b4){return b4.NChanged();},L.Const(),L.Map2Unit,b3.DynNodes);};bk.Empty=function(b3){return bj.New(b3,0,[],null);};bk.Flags=function(b3){return b3!==null&&b3.hasOwnProperty("flags")?b3.flags:0;};bk.Dynamic=function(b3,b4){return new O({$:1,$0:new bG.New(b3,b4)});};bk.EmptyAttr=function(){bF.$cctor();return bF.EmptyAttr;};bk.HasExitAnim=function(b3){var b4;b4=2;return(b3.DynFlags&b4)===b4;};bk.GetExitAnim=function(b3){return bk.GetAnim(b3,function(b4,b5){return b4.NGetExitAnim(b5);});};bk.HasEnterAnim=function(b3){var b4;b4=1;return(b3.DynFlags&b4)===b4;};bk.GetEnterAnim=function(b3){return bk.GetAnim(b3,function(b4,b5){return b4.NGetEnterAnim(b5);});};bk.HasChangeAnim=function(b3){var b4;b4=4;return(b3.DynFlags&b4)===b4;};bk.GetChangeAnim=function(b3){return bk.GetAnim(b3,function(b4,b5){return b4.NGetChangeAnim(b5);});};bk.AppendTree=function(b3,b4){var b5;return b3===null?b4:b4===null?b3:(b5=new O({$:2,$0:b3,$1:b4}),(bk.SetFlags(b5,bk.Flags(b3)|bk.Flags(b4)),b5));};bk.GetAnim=function(b3,b4){return bf.Concat(l.map(function(b5){return b4(b5,b3.DynElem);},b3.DynNodes));};bk.Sync=function(b3,b4){l.iter(function(b5){b5.NSync(b3);},b4.DynNodes);};bk.SetFlags=function(b3,b4){b3.flags=b4;};bm=bl.T=b0.Class({GetEnumerator:function(){return new _2.New(this,null,function(b3){var b4;b4=b3.s;return b4.$==0?false:(b3.c=b4.$0,b3.s=b4.$1,true);},void 0);},GetEnumerator0:function(){return _1.Get(this);}},null,bm);bm.Empty=new bm({$:0});M.Parse=function(b3,b4,b5,b6){var b7;b7=+b3;if(b7!==b7-b7%1)throw new by.New$1("Input string was not in a correct format.");else if(b7<b4||b7>b5)throw new bz.New$1(b6);else return b7;};M.TryParse=function(b3,b4,b5,b6){var b7,b8;b7=+b3;b8=b7===b7-b7%1&&b7>=b4&&b7<=b5;b8?b6.set(b7):void 0;return b8;};Z.Obsolete=function(b3){var b4,b5,b6,b7,b8;b5=b3.s;if(b5==null||(b5!=null&&b5.$==2?(b4=b5.$1,false):b5!=null&&b5.$==3?(b4=b5.$1,false):true))void 0;else{b3.s=null;for(b6=0,b7=l.length(b4)-1;b6<=b7;b6++){b8=l.get(b4,b6);typeof b8=="object"?function(b9){Z.Obsolete(b9);}(b8):b8();}}};Z.New=function(b3){return{s:b3};};bn.Handler=function(b3,b4){return bk.Static(function(b5){b5.addEventListener(b3,function(b6){return(b4(b5))(b6);},false);});};bn.OnAfterRender=function(b3){return new O({$:4,$0:b3});};bn.Value=function(b3){var b4;b4=(((bB.StringApply())(b3))(bk.Static))(function(b5){return bn.DynamicCustom(b5,b3.get_View());});return O.Append(b4[0],b4[1]);};bn.Checked=function(b3){var b4;b4=(((bB.BoolCheckedApply())(b3))(bk.Static))(function(b5){return bn.DynamicCustom(b5,b3.get_View());});return O.Append(b4[0],b4[1]);};bn.IntValue=function(b3){var b4;b4=(((bB.IntApplyChecked())(b3))(bk.Static))(function(b5){return bn.DynamicCustom(b5,b3.get_View());});return O.Append(b4[0],b4[1]);};bn.IntValueUnchecked=function(b3){var b4;b4=(((bB.IntApplyUnchecked())(b3))(bk.Static))(function(b5){return bn.DynamicCustom(b5,b3.get_View());});return O.Append(b4[0],b4[1]);};bn.FloatValue=function(b3){var b4;b4=(((bB.FloatApplyChecked())(b3))(bk.Static))(function(b5){return bn.DynamicCustom(b5,b3.get_View());});return O.Append(b4[0],b4[1]);};bn.FloatValueUnchecked=function(b3){var b4;b4=(((bB.FloatApplyUnchecked())(b3))(bk.Static))(function(b5){return bn.DynamicCustom(b5,b3.get_View());});return O.Append(b4[0],b4[1]);};bn.Dynamic=function(b3,b4){return bk.Dynamic(b4,function(b5){return function(b6){return b5.setAttribute(b3,b6);};});};bn.DynamicCustom=function(b3,b4){return bk.Dynamic(b4,b3);};bo=g.Updates=b0.Class({},null,bo);bo.Create=function(b3){var b4;b4=null;b4=bo.New(b3,null,function(){var b5;b5=b4.s;return b5===null?(b5=Z.Copy(b4.c()),b4.s=b5,Z.WhenObsoleteRun(b5,function(){b4.s=null;}),b5):b5;});return b4;};bo.New=function(b3,b4,b5){return new bo({c:b3,s:b4,v:b5});};bp=s.ValueCollection=b0.Class({GetEnumerator$1:function(){return _1.Get(G.map(function(b3){return b3.V;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,bp);bp.New=b0.Ctor(function(b3){f.New.call(this);this.d=b3;},bp);br.New=function(b3,b4){return{PreviousNodes:b3,Top:b4};};bs.get_Empty=function(){return{$:0,$0:new F.New$3()};};bs.FindAll=function(b3){var b4;function b5(b7){if(b7!=null&&b7.$==0){b5(b7.$0);b5(b7.$1);}else if(b7!=null&&b7.$==1)b6(b7.$0);else if(b7!=null&&b7.$==2)b5(b7.$0.Current);else if(b7!=null&&b7.$==6)l.iter(b6,b7.$0.Holes);}function b6(b7){b4.push(b7);b5(b7.Children);}b4=[];b5(b3);return{$:0,$0:new F.New$2(b4)};};bs.Filter=function(b3,b4){return{$:0,$0:bM.Filter(b3,b4.$0)};};bs.Except=function(b3,b4){return{$:0,$0:bM.Except(b3.$0,b4.$0)};};bs.ToArray=function(b3){return bM.ToArray(b3.$0);};bs.Intersect=function(b3,b4){return{$:0,$0:bM.Intersect(b3.$0,b4.$0)};};bt.Delay=function(b3){return function(b4){try{(b3(null))(b4);}catch(b5){b4.k({$:1,$0:b5});}};};bt.Bind=function(b3,b4){return bt.checkCancel(function(b5){b3(bJ.New(function(b6){var b7;if(b6.$==0){b7=b6.$0;bt.scheduler().Fork(function(){try{(b4(b7))(b5);}catch(b8){b5.k({$:1,$0:b8});}});}else bt.scheduler().Fork(function(){b5.k(b6);});},b5.ct));});};bt.Zero=function(){bK.$cctor();return bK.Zero;};bt.Start=function(b3,b4){var b5,b6;b5=(b6=(bt.defCTS())[0],b4==null?b6:b4.$0);bt.scheduler().Fork(function(){if(!b5.c)b3(bJ.New(function(b7){if(b7.$==1)bt.UncaughtAsyncError(b7.$0);},b5));});};bt.Return=function(b3){return function(b4){b4.k({$:0,$0:b3});};};bt.scheduler=function(){bK.$cctor();return bK.scheduler;};bt.checkCancel=function(b3){return function(b4){if(b4.ct.c)bt.cancel(b4);else b3(b4);};};bt.defCTS=function(){bK.$cctor();return bK.defCTS;};bt.UncaughtAsyncError=function(b3){bY.log("WebSharper: Uncaught asynchronous exception",b3);};bt.FromContinuations=function(b3){return function(b4){var b5;function b6(b7){if(b5[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{b5[0]=true;bt.scheduler().Fork(b7);}}b5=[false];b3(function(b7){b6(function(){b4.k({$:0,$0:b7});});},function(b7){b6(function(){b4.k({$:1,$0:b7});});},function(b7){b6(function(){b4.k({$:2,$0:b7});});});};};bt.cancel=function(b3){b3.k({$:2,$0:new bR.New(b3.ct)});};bu.UseAnimations=function(){bD.$cctor();return bD.UseAnimations;};bu.Actions=function(b3){return bu.ConcatActions(l.choose(function(b4){return b4.$==1?{$:1,$0:b4.$0}:null;},bE.ToArray(b3.$0)));};bu.Finalize=function(b3){l.iter(function(b4){if(b4.$==0)b4.$0();},bE.ToArray(b3.$0));};bu.ConcatActions=function(b3){var b4,b5,b6,b7;b4=_8.ofSeqNonCopying(b3);b5=l.length(b4);return b5===0?bu.Const():b5===1?l.get(b4,0):(b6=G.max(G.map(function(b8){return b8.Duration;},b4)),(b7=l.map(function(b8){return bu.Prolong(b6,b8);},b4),bu.Def(b6,function(b8){l.iter(function(b9){b9.Compute(b8);},b7);})));};bu.List=function(b3){return b3.$0;};bu.Const=function(b3){return bu.Def(0,function(){return b3;});};bu.Def=function(b3,b4){return{Compute:b4,Duration:b3};};bu.Prolong=function(b3,b4){var b5,b6,b7;b5=b4.Compute;b6=b4.Duration;b7=bS.Create(function(){return b4.Compute(b4.Duration);});return{Compute:function(b8){return b8>=b6?b7.f():b5(b8);},Duration:b3};};bv.$cctor=function(){bv.$cctor=a.ignore;bv.BatchUpdatesEnabled=true;};bw.concat=function(b3){var b4,b5;b4=[];for(var b6 in b3)b4.push.apply(b4,b3[b6]);return b4;};bl.head=function(b3){return b3.$==1?b3.$0:bl.listEmpty();};bl.tail=function(b3){return b3.$==1?b3.$1:bl.listEmpty();};bl.listEmpty=function(){return e.FailWith("The input list was empty.");};by=d.FormatException=b0.Class({},bx,by);by.New$1=b0.Ctor(function(b3){this.message=b3;N.setPrototypeOf(this,by.prototype);},by);bz=d.OverflowException=b0.Class({},bx,bz);bz.New$1=b0.Ctor(function(b3){this.message=b3;N.setPrototypeOf(this,bz.prototype);},bz);bA.$cctor=function(){bA.$cctor=a.ignore;bA.counter=0;};bB.StringApply=function(){bF.$cctor();return bF.StringApply;};bB.BoolCheckedApply=function(){bF.$cctor();return bF.BoolCheckedApply;};bB.IntApplyChecked=function(){bF.$cctor();return bF.IntApplyChecked;};bB.IntApplyUnchecked=function(){bF.$cctor();return bF.IntApplyUnchecked;};bB.FloatApplyChecked=function(){bF.$cctor();return bF.FloatApplyChecked;};bB.FloatApplyUnchecked=function(){bF.$cctor();return bF.FloatApplyUnchecked;};bB.ApplyValue=function(b3,b4,b5,b6,b7){return[b6(function(b8){function b9(){b5.UpdateMaybe(function(b_){var b$,ca;b$=b3(b8);return b$!=null&&b$.$==1&&(!n.Equals(b$.$0,b_)&&(ca=[b$,b$.$0],true))?ca[0]:null;});}b8.addEventListener("change",b9);b8.addEventListener("input",b9);b8.addEventListener("keypress",b9);}),b7(function(b8){return function(b9){var b_,b$;b_=b3(b8);return b_!=null&&b_.$==1&&(n.Equals(b_.$0,b9)&&(b$=b_.$0,true))?null:b4(b8,b9);};})];};bB.StringSet=function(){bF.$cctor();return bF.StringSet;};bB.StringGet=function(){bF.$cctor();return bF.StringGet;};bB.IntSetUnchecked=function(){bF.$cctor();return bF.IntSetUnchecked;};bB.IntGetUnchecked=function(){bF.$cctor();return bF.IntGetUnchecked;};bB.IntSetChecked=function(){bF.$cctor();return bF.IntSetChecked;};bB.IntGetChecked=function(){bF.$cctor();return bF.IntGetChecked;};bB.FloatSetUnchecked=function(){bF.$cctor();return bF.FloatSetUnchecked;};bB.FloatGetUnchecked=function(){bF.$cctor();return bF.FloatGetUnchecked;};bB.FloatSetChecked=function(){bF.$cctor();return bF.FloatSetChecked;};bB.FloatGetChecked=function(){bF.$cctor();return bF.FloatGetChecked;};bC.$cctor=function(){var b3;bC.$cctor=a.ignore;bC.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bC.rtagName=new a.RegExp("<([\\w:]+)");bC.rhtml=new a.RegExp("<|&#?\\w+;");bC.wrapMap=(b3=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:b3,tbody:b3,tfoot:b3,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bC.defaultWrap=[0,"",""];};bD.$cctor=function(){bD.$cctor=a.ignore;bD.CubicInOut=bI.Custom(function(b3){var b4;b4=b3*b3;return 3*b4-2*(b4*b3);});bD.UseAnimations=true;};bE.Append=function(b3,b4){return b3.$==0?b4:b4.$==0?b3:{$:2,$0:b3,$1:b4};};bE.ToArray=function(b3){var b4;function b5(b6){if(b6.$==1)b4.push(b6.$0);else if(b6.$==2){b5(b6.$0);b5(b6.$1);}else if(b6.$==3)l.iter(function(b7){b4.push(b7);},b6.$0);}b4=[];b5(b3);return b4.slice(0);};bE.Concat=function(b3){var b4;b4=_8.ofSeqNonCopying(b3);return _8.TreeReduce(bE.Empty(),bE.Append,b4);};bE.Empty=function(){bT.$cctor();return bT.Empty;};bF.$cctor=function(){var b3,b4,b5,b6,b7,b8,b9,b_,b$,ca;bF.$cctor=a.ignore;bF.EmptyAttr=null;bF.BoolCheckedApply=b0.Curried3(function(cb,cc,cd){return[cc(function(ce){ce.addEventListener("change",function(){return!n.Equals(cb.Get(),ce.checked)?cb.Set(ce.checked):null;});}),cd(function(ce){return function(cf){ce.checked=cf;};})];});bF.StringSet=function(cb){return function(cc){cb.value=cc;};};bF.StringGet=function(cb){return{$:1,$0:cb.value};};bF.StringApply=(b3=bB.StringGet(),(b4=bB.StringSet(),b0.Curried(bB.ApplyValue,3,[b3,function(cb,cc){return(b4(cb))(cc);}])));bF.IntSetUnchecked=function(cb){return function(cc){cb.value=a.String(cc);};};bF.IntGetUnchecked=function(cb){var cc,cd;cc=cb.value;return bN.isBlank(cc)?{$:1,$0:0}:(cd=+cc,cd!==cd>>0?null:{$:1,$0:cd});};bF.IntApplyUnchecked=(b5=bB.IntGetUnchecked(),(b6=bB.IntSetUnchecked(),b0.Curried(bB.ApplyValue,3,[b5,function(cb,cc){return(b6(cb))(cc);}])));bF.IntSetChecked=function(cb){return function(cc){var cd;cd=cc.get_Input();return cb.value!==cd?void(cb.value=cd):null;};};bF.IntGetChecked=function(cb){var cc,cd,ce;cc=cb.value;return{$:1,$0:bN.isBlank(cc)?(cb.checkValidity?cb.checkValidity():true)?new Q({$:2,$0:cc}):new Q({$:1,$0:cc}):(cd=(ce=0,[M.TryParseInt32(cc,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]),cd[0]?new Q({$:0,$0:cd[1],$1:cc}):new Q({$:1,$0:cc}))};};bF.IntApplyChecked=(b7=bB.IntGetChecked(),(b8=bB.IntSetChecked(),b0.Curried(bB.ApplyValue,3,[b7,function(cb,cc){return(b8(cb))(cc);}])));bF.FloatSetUnchecked=function(cb){return function(cc){cb.value=a.String(cc);};};bF.FloatGetUnchecked=function(cb){var cc,cd;cc=cb.value;return bN.isBlank(cc)?{$:1,$0:0}:(cd=+cc,a.isNaN(cd)?null:{$:1,$0:cd});};bF.FloatApplyUnchecked=(b9=bB.FloatGetUnchecked(),(b_=bB.FloatSetUnchecked(),b0.Curried(bB.ApplyValue,3,[b9,function(cb,cc){return(b_(cb))(cc);}])));bF.FloatSetChecked=function(cb){return function(cc){var cd;cd=cc.get_Input();return cb.value!==cd?void(cb.value=cd):null;};};bF.FloatGetChecked=function(cb){var cc,cd;cc=cb.value;return{$:1,$0:bN.isBlank(cc)?(cb.checkValidity?cb.checkValidity():true)?new Q({$:2,$0:cc}):new Q({$:1,$0:cc}):(cd=+cc,a.isNaN(cd)?new Q({$:1,$0:cc}):new Q({$:0,$0:cd,$1:cc}))};};bF.FloatApplyChecked=(b$=bB.FloatGetChecked(),(ca=bB.FloatSetChecked(),b0.Curried(bB.ApplyValue,3,[b$,function(cb,cc){return(ca(cb))(cc);}])));};bG=g.DynamicAttrNode=b0.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(b3){return bf.get_Empty();},NGetEnterAnim:function(b3){return bf.get_Empty();},NGetChangeAnim:function(b3){return bf.get_Empty();},NSync:function(b3){if(this.dirty){(this.push(b3))(this.value);this.dirty=false;}}},f,bG);bG.New=b0.Ctor(function(b3,b4){var b5;b5=this;f.New.call(this);this.push=b4;this.value=void 0;this.dirty=false;this.updates=L.Map(function(b6){b5.value=b6;b5.dirty=true;},b3);},bG);bH=bt.Scheduler=b0.Class({Fork:function(b3){var b4;b4=this;this.robin.push(b3);this.idle?(this.idle=false,a.setTimeout(function(){b4.tick();},0)):void 0;},tick:function(){var b3,b4,b5;b4=this;b5=b2.now();b3=true;while(b3)if(this.robin.length===0){this.idle=true;b3=false;}else{(this.robin.shift())();b2.now()-b5>40?(a.setTimeout(function(){b4.tick();},0),b3=false):void 0;}}},f,bH);bH.New=b0.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},bH);bI=g.Easing=b0.Class({},f,bI);bI.Custom=function(b3){return new bI.New(b3);};bI.New=b0.Ctor(function(b3){f.New.call(this);this.transformTime=b3;},bI);bJ.New=function(b3,b4){return{k:b3,ct:b4};};bK.$cctor=function(){bK.$cctor=a.ignore;bK.noneCT=bL.New(false,[]);bK.scheduler=new bH.New();bK.defCTS=[new bO.New()];bK.Zero=bt.Return();bK.GetCT=function(b3){b3.k({$:0,$0:b3.ct});};};bL.New=function(b3,b4){return{c:b3,r:b4};};bM.Filter=function(b3,b4){return new F.New$2(l.filter(b3,bM.ToArray(b4)));};bM.Except=function(b3,b4){var b5;b5=new F.New$2(bM.ToArray(b4));b5.ExceptWith(bM.ToArray(b3));return b5;};bM.ToArray=function(b3){var b4;b4=l.create(b3.get_Count(),void 0);b3.CopyTo(b4);return b4;};bM.Intersect=function(b3,b4){var b5;b5=new F.New$2(bM.ToArray(b3));b5.IntersectWith(bM.ToArray(b4));return b5;};bN.isBlank=function(b3){return V.forall(bQ.IsWhiteSpace,b3);};bO=d.CancellationTokenSource=b0.Class({},f,bO);bO.New=b0.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bO);bP.Children=function(b3,b4){var b5,b6,b7;if(b4!=null&&b4.$==1){b7=[];b5=b4.$0[0].nextSibling;while(b5!==b4.$0[1]){b7.push(b5);b5=b5.nextSibling;}return{$:0,$0:b7};}else return{$:0,$0:l.init(b3.childNodes.length,(b6=b3.childNodes,function(b8){return b6[b8];}))};};bP.Except=function(b3,b4){var b5;b5=b3.$0;return{$:0,$0:l.filter(function(b6){return l.forall(function(b7){return!(b6===b7);},b5);},b4.$0)};};bP.Iter=function(b3,b4){l.iter(b3,b4.$0);};bP.DocChildren=function(b3){var b4;function b5(b6){if(b6!=null&&b6.$==2)b5(b6.$0.Current);else if(b6!=null&&b6.$==1)b4.push(b6.$0.El);else if(b6==null);else if(b6!=null&&b6.$==5)b4.push(b6.$0);else if(b6!=null&&b6.$==4)b4.push(b6.$0.Text);else if(b6!=null&&b6.$==6)l.iter(function(b7){if(b7==null||b7.constructor===N)b5(b7);else b4.push(b7);},b6.$0.Els);else{b5(b6.$0);b5(b6.$1);}}b4=[];b5(b3.Children);return{$:0,$0:_8.ofSeqNonCopying(b4)};};bQ.IsWhiteSpace=function(b3){return b3.match(new a.RegExp("\\s"))!==null;};bR=d.OperationCanceledException=b0.Class({},bx,bR);bR.New=b0.Ctor(function(b3){bR.New$1.call(this,"The operation was canceled.",null,b3);},bR);bR.New$1=b0.Ctor(function(b3,b4,b5){this.message=b3;this.inner=b4;N.setPrototypeOf(this,bR.prototype);this.ct=b5;},bR);bS.Create=function(b3){return bW.New(false,b3,bS.forceLazy);};bS.forceLazy=function(){var b3;b3=this.v();this.c=true;this.v=b3;this.f=bS.cachedLazy;return b3;};bS.cachedLazy=function(){return this.v;};bT.$cctor=function(){bT.$cctor=a.ignore;bT.Empty={$:0};};bU.Clear=function(b3){b3.splice(0,l.length(b3));};bW.New=function(b3,b4,b5){return{c:b3,v:b4,f:b5};};b0.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
