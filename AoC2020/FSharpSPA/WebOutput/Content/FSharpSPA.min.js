function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(this);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX;a=self;b=a.FSharpSPA=a.FSharpSPA||{};c=b.Client=b.Client||{};d=a.WebSharper=a.WebSharper||{};e=d.Operators=d.Operators||{};f=d.Obj=d.Obj||{};g=d.UI=d.UI||{};h=g.Templating=g.Templating||{};i=h.Runtime=h.Runtime||{};j=i.Server=i.Server||{};k=j.TemplateInstance=j.TemplateInstance||{};l=d.Arrays=d.Arrays||{};m=j.ProviderBuilder=j.ProviderBuilder||{};n=d.Unchecked=d.Unchecked||{};o=a.FSharpSPA_Templates=a.FSharpSPA_Templates||{};p=a.StartupCode$FSharpSPA$Client=a.StartupCode$FSharpSPA$Client||{};q=a.System=a.System||{};r=q.Guid=q.Guid||{};s=d.Collections=d.Collections||{};t=s.List=s.List||{};u=j.Handler=j.Handler||{};v=g.Client=g.Client||{};w=v.Templates=v.Templates||{};x=g.Doc=g.Doc||{};y=d.JavaScript=d.JavaScript||{};z=y.Pervasives=y.Pervasives||{};A=s.Dictionary=s.Dictionary||{};B=g.Var$1=g.Var$1||{};C=g.HtmlModule=g.HtmlModule||{};D=C.attr=C.attr||{};E=g.Var=g.Var||{};F=s.HashSet=s.HashSet||{};G=d.Seq=d.Seq||{};H=j.TemplateInitializer=j.TemplateInitializer||{};I=a.EventTarget;J=a.Node;K=y.JS=y.JS||{};L=g.View=g.View||{};M=d.Numeric=d.Numeric||{};N=a.Object;O=g.AttrProxy=g.AttrProxy||{};P=g.CheckedInput=g.CheckedInput||{};Q=g.ConcreteVar=g.ConcreteVar||{};R=g.Snap=g.Snap||{};S=g.Array=g.Array||{};T=b.Solver=b.Solver||{};U=s.DictionaryUtil=s.DictionaryUtil||{};V=d.Enumerator=d.Enumerator||{};W=V.T=V.T||{};X=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};Y=a.WindowOrWorkerGlobalScope;Z=g.Docs=g.Docs||{};_0=g.DocElemNode=g.DocElemNode||{};_1=a.CharacterData;_2=g.Abbrev=g.Abbrev||{};_3=_2.Fresh=_2.Fresh||{};_4=g.DomUtility=g.DomUtility||{};_5=g.Attrs=g.Attrs||{};_6=d.List=d.List||{};_7=_6.T=_6.T||{};_8=T.Status=T.Status||{};_9=T.Cmd=T.Cmd||{};_=g.Elt=g.Elt||{};$=w.Prepare=w.Prepare||{};ba=d.Slice=d.Slice||{};bb=s.KeyCollection=s.KeyCollection||{};bc=g.An=g.An||{};bd=v.Settings=v.Settings||{};be=_2.Mailbox=_2.Mailbox||{};bf=v.Attrs=v.Attrs||{};bg=bf.Dyn=bf.Dyn||{};bh=g.AttrModule=g.AttrModule||{};bi=d.Strings=d.Strings||{};bj=g.Updates=g.Updates||{};bk=s.ValueCollection=s.ValueCollection||{};bl=v.Docs=v.Docs||{};bm=bl.RunState=bl.RunState||{};bn=bl.NodeSet=bl.NodeSet||{};bo=d.Concurrency=d.Concurrency||{};bp=g.Anims=g.Anims||{};bq=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};br=s.HashSetUtil=s.HashSetUtil||{};bs=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bt=g.BindVar=g.BindVar||{};bu=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bv=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bw=g.AppendList=g.AppendList||{};bx=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};by=a.Error;bz=d.FormatException=d.FormatException||{};bA=d.OverflowException=d.OverflowException||{};bB=g.DynamicAttrNode=g.DynamicAttrNode||{};bC=bo.Scheduler=bo.Scheduler||{};bD=g.Easing=g.Easing||{};bE=bo.AsyncBody=bo.AsyncBody||{};bF=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bG=bo.CT=bo.CT||{};bH=_2.HashSet=_2.HashSet||{};bI=g.String=g.String||{};bJ=d.CancellationTokenSource=d.CancellationTokenSource||{};bK=bl.DomNodes=bl.DomNodes||{};bL=d.Char=d.Char||{};bM=d.Queue=d.Queue||{};bN=d.OperationCanceledException=d.OperationCanceledException||{};bO=d.Lazy=d.Lazy||{};bP=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bQ=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};bR=bQ.LazyRecord=bQ.LazyRecord||{};bS=a.IntelliFactory;bT=bS&&bS.Runtime;bU=a.jQuery;bV=a.console;bW=a.Math;bX=a.Date;c.Main=function(){var bY,bZ,b0,b1,b2;bY=(bZ=(b0=new m.New$1(),(b0.h.push({$:0,$0:"quicktest",$1:c.AoC()}),b0)),(b1=u.CompleteHoles(bZ.k,bZ.h,[]),(b2=new k.New(b1[1],o.aoc2020(b1[0])),bZ.i=b2,b2))).get_Doc();w.LoadLocalTemplates("");x.RunById("aoc",bY);};c.AoC=function(){p.$cctor();return p.AoC;};c.Solve=function(bY){var bZ;a.jQuery("#solved").val("");bZ=a.String(l.get(T.Solve(bY),0));a.jQuery("#solved").val(bZ);};e.FailWith=function(bY){throw new by(bY);};e.KeyValue=function(bY){return[bY.K,bY.V];};f=d.Obj=bT.Class({Equals:function(bY){return this===bY;},GetHashCode:function(){return -1;}},null,f);f.New=bT.Ctor(function(){},f);k=j.TemplateInstance=bT.Class({get_Doc:function(){return this.doc;}},f,k);k.New=bT.Ctor(function(bY,bZ){f.New.call(this);this.doc=bZ;this.allVars=bY.$==0?bY.$0:e.FailWith("Should not happen");},k);l.get=function(bY,bZ){l.checkBounds(bY,bZ);return bY[bZ];};l.checkBounds=function(bY,bZ){if(bZ<0||bZ>=bY.length)e.FailWith("Index was outside the bounds of the array.");};l.length=function(bY){return bY.dims===2?bY.length*bY.length:bY.length;};l.set=function(bY,bZ,b0){l.checkBounds(bY,bZ);bY[bZ]=b0;};m=j.ProviderBuilder=bT.Class({},f,m);m.New$1=bT.Ctor(function(){var bY;f.New.call(this);this.i=null;this.k=(bY=r.NewGuid(),a.String(bY));this.h=[];bT.SetOptional(this,"s",null);},m);n.Equals=function(bY,bZ){var b0,b1,b2,b3;if(bY===bZ)return true;else{b0=typeof bY;if(b0=="object"){if(bY===null||bY===void 0||bZ===null||bZ===void 0)return false;else if("Equals"in bY)return bY.Equals(bZ);else if(bY instanceof a.Array&&bZ instanceof a.Array)return n.arrayEquals(bY,bZ);else if(bY instanceof a.Date&&bZ instanceof a.Date)return n.dateEquals(bY,bZ);else{b1=[true];for(var b4 in bY)if(function(b5){b1[0]=!bY.hasOwnProperty(b5)||bZ.hasOwnProperty(b5)&&n.Equals(bY[b5],bZ[b5]);return!b1[0];}(b4))break;if(b1[0]){for(var b5 in bZ)if(function(b6){b1[0]=!bZ.hasOwnProperty(b6)||bY.hasOwnProperty(b6);return!b1[0];}(b5))break;}return b1[0];}}else return b0=="function"&&("$Func"in bY?bY.$Func===bZ.$Func&&bY.$Target===bZ.$Target:"$Invokes"in bY&&"$Invokes"in bZ&&n.arrayEquals(bY.$Invokes,bZ.$Invokes));}};n.arrayEquals=function(bY,bZ){var b0,b1;if(l.length(bY)===l.length(bZ)){b0=true;b1=0;while(b0&&b1<l.length(bY)){!n.Equals(l.get(bY,b1),l.get(bZ,b1))?b0=false:void 0;b1=b1+1;}return b0;}else return false;};n.dateEquals=function(bY,bZ){return bY.getTime()===bZ.getTime();};n.Hash=function(bY){var bZ;bZ=typeof bY;return bZ=="function"?0:bZ=="boolean"?bY?1:0:bZ=="number"?bY:bZ=="string"?n.hashString(bY):bZ=="object"?bY==null?0:bY instanceof a.Array?n.hashArray(bY):n.hashObject(bY):0;};n.hashString=function(bY){var bZ,b0,b1;if(bY===null)return 0;else{bZ=5381;for(b0=0,b1=bY.length-1;b0<=b1;b0++)bZ=n.hashMix(bZ,bY[b0].charCodeAt());return bZ;}};n.hashArray=function(bY){var bZ,b0,b1;bZ=-34948909;for(b0=0,b1=l.length(bY)-1;b0<=b1;b0++)bZ=n.hashMix(bZ,n.Hash(l.get(bY,b0)));return bZ;};n.hashObject=function(bY){var bZ,b0;if("GetHashCode"in bY)return bY.GetHashCode();else{bZ=[0];for(var b1 in bY)if(function(b2){bZ[0]=n.hashMix(n.hashMix(bZ[0],n.hashString(b2)),n.Hash(bY[b2]));return false;}(b1))break;return bZ[0];}};n.hashMix=function(bY,bZ){return(bY<<5)+bY+bZ;};n.Compare=function(bY,bZ){var b0,b1,b2,b3,b4,b5;if(bY===bZ)return 0;else{b1=typeof bY;switch(b1=="function"?1:b1=="boolean"?2:b1=="number"?2:b1=="string"?2:b1=="object"?3:0){case 0:return typeof bZ=="undefined"?0:-1;case 1:return e.FailWith("Cannot compare function values.");case 2:return bY<bZ?-1:1;case 3:if(bY===null)b2=-1;else if(bZ===null)b2=1;else if("CompareTo"in bY)b2=bY.CompareTo(bZ);else if("CompareTo0"in bY)b2=bY.CompareTo0(bZ);else if(bY instanceof a.Array&&bZ instanceof a.Array)b2=n.compareArrays(bY,bZ);else if(bY instanceof a.Date&&bZ instanceof a.Date)b2=n.compareDates(bY,bZ);else{b3=[0];for(var b6 in bY)if(function(b7){return!bY.hasOwnProperty(b7)?false:!bZ.hasOwnProperty(b7)?(b3[0]=1,true):(b3[0]=n.Compare(bY[b7],bZ[b7]),b3[0]!==0);}(b6))break;if(b3[0]===0){for(var b7 in bZ)if(function(b8){return!bZ.hasOwnProperty(b8)?false:!bY.hasOwnProperty(b8)&&(b3[0]=-1,true);}(b7))break;}b2=b3[0];}return b2;}}};n.compareArrays=function(bY,bZ){var b0,b1;if(l.length(bY)<l.length(bZ))return -1;else if(l.length(bY)>l.length(bZ))return 1;else{b0=0;b1=0;while(b0===0&&b1<l.length(bY)){b0=n.Compare(l.get(bY,b1),l.get(bZ,b1));b1=b1+1;}return b0;}};n.compareDates=function(bY,bZ){return n.Compare(bY.getTime(),bZ.getTime());};o.aoc2020=function(bY){w.LoadLocalTemplates("index");return bY?w.NamedTemplate("index",{$:1,$0:"aoc2020"},bY):void 0;};p.$cctor=function(){var bY;p.$cctor=a.ignore;p.AoC=(bY=B.Create$1(null),x.Element("div",[],[x.Element("h2",[],[x.TextNode("year 2019")]),x.Element("p",[],[x.TextNode("day 2 part 1")]),x.Element("a",[O.Create("href","  https://adventofcode.com/2019/day/2"),O.Create("target","_blank")],[x.TextNode("visit advent of code 2019 day 2")]),x.Element("br",[],[]),x.Button("Grab input day 2 part 1 2019",[],function(){bU.ajax("Content/input_2019_02.txt",{beforeSend:function(bZ){return bZ.setRequestHeader("crossDomain","");},crossDomain:true,success:function(bZ){bU("#inputText").val(bZ);return bY.Set({$:1,$0:bZ});}}).done(function(){return bV.log("Done");});}),x.Element("br",[],[]),x.Element("textarea",[O.Create("id","inputText"),O.Create("style","height:100px")],[]),x.Element("br",[],[]),x.BindView(function(bZ){return bZ!=null&&bZ.$==1?x.Concat([x.Button("Solve it!",[],function(){var b0;b0=a.String(bU("#inputText").val());bV.log("input data",b0);c.Solve(b0);}),x.Element("br",[],[]),x.Element("label",[],[x.TextNode("Solution")]),x.Element("input",[O.Create("id","solved")],[])]):x.get_Empty();},bY.get_View())]));};r.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bY){var bZ,b0;bZ=bW.random()*16|0;b0=bY=="x"?bZ:bZ&3|8;return b0.toString(16);});};t=s.List=bT.Class({GetEnumerator:function(){return V.Get(this);},GetEnumerator0:function(){return V.Get0(this);}},null,t);u.CompleteHoles=function(bY,bZ,b0){var b2,b3,b4,b5,b6;function b1(b7,b8){var b9;return b3.Contains(b7)?null:(b9=b8===0?H.GetOrAddHoleFor(bY,b7,function(){return{$:8,$0:b7,$1:B.Create$1("")};}):b8===1?H.GetOrAddHoleFor(bY,b7,function(){return{$:13,$0:b7,$1:B.Create$1(0)};}):b8===2?H.GetOrAddHoleFor(bY,b7,function(){return{$:9,$0:b7,$1:B.Create$1(false)};}):e.FailWith("Invalid value type"),(b2.set_Item(b7,b9),{$:1,$0:b9}));}b2=new A.New$5();b3=new F.New$3();b4=V.Get(bZ);try{while(b4.MoveNext()){b5=b4.Current();b6=b5.$0;b3.Add(b6);b2.set_Item(b6,b5);}}finally{if(typeof b4=="object"&&"Dispose"in b4)b4.Dispose();}return[G.append(bZ,l.choose(function(b7){return b1(b7[0],b7[1]);},b0)),{$:0,$0:b2}];};w.LoadLocalTemplates=function(bY){!w.LocalTemplatesLoaded()?(w.set_LocalTemplatesLoaded(true),w.LoadNestedTemplates(self.document.body,"")):void 0;w.LoadedTemplates().set_Item(bY,w.LoadedTemplateFile(""));};w.NamedTemplate=function(bY,bZ,b0){var b1,b2;b1=(b2=null,[w.LoadedTemplateFile(bY).TryGetValue(bZ==null?"":bZ.$0,{get:function(){return b2;},set:function(b3){b2=b3;}}),b2]);return b1[0]?w.ChildrenTemplate(b1[1].cloneNode(true),b0):(bV.warn("Local template doesn't exist",bZ),x.get_Empty());};w.LocalTemplatesLoaded=function(){X.$cctor();return X.LocalTemplatesLoaded;};w.set_LocalTemplatesLoaded=function(bY){X.$cctor();X.LocalTemplatesLoaded=bY;};w.LoadNestedTemplates=function(bY,bZ){var b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb;function b0(cc){var cd,ce;if(!b1.ContainsKey(cc)){cd=(ce=null,[b2.TryGetValue(cc,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]);cd[0]?(cb.Add(cc),b2.Remove(cc),w.PrepareTemplateStrict(bZ,{$:1,$0:cc},cd[1],{$:1,$0:b0})):bV.warn(cb.Contains(cc)?"Encountered loop when instantiating "+cc:"Local template does not exist: "+cc);}}b1=w.LoadedTemplateFile(bZ);b2=new A.New$5();b3=bY.querySelectorAll("[ws-template]");for(b4=0,b5=b3.length-1;b4<=b5;b4++){b6=b3[b4];b7=b6.getAttribute("ws-template").toLowerCase();b6.removeAttribute("ws-template");b2.set_Item(b7,w.FakeRootSingle(b6));}b8=bY.querySelectorAll("[ws-children-template]");for(b9=0,b_=b8.length-1;b9<=b_;b9++){b$=b8[b9];ca=b$.getAttribute("ws-children-template").toLowerCase();b$.removeAttribute("ws-children-template");b2.set_Item(ca,w.FakeRoot(b$));}cb=new F.New$3();while(b2.count>0)b0(G.head(b2.get_Keys()));};w.LoadedTemplates=function(){X.$cctor();return X.LoadedTemplates;};w.LoadedTemplateFile=function(bY){var bZ,b0,b1;bZ=(b0=null,[w.LoadedTemplates().TryGetValue(bY,{get:function(){return b0;},set:function(b2){b0=b2;}}),b0]);return bZ[0]?bZ[1]:(b1=new A.New$5(),(w.LoadedTemplates().set_Item(bY,b1),b1));};w.ChildrenTemplate=function(bY,bZ){var b0,b1,b2,b3,b4;b0=w.InlineTemplate(bY,G.append(bZ,w.GlobalHoles().get_Values()));b1=b0[1];b2=b0[0];b3=b2.Els;return!n.Equals(b3,null)&&b3.length===1&&(l.get(b3,0)instanceof J&&(n.Equals(l.get(b3,0).nodeType,J.ELEMENT_NODE)&&(b4=l.get(b3,0),true)))?_.TreeNode(b2,b1):x.Mk({$:6,$0:b2},b1);};w.FakeRootSingle=function(bY){var bZ,b0,b1,b2;bY.removeAttribute("ws-template");bZ=bY.getAttribute("ws-replace");bZ===null?void 0:(bY.removeAttribute("ws-replace"),b0=bY.parentNode,n.Equals(b0,null)?void 0:(b1=self.document.createElement(bY.tagName),b1.setAttribute("ws-replace",bZ),b0.replaceChild(b1,bY)));b2=self.document.createElement("div");b2.appendChild(bY);return b2;};w.FakeRoot=function(bY){var bZ;bZ=self.document.createElement("div");while(bY.hasChildNodes())bZ.appendChild(bY.firstChild);return bZ;};w.PrepareTemplateStrict=function(bY,bZ,b0,b1){var b2;function b3(b8,b9){var b_,b$,ca,cb,cc,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy;function cd(cz){}while(true)switch(b8){case 0:if(b9!==null){b_=b9.nextSibling;if(n.Equals(b9.nodeType,J.TEXT_NODE))$.convertTextNode(b9);else if(n.Equals(b9.nodeType,J.ELEMENT_NODE))b5(b9);b9=b_;}else return null;break;case 1:ce=ba.string(b9.nodeName,{$:1,$0:3},null).toLowerCase();cf=(b$=ce.indexOf("."),b$===-1?[bY,ce]:[ba.string(ce,null,{$:1,$0:b$-1}),ba.string(ce,{$:1,$0:b$+1},null)]);cg=cf[1];ch=cf[0];if(ch!==""&&!w.LoadedTemplates().ContainsKey(ch))return $.failNotLoaded(cg);else{if(ch===""&&b1!=null)b1.$0(cg);ci=w.LoadedTemplates().get_Item(ch);if(!ci.ContainsKey(cg))return $.failNotLoaded(cg);else{cj=ci.get_Item(cg);ck=cj.cloneNode(true);cl=new F.New$3();cm=new A.New$5();cn=b9.attributes;for(co=0,cp=cn.length-1;co<=cp;co++){cq=cn.item(co).name.toLowerCase();cm.set_Item(cq,(cr=cn.item(co).nodeValue,cr===""?cq:cr.toLowerCase()));!cl.Add(cq)?bV.warn("Hole mapped twice",cq):void 0;}for(cs=0,ct=b9.childNodes.length-1;cs<=ct;cs++){cu=b9.childNodes[cs];n.Equals(cu.nodeType,J.ELEMENT_NODE)?!cl.Add(cu.nodeName.toLowerCase())?bV.warn("Hole filled twice",cg):void 0:void 0;}cv=b9.childNodes.length===1&&n.Equals(b9.firstChild.nodeType,J.TEXT_NODE);if(cv){cb=$.fillTextHole(ck,b9.firstChild.textContent,cg);((function(cz){return function(cA){if(cA!=null)cz(cA.$0);};}((cc=function(cz){return function(cA){return cz.Add(cA);};}(cl),function(cz){return cd(cc(cz));})))(cb));}$.removeHolesExcept(ck,cl);if(!cv){for(cw=0,cx=b9.childNodes.length-1;cw<=cx;cw++){cy=b9.childNodes[cw];n.Equals(cy.nodeType,J.ELEMENT_NODE)?cy.hasAttributes()?$.fillInstanceAttrs(ck,cy):b4(ck,cy):void 0;}}$.mapHoles(ck,cm);$.fill(ck,b9.parentNode,b9);b9.parentNode.removeChild(b9);return;}}break;}}function b4(b8,b9){var b_,ca,cb;function b$(cc,cd){var ce;if(ca==="title"&&b9.hasChildNodes()){ce=_4.ParseHTMLIntoFakeRoot(b9.textContent);b9.removeChild(b9.firstChild);while(ce.hasChildNodes())b9.appendChild(ce.firstChild);}else null;b5(b9);return $.fill(b9,cc,cd);}ca=b9.nodeName.toLowerCase();w.foreachNotPreserved(b8,"[ws-attr-holes]",function(cc){var cd,ce,cf,cg,ch;cd=bi.SplitChars(cc.getAttribute("ws-attr-holes"),[" "],1);for(ce=0,cf=cd.length-1;ce<=cf;ce++){cg=l.get(cd,ce);cc.setAttribute(cg,(ch=new a.RegExp("\\${"+ca+"}","ig"),cc.getAttribute(cg).replace(ch,b9.textContent)));}});cb=b8.querySelector("[ws-hole="+ca+"]");if(n.Equals(cb,null)){b_=b8.querySelector("[ws-replace="+ca+"]");return n.Equals(b_,null)?null:(b$(b_.parentNode,b_),void b_.parentNode.removeChild(b_));}else{while(cb.hasChildNodes())cb.removeChild(cb.lastChild);cb.removeAttribute("ws-hole");return b$(cb,null);}}function b5(b8){if(!b8.hasAttribute("ws-preserve"))if(bi.StartsWith(b8.nodeName.toLowerCase(),"ws-"))b7(b8);else{$.convertAttrs(b8);b6(b8.firstChild);}}function b6(b8){return b3(0,b8);}function b7(b8){return b3(1,b8);}b2=(bZ==null?"":bZ.$0).toLowerCase();w.LoadedTemplateFile(bY).set_Item(b2,b0);b0.hasChildNodes()?(function(b8){var b9,b_,b$,ca;while(true){b9=b8.querySelector("[ws-template]");if(n.Equals(b9,null)){b_=b8.querySelector("[ws-children-template]");if(n.Equals(b_,null))return null;else{b$=b_.getAttribute("ws-children-template");b_.removeAttribute("ws-children-template");w.PrepareTemplateStrict(bY,{$:1,$0:b$},b_,null);b8=b8;}}else{ca=b9.getAttribute("ws-template");(w.PrepareSingleTemplate(bY,{$:1,$0:ca},b9))(null);b8=b8;}}}(b0),b6(b0.firstChild)):void 0;};w.InlineTemplate=function(bY,bZ){var b0,b1,b2,b3,b6,b7,b8,b9,b_,b$,ca;function b4(cb,cc){var cd,ce,cf;cd=_5.Insert(cb,cc);b7.push(_5.Updates(cd));b8.push([cb,cd]);ce=bT.GetOptional(cd.OnAfterRender);return ce==null?null:(cf=ce.$0,void b9.push(function(){cf(cb);}));}function b5(cb){var cc,cd;cc=(cd=null,[b_.TryGetValue(cb,{get:function(){return cd;},set:function(ce){cd=ce;}}),cd]);return cc[0]?cc[1].$==0?{$:1,$0:cc[1].$1}:cc[1].$==1?{$:1,$0:x.TextNode(cc[1].$1)}:cc[1].$==2?{$:1,$0:x.TextView(cc[1].$1)}:cc[1].$==8?{$:1,$0:x.TextView(cc[1].$1.get_View())}:cc[1].$==9?{$:1,$0:x.TextView(L.Map(a.String,cc[1].$1.get_View()))}:cc[1].$==10?{$:1,$0:x.TextView(L.Map(function(ce){return ce.get_Input();},cc[1].$1.get_View()))}:cc[1].$==11?{$:1,$0:x.TextView(L.Map(a.String,cc[1].$1.get_View()))}:cc[1].$==12?{$:1,$0:x.TextView(L.Map(function(ce){return ce.get_Input();},cc[1].$1.get_View()))}:cc[1].$==13?{$:1,$0:x.TextView(L.Map(a.String,cc[1].$1.get_View()))}:(bV.warn("Content hole filled with attribute data",cb),null):null;}b6=[];b7=[];b8=[];b9=[];b_=new A.New$5();b$=V.Get(bZ);try{while(b$.MoveNext()){ca=b$.Current();b_.set_Item(ca.$0,ca);}}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}b0=_4.ChildrenArray(bY);w.foreachNotPreserved(bY,"[ws-hole]",function(cb){var cc,cd,ce;ce=cb.getAttribute("ws-hole");cb.removeAttribute("ws-hole");while(cb.hasChildNodes())cb.removeChild(cb.lastChild);cc=b5(ce);cc!=null&&cc.$==1?(cd=cc.$0,Z.LinkElement(cb,cd.docNode),b6.push(_0.New(_5.Empty(cb),cd.docNode,null,cb,_3.Int(),null)),b7.push(cd.updates)):void 0;});w.foreachNotPreserved(bY,"[ws-replace]",function(cb){var cc,cd,ce,cf,cg,ch;cc=b5(cb.getAttribute("ws-replace"));cc!=null&&cc.$==1?(cd=cc.$0,ce=cb.parentNode,cf=self.document.createTextNode(""),ce.replaceChild(cf,cb),cg=Z.InsertBeforeDelim(cf,cd.docNode),ch=l.tryFindIndex(function(ci){return cb===ci;},b0),ch==null?void 0:l.set(b0,ch.$0,cd.docNode),b6.push(_0.New(_5.Empty(ce),cd.docNode,{$:1,$0:[cg,cf]},ce,_3.Int(),null)),b7.push(cd.updates)):void 0;});w.foreachNotPreserved(bY,"[ws-attr]",function(cb){var cc,cd,ce;cc=cb.getAttribute("ws-attr");cb.removeAttribute("ws-attr");cd=(ce=null,[b_.TryGetValue(cc,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]);cd[0]?cd[1].$==3?b4(cb,cd[1].$1):bV.warn("Attribute hole filled with non-attribute data",cc):void 0;});w.foreachNotPreserved(bY,"[ws-on]",function(cb){b4(cb,O.Concat(l.choose(function(cc){var cd,ce,cf;cd=bi.SplitChars(cc,[":"],1);ce=(cf=null,[b_.TryGetValue(l.get(cd,1),{get:function(){return cf;},set:function(cg){cf=cg;}}),cf]);return ce[0]?ce[1].$==4?{$:1,$0:bh.Handler(l.get(cd,0),ce[1].$1)}:ce[1].$==5?{$:1,$0:O.Handler(l.get(cd,0),ce[1].$1)}:(bV.warn("Event hole on"+l.get(cd,0)+" filled with non-event data",l.get(cd,1)),null):null;},bi.SplitChars(cb.getAttribute("ws-on"),[" "],1))));cb.removeAttribute("ws-on");});w.foreachNotPreserved(bY,"[ws-onafterrender]",function(cb){var cc,cd,ce;cc=cb.getAttribute("ws-onafterrender");cd=(ce=null,[b_.TryGetValue(cc,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]);cd[0]?cd[1].$==6?(cb.removeAttribute("ws-onafterrender"),b4(cb,bh.OnAfterRender(cd[1].$1))):cd[1].$==7?(cb.removeAttribute("ws-onafterrender"),b4(cb,bh.OnAfterRender(cd[1].$1))):bV.warn("onafterrender hole filled with non-onafterrender data",cc):void 0;});w.foreachNotPreserved(bY,"[ws-var]",function(cb){var cc,cd,ce;cc=cb.getAttribute("ws-var");cb.removeAttribute("ws-var");cd=(ce=null,[b_.TryGetValue(cc,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]);cd[0]?cd[1].$==8?b4(cb,bh.Value(cd[1].$1)):cd[1].$==9?b4(cb,bh.Checked(cd[1].$1)):cd[1].$==10?b4(cb,bh.IntValue(cd[1].$1)):cd[1].$==11?b4(cb,bh.IntValueUnchecked(cd[1].$1)):cd[1].$==12?b4(cb,bh.FloatValue(cd[1].$1)):cd[1].$==13?b4(cb,bh.FloatValueUnchecked(cd[1].$1)):bV.warn("Var hole filled with non-Var data",cc):void 0;});w.foreachNotPreserved(bY,"[ws-attr-holes]",function(cb){var cc,cd,ce,cf;cc=new a.RegExp(w.TextHoleRE(),"g");cd=bi.SplitChars(cb.getAttribute("ws-attr-holes"),[" "],1);cb.removeAttribute("ws-attr-holes");for(ce=0,cf=cd.length-1;ce<=cf;ce++)(function(){var cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs;cp=l.get(cd,ce);cq=cb.getAttribute(cp);cg=null;ch=0;cr=[];while(cg=cc.exec(cq),cg!==null){cs=ba.string(cq,{$:1,$0:ch},{$:1,$0:cc.lastIndex-l.get(cg,0).length-1});ch=cc.lastIndex;cr.push([cs,l.get(cg,1)]);}cj=ba.string(cq,{$:1,$0:ch},null);cc.lastIndex=0;ck=l.foldBack(function(ct,cu){return(function(cv){var cw,cx;cw=cv[0];cx=cv[1];return function(cy){var cz,cA,cB,cC,cD;cz=cy[0];cA=cy[1];cB=(cC=(cD=null,[b_.TryGetValue(cx,{get:function(){return cD;},set:function(cE){cD=cE;}}),cD]),cC[0]?cC[1].$==1?{$:0,$0:cC[1].$1}:cC[1].$==2?{$:1,$0:cC[1].$1}:cC[1].$==8?{$:1,$0:cC[1].$1.get_View()}:cC[1].$==9?{$:1,$0:L.Map(a.String,cC[1].$1.get_View())}:cC[1].$==10?{$:1,$0:L.Map(function(cE){return cE.get_Input();},cC[1].$1.get_View())}:cC[1].$==11?{$:1,$0:L.Map(a.String,cC[1].$1.get_View())}:cC[1].$==12?{$:1,$0:L.Map(function(cE){return cE.get_Input();},cC[1].$1.get_View())}:cC[1].$==13?{$:1,$0:L.Map(a.String,cC[1].$1.get_View())}:(bV.warn("Attribute value hole filled with non-text data",cx),{$:0,$0:""}):{$:0,$0:""});return cB.$==1?[cw,new _7({$:1,$0:cz===""?cB.$0:L.Map(function(cE){return cE+cz;},cB.$0),$1:cA})]:[cw+cB.$0+cz,cA];};}(ct))(cu);},cr,[cj,_7.Empty]);return b4(cb,ck[1].$==1?ck[1].$1.$==1?ck[1].$1.$1.$==1?ck[1].$1.$1.$1.$==0?(cl=ck[0],bh.Dynamic(cp,L.Map3(function(ct,cu,cv){return cl+ct+cu+cv;},ck[1].$0,ck[1].$1.$0,ck[1].$1.$1.$0))):(cm=ck[0],bh.Dynamic(cp,L.Map(function(ct){return cm+bi.concat("",ct);},L.Sequence(ck[1])))):(cn=ck[0],bh.Dynamic(cp,L.Map2(function(ct,cu){return cn+ct+cu;},ck[1].$0,ck[1].$1.$0))):ck[0]===""?bh.Dynamic(cp,ck[1].$0):(co=ck[0],bh.Dynamic(cp,L.Map(function(ct){return co+ct;},ck[1].$0))):O.Create(cp,ck[0]));}());});return[bT.DeleteEmptyFields({Els:b0,Dirty:true,Holes:b6,Attrs:b8,Render:(b1=b9.length==0?null:{$:1,$0:function(cb){l.iter(function(cc){cc(cb);},b9);}},b1?b1.$0:void 0),El:(b2=!n.Equals(b0,null)&&b0.length===1&&(l.get(b0,0)instanceof J&&(l.get(b0,0)instanceof a.Element&&(b3=l.get(b0,0),true)))?{$:1,$0:b3}:null,b2?b2.$0:void 0)},["Render","El"]),S.TreeReduce(L.Const(),L.Map2Unit,b7)];};w.GlobalHoles=function(){X.$cctor();return X.GlobalHoles;};w.foreachNotPreserved=function(bY,bZ,b0){_4.IterSelector(bY,bZ,function(b1){if(b1.closest("[ws-preserve]")==null)b0(b1);});};w.PrepareSingleTemplate=function(bY,bZ,b0){var b1;b1=w.FakeRootSingle(b0);return function(b2){w.PrepareTemplateStrict(bY,bZ,b1,b2);};};w.TextHoleRE=function(){X.$cctor();return X.TextHoleRE;};x=g.Doc=bT.Class({},f,x);x.RunById=function(bY,bZ){var b0;b0=self.document.getElementById(bY);n.Equals(b0,null)?e.FailWith("invalid id: "+bY):x.Run(b0,bZ);};x.Concat=function(bY){var bZ;bZ=S.ofSeqNonCopying(bY);return S.TreeReduce(x.get_Empty(),x.Append,bZ);};x.get_Empty=function(){return x.Mk(null,L.Const());};x.Run=function(bY,bZ){Z.LinkElement(bY,bZ.docNode);x.RunInPlace(false,bY,bZ);};x.TextNode=function(bY){return x.Mk({$:5,$0:self.document.createTextNode(bY)},L.Const());};x.Button=function(bY,bZ,b0){var b1;b1=O.Concat(bZ);return _.New(x.Clickable("button",b0),b1,x.TextNode(bY));};x.BindView=function(bY,bZ){return x.EmbedView(L.Map(bY,bZ));};x.Append=function(bY,bZ){return x.Mk({$:0,$0:bY.docNode,$1:bZ.docNode},L.Map2Unit(bY.updates,bZ.updates));};x.Mk=function(bY,bZ){return new x.New(bY,bZ);};x.RunInPlace=function(bY,bZ,b0){var b1;b1=Z.CreateRunState(bZ,b0.docNode);L.Sink(bc.get_UseAnimations()||bd.BatchUpdatesEnabled()?be.StartProcessor(Z.PerformAnimatedUpdate(bY,b1,b0.docNode)):function(){Z.PerformSyncUpdate(bY,b1,b0.docNode);},b0.updates);};x.Element=function(bY,bZ,b0){var b1,b2;b1=O.Concat(bZ);b2=x.Concat(b0);return _.New(self.document.createElement(bY),b1,b2);};x.Clickable=function(bY,bZ){var b0;b0=self.document.createElement(bY);b0.addEventListener("click",function(b1){b1.preventDefault();return bZ();},false);return b0;};x.EmbedView=function(bY){var bZ;bZ=Z.CreateEmbedNode();return x.Mk({$:2,$0:bZ},L.Map(a.ignore,L.Bind(function(b0){Z.UpdateEmbedNode(bZ,b0.docNode);return b0.updates;},bY)));};x.TextView=function(bY){var bZ;bZ=Z.CreateTextNode();return x.Mk({$:4,$0:bZ},L.Map(function(b0){Z.UpdateTextNode(bZ,b0);},bY));};x.New=bT.Ctor(function(bY,bZ){f.New.call(this);this.docNode=bY;this.updates=bZ;},x);z.NewFromSeq=function(bY){var bZ,b0,b1;bZ={};b0=V.Get(bY);try{while(b0.MoveNext()){b1=b0.Current();bZ[b1[0]]=b1[1];}}finally{if(typeof b0=="object"&&"Dispose"in b0)b0.Dispose();}return bZ;};A=s.Dictionary=bT.Class({set_Item:function(bY,bZ){this.set(bY,bZ);},set:function(bY,bZ){var b0,b1,b2,b3;b0=this;b1=this.hash(bY);b2=this.data[b1];b2==null?(this.count=this.count+1,this.data[b1]=new a.Array({K:bY,V:bZ})):(b3=l.tryFindIndex(function(b4){return b0.equals.apply(null,[(e.KeyValue(b4))[0],bY]);},b2),b3==null?(this.count=this.count+1,b2.push({K:bY,V:bZ})):b2[b3.$0]={K:bY,V:bZ});},TryGetValue:function(bY,bZ){var b0,b1,b2;b0=this;b1=this.data[this.hash(bY)];return b1==null?false:(b2=l.tryPick(function(b3){var b4;b4=e.KeyValue(b3);return b0.equals.apply(null,[b4[0],bY])?{$:1,$0:b4[1]}:null;},b1),b2!=null&&b2.$==1&&(bZ.set(b2.$0),true));},ContainsKey:function(bY){var bZ,b0;bZ=this;b0=this.data[this.hash(bY)];return b0==null?false:l.exists(function(b1){return bZ.equals.apply(null,[(e.KeyValue(b1))[0],bY]);},b0);},Remove:function(bY){return this.remove(bY);},get_Keys:function(){return new bb.New(this);},get_Values:function(){return new bk.New(this);},remove:function(bY){var bZ,b0,b1,b2;bZ=this;b0=this.hash(bY);b1=this.data[b0];return b1==null?false:(b2=l.filter(function(b3){return!bZ.equals.apply(null,[(e.KeyValue(b3))[0],bY]);},b1),l.length(b2)<b1.length&&(this.count=this.count-1,this.data[b0]=b2,true));},get_Item:function(bY){return this.get(bY);},get:function(bY){var bZ,b0;bZ=this;b0=this.data[this.hash(bY)];return b0==null?U.notPresent():l.pick(function(b1){var b2;b2=e.KeyValue(b1);return bZ.equals.apply(null,[b2[0],bY])?{$:1,$0:b2[1]}:null;},b0);},GetEnumerator:function(){return V.Get0(this);},GetEnumerator0:function(){return V.Get0(l.concat(K.GetFieldValues(this.data)));}},f,A);A.New$5=bT.Ctor(function(){A.New$6.call(this,[],n.Equals,n.Hash);},A);A.New$6=bT.Ctor(function(bY,bZ,b0){var b1,b2;f.New.call(this);this.equals=bZ;this.hash=b0;this.count=0;this.data=[];b1=V.Get(bY);try{while(b1.MoveNext()){b2=b1.Current();this.set(b2.K,b2.V);}}finally{if(typeof b1=="object"&&"Dispose"in b1)b1.Dispose();}},A);B=g.Var$1=bT.Class({},f,B);B.Create$1=function(bY){return new Q.New(false,R.New({$:2,$0:bY,$1:[]}),bY);};D=C.attr=bT.Class({},f,D);E=g.Var=bT.Class({},f,E);E.New=bT.Ctor(function(){f.New.call(this);},E);F=s.HashSet=bT.Class({Add:function(bY){return this.add(bY);},Contains:function(bY){var bZ;bZ=this.data[this.hash(bY)];return bZ==null?false:this.arrContains(bY,bZ);},add:function(bY){var bZ,b0;bZ=this.hash(bY);b0=this.data[bZ];return b0==null?(this.data[bZ]=[bY],this.count=this.count+1,true):this.arrContains(bY,b0)?false:(b0.push(bY),this.count=this.count+1,true);},arrContains:function(bY,bZ){var b0,b1,b2,b3;b0=true;b1=0;b3=bZ.length;while(b0&&b1<b3)if(this.equals.apply(null,[bZ[b1],bY]))b0=false;else b1=b1+1;return!b0;},ExceptWith:function(bY){var bZ;bZ=V.Get(bY);try{while(bZ.MoveNext())this.Remove(bZ.Current());}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bY){var bZ,b0,b1,b2;bZ=0;b0=br.concat(this.data);for(b1=0,b2=b0.length-1;b1<=b2;b1++)l.set(bY,b1,b0[b1]);},IntersectWith:function(bY){var bZ,b0,b1,b2,b3;bZ=new F.New$4(bY,this.equals,this.hash);b0=br.concat(this.data);for(b1=0,b2=b0.length-1;b1<=b2;b1++){b3=b0[b1];!bZ.Contains(b3)?this.Remove(b3):void 0;}},Remove:function(bY){var bZ;bZ=this.data[this.hash(bY)];return bZ==null?false:this.arrRemove(bY,bZ)&&(this.count=this.count-1,true);},arrRemove:function(bY,bZ){var b0,b1,b2,b3;b0=true;b1=0;b3=bZ.length;while(b0&&b1<b3)if(this.equals.apply(null,[bZ[b1],bY])){bZ.splice.apply(bZ,[b1,1]);b0=false;}else b1=b1+1;return!b0;},GetEnumerator:function(){return V.Get(br.concat(this.data));},GetEnumerator0:function(){return V.Get(br.concat(this.data));}},f,F);F.New$3=bT.Ctor(function(){F.New$4.call(this,[],n.Equals,n.Hash);},F);F.New$4=bT.Ctor(function(bY,bZ,b0){var b1;f.New.call(this);this.equals=bZ;this.hash=b0;this.data=[];this.count=0;b1=V.Get(bY);try{while(b1.MoveNext())this.add(b1.Current());}finally{if(typeof b1=="object"&&"Dispose"in b1)b1.Dispose();}},F);F.New$2=bT.Ctor(function(bY){F.New$4.call(this,bY,n.Equals,n.Hash);},F);G.append=function(bY,bZ){return{GetEnumerator:function(){var b0,b1;b0=V.Get(bY);b1=[true];return new W.New(b0,null,function(b2){var b3;return b2.s.MoveNext()?(b2.c=b2.s.Current(),true):(b3=b2.s,!n.Equals(b3,null)?b3.Dispose():void 0,b2.s=null,b1[0]&&(b1[0]=false,b2.s=V.Get(bZ),b2.s.MoveNext()?(b2.c=b2.s.Current(),true):(b2.s.Dispose(),b2.s=null,false)));},function(b2){var b3;b3=b2.s;!n.Equals(b3,null)?b3.Dispose():void 0;});}};};G.head=function(bY){var bZ;bZ=V.Get(bY);try{return bZ.MoveNext()?bZ.Current():G.insufficient();}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}};G.unfold=function(bY,bZ){return{GetEnumerator:function(){return new W.New(bZ,null,function(b0){var b1;b1=bY(b0.s);return b1==null?false:(b0.c=b1.$0[0],b0.s=b1.$0[1],true);},void 0);}};};G.fold=function(bY,bZ,b0){var b1,b2;b1=bZ;b2=V.Get(b0);try{while(b2.MoveNext())b1=bY(b1,b2.Current());return b1;}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}};G.iter=function(bY,bZ){var b0;b0=V.Get(bZ);try{while(b0.MoveNext())bY(b0.Current());}finally{if(typeof b0=="object"&&"Dispose"in b0)b0.Dispose();}};G.map=function(bY,bZ){return{GetEnumerator:function(){var b0;b0=V.Get(bZ);return new W.New(null,null,function(b1){return b0.MoveNext()&&(b1.c=bY(b0.Current()),true);},function(){b0.Dispose();});}};};G.max=function(bY){var bZ,b0,b1;bZ=V.Get(bY);try{if(!bZ.MoveNext())G.seqEmpty();b0=bZ.Current();while(bZ.MoveNext()){b1=bZ.Current();n.Compare(b1,b0)===1?b0=b1:void 0;}return b0;}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}};G.seqEmpty=function(){return e.FailWith("The input sequence was empty.");};G.forall=function(bY,bZ){return!G.exists(function(b0){return!bY(b0);},bZ);};G.exists=function(bY,bZ){var b0,b1;b0=V.Get(bZ);try{b1=false;while(!b1&&b0.MoveNext())b1=bY(b0.Current());return b1;}finally{if(typeof b0=="object"&&"Dispose"in b0)b0.Dispose();}};l.choose=function(bY,bZ){var b0,b1,b2,b3;b0=[];for(b1=0,b2=bZ.length-1;b1<=b2;b1++){b3=bY(bZ[b1]);b3==null?void 0:b0.push(b3.$0);}return b0;};l.ofList=function(bY){var bZ,b0;b0=[];bZ=bY;while(!(bZ.$==0)){b0.push(_6.head(bZ));bZ=_6.tail(bZ);}return b0;};l.mapi=function(bY,bZ){var b0,b1,b2;b0=new a.Array(bZ.length);for(b1=0,b2=bZ.length-1;b1<=b2;b1++)b0[b1]=bY(b1,bZ[b1]);return b0;};l.tryFindIndex=function(bY,bZ){var b0,b1;b0=null;b1=0;while(b1<bZ.length&&b0==null){bY(bZ[b1])?b0={$:1,$0:b1}:void 0;b1=b1+1;}return b0;};l.tryPick=function(bY,bZ){var b0,b1,b2;b0=null;b1=0;while(b1<bZ.length&&b0==null){b2=bY(bZ[b1]);b2!=null&&b2.$==1?b0=b2:void 0;b1=b1+1;}return b0;};l.exists=function(bY,bZ){var b0,b1,b2,b3;b0=false;b1=0;b3=l.length(bZ);while(!b0&&b1<b3)if(bY(bZ[b1]))b0=true;else b1=b1+1;return b0;};l.concat=function(bY){return a.Array.prototype.concat.apply([],l.ofSeq(bY));};l.map=function(bY,bZ){var b0,b1,b2;b0=new a.Array(bZ.length);for(b1=0,b2=bZ.length-1;b1<=b2;b1++)b0[b1]=bY(bZ[b1]);return b0;};l.foldBack=function(bY,bZ,b0){var b1,b2,b3,b4,b5;b1=b0;b3=bZ.length;for(b4=1,b5=b3;b4<=b5;b4++)b1=bY(bZ[b3-b4],b1);return b1;};l.iter=function(bY,bZ){var b0,b1;for(b0=0,b1=bZ.length-1;b0<=b1;b0++)bY(bZ[b0]);};l.filter=function(bY,bZ){var b0,b1,b2;b0=[];for(b1=0,b2=bZ.length-1;b1<=b2;b1++)if(bY(bZ[b1]))b0.push(bZ[b1]);return b0;};l.ofSeq=function(bY){var bZ,b0;if(bY instanceof a.Array)return bY.slice();else if(bY instanceof _7)return l.ofList(bY);else{bZ=[];b0=V.Get(bY);try{while(b0.MoveNext())bZ.push(b0.Current());return bZ;}finally{if(typeof b0=="object"&&"Dispose"in b0)b0.Dispose();}}};l.pick=function(bY,bZ){var b0;b0=l.tryPick(bY,bZ);return b0==null?e.FailWith("KeyNotFoundException"):b0.$0;};l.forall=function(bY,bZ){var b0,b1,b2,b3;b0=true;b1=0;b3=l.length(bZ);while(b0&&b1<b3)if(bY(bZ[b1]))b1=b1+1;else b0=false;return b0;};l.create=function(bY,bZ){var b0,b1,b2;b0=new a.Array(bY);for(b1=0,b2=bY-1;b1<=b2;b1++)b0[b1]=bZ;return b0;};l.init=function(bY,bZ){var b0,b1,b2;bY<0?e.FailWith("Negative size given."):null;b0=new a.Array(bY);for(b1=0,b2=bY-1;b1<=b2;b1++)b0[b1]=bZ(b1);return b0;};H.$cctor=function(){H.$cctor=a.ignore;H.initialized=new A.New$5();};H=j.TemplateInitializer=bT.Class({},f,H);H.GetOrAddHoleFor=function(bY,bZ,b0){var b1,b2,b3,b4;H.$cctor();b1=H.GetHolesFor(bY);b2=(b3=null,[b1.TryGetValue(bZ,{get:function(){return b3;},set:function(b5){b3=b5;}}),b3]);return b2[0]?b2[1]:(b4=b0(),(b1.set_Item(bZ,b4),b4));};H.GetHolesFor=function(bY){var bZ,b0,b1;H.$cctor();bZ=(b0=null,[H.initialized.TryGetValue(bY,{get:function(){return b0;},set:function(b2){b0=b2;}}),b0]);return bZ[0]?bZ[1]:(b1=new A.New$5(),(H.initialized.set_Item(bY,b1),b1));};K.GetFieldValues=function(bY){var bZ,b0;bZ=[];for(var b1 in bY)bZ.push(bY[b1]);return bZ;};L=g.View=bT.Class({},null,L);M.ParseInt32=function(bY){return M.Parse(bY,-2147483648,2147483647,"Value was either too large or too small for an Int32.");};M.TryParseInt32=function(bY,bZ){return M.TryParse(bY,-2147483648,2147483647,bZ);};O=g.AttrProxy=bT.Class({},null,O);O.Create=function(bY,bZ){return _5.Static(function(b0){b0.setAttribute(bY,bZ);});};O.Concat=function(bY){var bZ;bZ=S.ofSeqNonCopying(bY);return S.TreeReduce(_5.EmptyAttr(),O.Append,bZ);};O.Append=function(bY,bZ){return _5.AppendTree(bY,bZ);};O.Handler=function(bY,bZ){return O.HandlerImpl(bY,bZ);};O.HandlerImpl=function(bY,bZ){return _5.Static(function(b0){b0.addEventListener(bY,function(b1){return(bZ(b0))(b1);},false);});};P=g.CheckedInput=bT.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,P);Q=g.ConcreteVar=bT.Class({Set:function(bY){if(this.isConst)(function(bZ){return bZ("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bZ){bV.log(bZ);}));else{R.Obsolete(this.snap);this.current=bY;this.snap=R.New({$:2,$0:bY,$1:[]});}},get_View:function(){return this.view;},Get:function(){return this.current;},UpdateMaybe:function(bY){var bZ;bZ=bY(this.Get());bZ!=null&&bZ.$==1?this.Set(bZ.$0):void 0;}},E,Q);Q.New=bT.Ctor(function(bY,bZ,b0){var b1;b1=this;E.New.call(this);this.isConst=bY;this.current=b0;this.snap=bZ;this.view=function(){return b1.snap;};this.id=_3.Int();},Q);R.Map=function(bY,bZ){var b0,b1;b0=bZ.s;return b0!=null&&b0.$==0?R.New({$:0,$0:bY(b0.$0)}):(b1=R.New({$:3,$0:[],$1:[]}),(R.When(bZ,function(b2){R.MarkDone(b1,bZ,bY(b2));},b1),b1));};R.Map2Unit=function(bY,bZ){var b0,b1,b2;function b3(){var b4,b5,b6;if(!(b4=b2.s,b4!=null&&b4.$==0||b4!=null&&b4.$==2)){b5=R.ValueAndForever(bY);b6=R.ValueAndForever(bZ);b5!=null&&b5.$==1?b6!=null&&b6.$==1?b5.$0[1]&&b6.$0[1]?R.MarkForever(b2,null):R.MarkReady(b2,null):void 0:void 0;}}b0=bY.s;b1=bZ.s;return b0!=null&&b0.$==0?b1!=null&&b1.$==0?R.New({$:0,$0:null}):bZ:b1!=null&&b1.$==0?bY:(b2=R.New({$:3,$0:[],$1:[]}),(R.When(bY,b3,b2),R.When(bZ,b3,b2),b2));};R.WhenRun=function(bY,bZ,b0){var b1;b1=bY.s;b1==null?b0():b1!=null&&b1.$==2?(b1.$1.push(b0),bZ(b1.$0)):b1!=null&&b1.$==3?(b1.$0.push(bZ),b1.$1.push(b0)):bZ(b1.$0);};R.WhenObsoleteRun=function(bY,bZ){var b0;b0=bY.s;b0==null?bZ():b0!=null&&b0.$==2?b0.$1.push(bZ):b0!=null&&b0.$==3?b0.$1.push(bZ):void 0;};R.When=function(bY,bZ,b0){var b1;b1=bY.s;b1==null?R.Obsolete(b0):b1!=null&&b1.$==2?(R.EnqueueSafe(b1.$1,b0),bZ(b1.$0)):b1!=null&&b1.$==3?(b1.$0.push(bZ),R.EnqueueSafe(b1.$1,b0)):bZ(b1.$0);};R.MarkDone=function(bY,bZ,b0){var b1;if(b1=bZ.s,b1!=null&&b1.$==0)R.MarkForever(bY,b0);else R.MarkReady(bY,b0);};R.ValueAndForever=function(bY){var bZ;bZ=bY.s;return bZ!=null&&bZ.$==0?{$:1,$0:[bZ.$0,true]}:bZ!=null&&bZ.$==2?{$:1,$0:[bZ.$0,false]}:null;};R.MarkForever=function(bY,bZ){var b0,b1,b2,b3;b0=bY.s;if(b0!=null&&b0.$==3){bY.s={$:0,$0:bZ};b1=b0.$0;for(b2=0,b3=l.length(b1)-1;b2<=b3;b2++)(l.get(b1,b2))(bZ);}else void 0;};R.MarkReady=function(bY,bZ){var b0,b1,b2,b3;b0=bY.s;if(b0!=null&&b0.$==3){bY.s={$:2,$0:bZ,$1:b0.$1};b1=b0.$0;for(b2=0,b3=l.length(b1)-1;b2<=b3;b2++)(l.get(b1,b2))(bZ);}else void 0;};R.Map3=function(bY,bZ,b0,b1){var b2,b3,b4,b5;function b6(b7){var b8,b9,b_,b$;if(!(b8=b5.s,b8!=null&&b8.$==0||b8!=null&&b8.$==2)){b9=R.ValueAndForever(bZ);b_=R.ValueAndForever(b0);b$=R.ValueAndForever(b1);b9!=null&&b9.$==1?b_!=null&&b_.$==1?b$!=null&&b$.$==1?b9.$0[1]&&b_.$0[1]&&b$.$0[1]?R.MarkForever(b5,bY(b9.$0[0],b_.$0[0],b$.$0[0])):R.MarkReady(b5,bY(b9.$0[0],b_.$0[0],b$.$0[0])):void 0:void 0:void 0;}}b2=bZ.s;b3=b0.s;b4=b1.s;return b2!=null&&b2.$==0?b3!=null&&b3.$==0?b4!=null&&b4.$==0?R.New({$:0,$0:bY(b2.$0,b3.$0,b4.$0)}):R.Map3Opt1(bY,b2.$0,b3.$0,b1):b4!=null&&b4.$==0?R.Map3Opt2(bY,b2.$0,b4.$0,b0):R.Map3Opt3(bY,b2.$0,b0,b1):b3!=null&&b3.$==0?b4!=null&&b4.$==0?R.Map3Opt4(bY,b3.$0,b4.$0,bZ):R.Map3Opt5(bY,b3.$0,bZ,b1):b4!=null&&b4.$==0?R.Map3Opt6(bY,b4.$0,bZ,b0):(b5=R.New({$:3,$0:[],$1:[]}),(R.When(bZ,b6,b5),R.When(b0,b6,b5),R.When(b1,b6,b5),b5));};R.Sequence=function(bY){var bZ,b0,b1;function b2(b3){var b4;if(b1[0]===0){b4=l.map(function(b5){var b6;b6=b5.s;return b6!=null&&b6.$==0?b6.$0:b6!=null&&b6.$==2?b6.$0:e.FailWith("value not found by View.Sequence");},bZ);l.forall(function(b5){var b6;b6=b5.s;return b6!=null&&b6.$==0;},bZ)?R.MarkForever(b0,b4):R.MarkReady(b0,b4);}else b1[0]--;}bZ=l.ofSeq(bY);return bZ.length==0?R.New({$:0,$0:[]}):(b0=R.New({$:3,$0:[],$1:[]}),(b1=[l.length(bZ)-1],(l.iter(function(b3){R.When(b3,b2,b0);},bZ),b0)));};R.Map2=function(bY,bZ,b0){var b1,b2,b3;function b4(b5){var b6,b7,b8;if(!(b6=b3.s,b6!=null&&b6.$==0||b6!=null&&b6.$==2)){b7=R.ValueAndForever(bZ);b8=R.ValueAndForever(b0);b7!=null&&b7.$==1?b8!=null&&b8.$==1?b7.$0[1]&&b8.$0[1]?R.MarkForever(b3,bY(b7.$0[0],b8.$0[0])):R.MarkReady(b3,bY(b7.$0[0],b8.$0[0])):void 0:void 0;}}b1=bZ.s;b2=b0.s;return b1!=null&&b1.$==0?b2!=null&&b2.$==0?R.New({$:0,$0:bY(b1.$0,b2.$0)}):R.Map2Opt1(bY,b1.$0,b0):b2!=null&&b2.$==0?R.Map2Opt2(bY,b2.$0,bZ):(b3=R.New({$:3,$0:[],$1:[]}),(R.When(bZ,b4,b3),R.When(b0,b4,b3),b3));};R.Copy=function(bY){var bZ,b0,b1;bZ=bY.s;return bZ==null?bY:bZ!=null&&bZ.$==2?(b0=R.New({$:2,$0:bZ.$0,$1:[]}),(R.WhenObsolete(bY,b0),b0)):bZ!=null&&bZ.$==3?(b1=R.New({$:3,$0:[],$1:[]}),(R.When(bY,function(b2){R.MarkDone(b1,bY,b2);},b1),b1)):bY;};R.Join=function(bY){var bZ;bZ=R.New({$:3,$0:[],$1:[]});R.When(bY,function(b0){var b1;b1=b0();R.When(b1,function(b2){var b3,b4;if((b3=b1.s,b3!=null&&b3.$==0)&&(b4=bY.s,b4!=null&&b4.$==0))R.MarkForever(bZ,b2);else R.MarkReady(bZ,b2);},bZ);},bZ);return bZ;};R.EnqueueSafe=function(bY,bZ){var b0,b1,b2,b3;bY.push(bZ);if(bY.length%20===0){b0=bY.slice(0);bM.Clear(bY);for(b1=0,b2=l.length(b0)-1;b1<=b2;b1++){b3=l.get(b0,b1);typeof b3=="object"?function(b4){if(b4.s)bY.push(b4);}(b3):function(b4){bY.push(b4);}(b3);}}else void 0;};R.Map3Opt1=function(bY,bZ,b0,b1){return R.Map(function(b2){return bY(bZ,b0,b2);},b1);};R.Map3Opt2=function(bY,bZ,b0,b1){return R.Map(function(b2){return bY(bZ,b2,b0);},b1);};R.Map3Opt3=function(bY,bZ,b0,b1){return R.Map2(function(b2,b3){return bY(bZ,b2,b3);},b0,b1);};R.Map3Opt4=function(bY,bZ,b0,b1){return R.Map(function(b2){return bY(b2,bZ,b0);},b1);};R.Map3Opt5=function(bY,bZ,b0,b1){return R.Map2(function(b2,b3){return bY(b2,bZ,b3);},b0,b1);};R.Map3Opt6=function(bY,bZ,b0,b1){return R.Map2(function(b2,b3){return bY(b2,b3,bZ);},b0,b1);};R.Map2Opt1=function(bY,bZ,b0){return R.Map(function(b1){return bY(bZ,b1);},b0);};R.Map2Opt2=function(bY,bZ,b0){return R.Map(function(b1){return bY(b1,bZ);},b0);};R.WhenObsolete=function(bY,bZ){var b0;b0=bY.s;b0==null?R.Obsolete(bZ):b0!=null&&b0.$==2?R.EnqueueSafe(b0.$1,bZ):b0!=null&&b0.$==3?R.EnqueueSafe(b0.$1,bZ):void 0;};S.ofSeqNonCopying=function(bY){var bZ,b0;if(bY instanceof a.Array)return bY;else if(bY instanceof _7)return l.ofList(bY);else if(bY===null)return[];else{bZ=[];b0=V.Get(bY);try{while(b0.MoveNext())bZ.push(b0.Current());return bZ;}finally{if(typeof b0=="object"&&"Dispose"in b0)b0.Dispose();}}};S.TreeReduce=function(bY,bZ,b0){var b1;function b2(b3,b4){var b5,b6;return b4<=0?bY:b4===1&&(b3>=0&&b3<b1)?l.get(b0,b3):(b6=b4/2>>0,bZ(b2(b3,b6),b2(b3+b6,b4-b6)));}b1=l.length(b0);return b2(0,b1);};S.MapTreeReduce=function(bY,bZ,b0,b1){var b2;function b3(b4,b5){var b6,b7;return b5<=0?bZ:b5===1&&(b4>=0&&b4<b2)?bY(l.get(b1,b4)):(b7=b5/2>>0,b0(b3(b4,b7),b3(b4+b7,b5-b7)));}b2=l.length(b1);return b3(0,b2);};T.Solve=function(bY){var bZ,b0,b1,b2,b3;bZ=_8.New(T.readInts(bY),0,false);b0=true;b1=_9.New(l.get(bZ.memory,bZ.position),l.get(bZ.memory,bZ.position+1),l.get(bZ.memory,bZ.position+2),l.get(bZ.memory,bZ.position+3));b2=l.mapi(function(b4,b5){return b4===1?12:b4===2?2:b5;},bZ.memory);b3=false;return G.last(G.unfold(function(b4){var b5;return b4.finished?null:(b5=T.runCmd(b0?b1:_9.New(l.get(b4.memory,b4.position),l.get(b4.memory,b4.position+1),l.get(b4.memory,b4.position+2),l.get(b4.memory,b4.position+3)),b0?_8.New(b2,b4.position,b4.finished):b4),(b0?b0=false:void 0,{$:1,$0:[b5,b5]}));},bZ)).memory;};T.runCmd=function(bY,bZ){var b0,b1,b2;b0=bY.opcode;return b0===1?(b1=l.mapi(function(b3,b4){return b3===bY.dest?l.get(bZ.memory,bY.op1)+l.get(bZ.memory,bY.op2):b4;},bZ.memory),_8.New(b1,bZ.position+4,l.get(b1,bZ.position+4)===99)):b0===2?(b2=l.mapi(function(b3,b4){return b3===bY.dest?l.get(bZ.memory,bY.op1)*l.get(bZ.memory,bY.op2):b4;},bZ.memory),_8.New(b2,bZ.position+4,l.get(b2,bZ.position+4)===99)):e.FailWith("wrong position");};T.readInts=function(bY){return l.map(M.ParseInt32,bi.SplitChars(bY,[","],0));};L.Const=function(bY){var bZ;bZ=R.New({$:0,$0:bY});return function(){return bZ;};};L.Map=function(bY,bZ){return L.CreateLazy(function(){return R.Map(bY,bZ());});};L.Map2Unit=function(bY,bZ){return L.CreateLazy(function(){return R.Map2Unit(bY(),bZ());});};L.Sink=function(bY,bZ){function b0(){R.WhenRun(bZ(),bY,function(){bo.scheduler().Fork(b0);});}bo.scheduler().Fork(b0);};L.Bind=function(bY,bZ){return L.Join(L.Map(bY,bZ));};L.CreateLazy=function(bY){var bZ;bZ={c:null,o:bY};return function(){var b0,b1;b0=bZ.c;return b0===null?(b0=bZ.o(),bZ.c=b0,(b1=b0.s,b1!=null&&b1.$==0)?bZ.o=null:R.WhenObsoleteRun(b0,function(){bZ.c=null;}),b0):b0;};};L.Map3=function(bY,bZ,b0,b1){return L.CreateLazy(function(){return R.Map3(bY,bZ(),b0(),b1());});};L.Sequence=function(bY){return L.CreateLazy(function(){return R.Sequence(G.map(function(bZ){return bZ();},bY));});};L.Map2=function(bY,bZ,b0){return L.CreateLazy(function(){return R.Map2(bY,bZ(),b0());});};L.Join=function(bY){return L.CreateLazy(function(){return R.Join(bY());});};U.notPresent=function(){return e.FailWith("The given key was not present in the dictionary.");};V.Get=function(bY){return bY instanceof a.Array?V.ArrayEnumerator(bY):n.Equals(typeof bY,"string")?V.StringEnumerator(bY):bY.GetEnumerator();};V.ArrayEnumerator=function(bY){return new W.New(0,null,function(bZ){var b0;b0=bZ.s;return b0<l.length(bY)&&(bZ.c=l.get(bY,b0),bZ.s=b0+1,true);},void 0);};V.StringEnumerator=function(bY){return new W.New(0,null,function(bZ){var b0;b0=bZ.s;return b0<bY.length&&(bZ.c=bY[b0],bZ.s=b0+1,true);},void 0);};V.Get0=function(bY){return bY instanceof a.Array?V.ArrayEnumerator(bY):n.Equals(typeof bY,"string")?V.StringEnumerator(bY):"GetEnumerator0"in bY?bY.GetEnumerator0():bY.GetEnumerator();};W=V.T=bT.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},f,W);W.New=bT.Ctor(function(bY,bZ,b0,b1){f.New.call(this);this.s=bY;this.c=bZ;this.n=b0;this.d=b1;},W);X.$cctor=function(){X.$cctor=a.ignore;X.LoadedTemplates=new A.New$5();X.LocalTemplatesLoaded=false;X.GlobalHoles=new A.New$5();X.TextHoleRE="\\${([^}]+)}";X.RenderedFullDocTemplate=null;};Z.LinkElement=function(bY,bZ){Z.InsertDoc(bY,bZ,null);};Z.InsertDoc=function(bY,bZ,b0){var b1;return bZ!=null&&bZ.$==1?Z.InsertNode(bY,bZ.$0.El,b0):bZ!=null&&bZ.$==2?(b1=bZ.$0,(b1.Dirty=false,Z.InsertDoc(bY,b1.Current,b0))):bZ==null?b0:bZ!=null&&bZ.$==4?Z.InsertNode(bY,bZ.$0.Text,b0):bZ!=null&&bZ.$==5?Z.InsertNode(bY,bZ.$0,b0):bZ!=null&&bZ.$==6?l.foldBack(function(b2,b3){return b2==null||b2.constructor===N?Z.InsertDoc(bY,b2,b3):Z.InsertNode(bY,b2,b3);},bZ.$0.Els,b0):Z.InsertDoc(bY,bZ.$0,Z.InsertDoc(bY,bZ.$1,b0));};Z.CreateRunState=function(bY,bZ){return bm.New(bn.get_Empty(),Z.CreateElemNode(bY,_5.EmptyAttr(),bZ));};Z.PerformAnimatedUpdate=function(bY,bZ,b0){var b1;return bc.get_UseAnimations()?(b1=null,bo.Delay(function(){var b2,b3,b4;b2=bn.FindAll(b0);b3=Z.ComputeChangeAnim(bZ,b2);b4=Z.ComputeEnterAnim(bZ,b2);return bo.Bind(bc.Play(bc.Append(b3,Z.ComputeExitAnim(bZ,b2))),function(){return bo.Bind(Z.SyncElemNodesNextFrame(bY,bZ),function(){return bo.Bind(bc.Play(b4),function(){bZ.PreviousNodes=b2;return bo.Return(null);});});});})):Z.SyncElemNodesNextFrame(bY,bZ);};Z.PerformSyncUpdate=function(bY,bZ,b0){var b1;b1=bn.FindAll(b0);Z.SyncElemNode(bY,bZ.Top);bZ.PreviousNodes=b1;};Z.CreateEmbedNode=function(){return{Current:null,Dirty:false};};Z.UpdateEmbedNode=function(bY,bZ){bY.Current=bZ;bY.Dirty=true;};Z.InsertBeforeDelim=function(bY,bZ){var b0,b1;b0=bY.parentNode;b1=self.document.createTextNode("");b0.insertBefore(b1,bY);Z.LinkPrevElement(bY,bZ);return b1;};Z.InsertNode=function(bY,bZ,b0){_4.InsertAt(bY,b0,bZ);return bZ;};Z.CreateElemNode=function(bY,bZ,b0){var b1;Z.LinkElement(bY,b0);b1=_5.Insert(bY,bZ);return _0.New(b1,b0,null,bY,_3.Int(),bT.GetOptional(b1.OnAfterRender));};Z.SyncElemNodesNextFrame=function(bY,bZ){function b0(b1){a.requestAnimationFrame(function(){Z.SyncElemNode(bY,bZ.Top);b1();});}return bd.BatchUpdatesEnabled()?bo.FromContinuations(function(b1,b2,b3){return b0.apply(null,[b1,b2,b3]);}):(Z.SyncElemNode(bY,bZ.Top),bo.Return(null));};Z.ComputeExitAnim=function(bY,bZ){return bc.Concat(l.map(function(b0){return _5.GetExitAnim(b0.Attr);},bn.ToArray(bn.Except(bZ,bn.Filter(function(b0){return _5.HasExitAnim(b0.Attr);},bY.PreviousNodes)))));};Z.ComputeEnterAnim=function(bY,bZ){return bc.Concat(l.map(function(b0){return _5.GetEnterAnim(b0.Attr);},bn.ToArray(bn.Except(bY.PreviousNodes,bn.Filter(function(b0){return _5.HasEnterAnim(b0.Attr);},bZ)))));};Z.ComputeChangeAnim=function(bY,bZ){var b0;function b1(b2){return _5.HasChangeAnim(b2.Attr);}b0=function(b2){return bn.Filter(b1,b2);};return bc.Concat(l.map(function(b2){return _5.GetChangeAnim(b2.Attr);},bn.ToArray(bn.Intersect(b0(bY.PreviousNodes),b0(bZ)))));};Z.SyncElemNode=function(bY,bZ){!bY?Z.SyncElement(bZ):void 0;Z.Sync(bZ.Children);Z.AfterRender(bZ);};Z.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};Z.UpdateTextNode=function(bY,bZ){bY.Value=bZ;bY.Dirty=true;};Z.LinkPrevElement=function(bY,bZ){Z.InsertDoc(bY.parentNode,bZ,bY);};Z.SyncElement=function(bY){function bZ(b0){function b1(b2){var b3,b4;return b2!=null&&b2.$==0?b1(b2.$0)||b1(b2.$1):b2!=null&&b2.$==2?(b3=b2.$0,b3.Dirty||b1(b3.Current)):b2!=null&&b2.$==6&&(b4=b2.$0,b4.Dirty||l.exists(bZ,b4.Holes));}return b1(b0.Children);}_5.Sync(bY.El,bY.Attr);bZ(bY)?Z.DoSyncElement(bY):void 0;};Z.Sync=function(bY){var bZ,b0;if(bY!=null&&bY.$==1)Z.SyncElemNode(false,bY.$0);else if(bY!=null&&bY.$==2)Z.Sync(bY.$0.Current);else if(bY==null);else if(bY!=null&&bY.$==5);else if(bY!=null&&bY.$==4){bZ=bY.$0;bZ.Dirty?(bZ.Text.nodeValue=bZ.Value,bZ.Dirty=false):void 0;}else if(bY!=null&&bY.$==6){b0=bY.$0;l.iter(function(b1){Z.SyncElemNode(false,b1);},b0.Holes);l.iter(function(b1){_5.Sync(b1[0],b1[1]);},b0.Attrs);Z.AfterRender(b0);}else{Z.Sync(bY.$0);Z.Sync(bY.$1);}};Z.AfterRender=function(bY){var bZ;bZ=bT.GetOptional(bY.Render);bZ!=null&&bZ.$==1?(bZ.$0(bY.El),bT.SetOptional(bY,"Render",null)):void 0;};Z.DoSyncElement=function(bY){var bZ,b0,b1;function b2(b3,b4){var b5,b6;return b3!=null&&b3.$==1?b3.$0.El:b3!=null&&b3.$==2?(b5=b3.$0,b5.Dirty?(b5.Dirty=false,Z.InsertDoc(bZ,b5.Current,b4)):b2(b5.Current,b4)):b3==null?b4:b3!=null&&b3.$==4?b3.$0.Text:b3!=null&&b3.$==5?b3.$0:b3!=null&&b3.$==6?(b6=b3.$0,(b6.Dirty?b6.Dirty=false:void 0,l.foldBack(function(b7,b8){return b7==null||b7.constructor===N?b2(b7,b8):b7;},b6.Els,b4))):b2(b3.$0,b2(b3.$1,b4));}bZ=bY.El;bK.Iter((b0=bY.El,function(b3){_4.RemoveNode(b0,b3);}),bK.Except(bK.DocChildren(bY),bK.Children(bY.El,bT.GetOptional(bY.Delimiters))));b2(bY.Children,(b1=bT.GetOptional(bY.Delimiters),b1!=null&&b1.$==1?b1.$0[1]:null));};_0=g.DocElemNode=bT.Class({Equals:function(bY){return this.ElKey===bY.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_0);_0.New=function(bY,bZ,b0,b1,b2,b3){var b4;return new _0((b4={Attr:bY,Children:bZ,El:b1,ElKey:b2},(bT.SetOptional(b4,"Delimiters",b0),bT.SetOptional(b4,"Render",b3),b4)));};_3.Int=function(){_3.set_counter(_3.counter()+1);return _3.counter();};_3.set_counter=function(bY){bs.$cctor();bs.counter=bY;};_3.counter=function(){bs.$cctor();return bs.counter;};_4.ParseHTMLIntoFakeRoot=function(bY){var bZ,b0,b1,b2,b3;bZ=self.document.createElement("div");return!_4.rhtml().test(bY)?(bZ.appendChild(self.document.createTextNode(bY)),bZ):(b0=(b1=_4.rtagName().exec(bY),n.Equals(b1,null)?"":l.get(b1,1).toLowerCase()),(b2=(b3=(_4.wrapMap())[b0],b3?b3:_4.defaultWrap()),(bZ.innerHTML=b2[1]+bY.replace(_4.rxhtmlTag(),"<$1></$2>")+b2[2],function(b4,b5){var b6;while(true)if(b5===0)return b4;else{b6=b5;b4=b4.lastChild;b5=b6-1;}}(bZ,b2[0]))));};_4.ChildrenArray=function(bY){var bZ,b0,b1;bZ=[];for(b0=0,b1=bY.childNodes.length-1;b0<=b1;b0++)bZ.push(bY.childNodes[b0]);return bZ;};_4.rhtml=function(){bu.$cctor();return bu.rhtml;};_4.wrapMap=function(){bu.$cctor();return bu.wrapMap;};_4.defaultWrap=function(){bu.$cctor();return bu.defaultWrap;};_4.rxhtmlTag=function(){bu.$cctor();return bu.rxhtmlTag;};_4.rtagName=function(){bu.$cctor();return bu.rtagName;};_4.IterSelector=function(bY,bZ,b0){var b1,b2,b3;b1=bY.querySelectorAll(bZ);for(b2=0,b3=b1.length-1;b2<=b3;b2++)b0(b1[b2]);};_4.InsertAt=function(bY,bZ,b0){var b1;if(!(b0.parentNode===bY&&bZ===(b1=b0.nextSibling,n.Equals(b1,null)?null:b1)))bY.insertBefore(b0,bZ);};_4.RemoveNode=function(bY,bZ){if(bZ.parentNode===bY)bY.removeChild(bZ);};_5.Static=function(bY){return new O({$:3,$0:bY});};_5.Insert=function(bY,bZ){var b0,b1,b2;function b3(b4){if(!(b4===null))if(b4!=null&&b4.$==1)b0.push(b4.$0);else if(b4!=null&&b4.$==2){b3(b4.$0);b3(b4.$1);}else if(b4!=null&&b4.$==3)b4.$0(bY);else if(b4!=null&&b4.$==4)b1.push(b4.$0);}b0=[];b1=[];b3(bZ);b2=b0.slice(0);return bg.New(bY,_5.Flags(bZ),b2,b1.length===0?null:{$:1,$0:function(b4){G.iter(function(b5){b5(b4);},b1);}});};_5.Updates=function(bY){return S.MapTreeReduce(function(bZ){return bZ.NChanged();},L.Const(),L.Map2Unit,bY.DynNodes);};_5.Empty=function(bY){return bg.New(bY,0,[],null);};_5.AppendTree=function(bY,bZ){var b0;return bY===null?bZ:bZ===null?bY:(b0=new O({$:2,$0:bY,$1:bZ}),(_5.SetFlags(b0,_5.Flags(bY)|_5.Flags(bZ)),b0));};_5.EmptyAttr=function(){bx.$cctor();return bx.EmptyAttr;};_5.Flags=function(bY){return bY!==null&&bY.hasOwnProperty("flags")?bY.flags:0;};_5.Dynamic=function(bY,bZ){return new O({$:1,$0:new bB.New(bY,bZ)});};_5.HasExitAnim=function(bY){var bZ;bZ=2;return(bY.DynFlags&bZ)===bZ;};_5.GetExitAnim=function(bY){return _5.GetAnim(bY,function(bZ,b0){return bZ.NGetExitAnim(b0);});};_5.HasEnterAnim=function(bY){var bZ;bZ=1;return(bY.DynFlags&bZ)===bZ;};_5.GetEnterAnim=function(bY){return _5.GetAnim(bY,function(bZ,b0){return bZ.NGetEnterAnim(b0);});};_5.HasChangeAnim=function(bY){var bZ;bZ=4;return(bY.DynFlags&bZ)===bZ;};_5.GetChangeAnim=function(bY){return _5.GetAnim(bY,function(bZ,b0){return bZ.NGetChangeAnim(b0);});};_5.SetFlags=function(bY,bZ){bY.flags=bZ;};_5.GetAnim=function(bY,bZ){return bc.Concat(l.map(function(b0){return bZ(b0,bY.DynElem);},bY.DynNodes));};_5.Sync=function(bY,bZ){l.iter(function(b0){b0.NSync(bY);},bZ.DynNodes);};_7=_6.T=bT.Class({GetEnumerator:function(){return new W.New(this,null,function(bY){var bZ;bZ=bY.s;return bZ.$==0?false:(bY.c=bZ.$0,bY.s=bZ.$1,true);},void 0);},GetEnumerator0:function(){return V.Get(this);}},null,_7);_7.Empty=new _7({$:0});_8.New=function(bY,bZ,b0){return{memory:bY,position:bZ,finished:b0};};_9.New=function(bY,bZ,b0,b1){return{opcode:bY,op1:bZ,op2:b0,dest:b1};};_=g.Elt=bT.Class({},x,_);_.TreeNode=function(bY,bZ){var b0,b1;function b2(b3){return b3[1];}b0=bj.Create(bZ);return new _.New$1({$:6,$0:bY},L.Map2Unit((b1=l.map(function(b3){return _5.Updates(b2(b3));},bY.Attrs),S.TreeReduce(L.Const(),L.Map2Unit,b1)),b0.v),l.get(bY.Els,0),b0);};_.New=function(bY,bZ,b0){var b1,b2;b1=Z.CreateElemNode(bY,bZ,b0.docNode);b2=bj.Create(b0.updates);return new _.New$1({$:1,$0:b1},L.Map2Unit(_5.Updates(b1.Attr),b2.v),bY,b2);};_.New$1=bT.Ctor(function(bY,bZ,b0,b1){x.New.call(this,bY,bZ);this.docNode$1=bY;this.updates$1=bZ;this.elt=b0;this.rvUpdates=b1;},_);$.convertTextNode=function(bY){var bZ,b0,b1,b2,b3,b4;bZ=null;b0=0;b2=bY.textContent;b3=new a.RegExp(w.TextHoleRE(),"g");while(bZ=b3.exec(b2),bZ!==null){bY.parentNode.insertBefore(self.document.createTextNode(ba.string(b2,{$:1,$0:b0},{$:1,$0:b3.lastIndex-l.get(bZ,0).length-1})),bY);b0=b3.lastIndex;b4=self.document.createElement("span");b4.setAttribute("ws-replace",l.get(bZ,1).toLowerCase());bY.parentNode.insertBefore(b4,bY);}b3.lastIndex=0;bY.textContent=ba.string(b2,{$:1,$0:b0},null);};$.failNotLoaded=function(bY){bV.warn("Instantiating non-loaded template",bY);};$.fillTextHole=function(bY,bZ,b0){var b1;b1=bY.querySelector("[ws-replace]");return n.Equals(b1,null)?(bV.warn("Filling non-existent text hole",b0),null):(b1.parentNode.replaceChild(self.document.createTextNode(bZ),b1),{$:1,$0:b1.getAttribute("ws-replace")});};$.removeHolesExcept=function(bY,bZ){function b0(b1){w.foreachNotPreserved(bY,"["+b1+"]",function(b2){if(!bZ.Contains(b2.getAttribute(b1)))b2.removeAttribute(b1);});}b0("ws-attr");b0("ws-onafterrender");b0("ws-var");w.foreachNotPreserved(bY,"[ws-hole]",function(b1){if(!bZ.Contains(b1.getAttribute("ws-hole"))){b1.removeAttribute("ws-hole");while(b1.hasChildNodes())b1.removeChild(b1.lastChild);}});w.foreachNotPreserved(bY,"[ws-replace]",function(b1){if(!bZ.Contains(b1.getAttribute("ws-replace")))b1.parentNode.removeChild(b1);});w.foreachNotPreserved(bY,"[ws-on]",function(b1){b1.setAttribute("ws-on",bi.concat(" ",l.filter(function(b2){return bZ.Contains(l.get(bi.SplitChars(b2,[":"],1),1));},bi.SplitChars(b1.getAttribute("ws-on"),[" "],1))));});w.foreachNotPreserved(bY,"[ws-attr-holes]",function(b1){var b2,b3,b4,b5,b6;b2=bi.SplitChars(b1.getAttribute("ws-attr-holes"),[" "],1);for(b3=0,b4=b2.length-1;b3<=b4;b3++){b5=l.get(b2,b3);b1.setAttribute(b5,(b6=new a.RegExp(w.TextHoleRE(),"g"),b1.getAttribute(b5).replace(b6,function(b7,b8){return bZ.Contains(b8)?b7:"";})));}});};$.fillInstanceAttrs=function(bY,bZ){var b0,b1,b2,b3,b4;$.convertAttrs(bZ);b0=bZ.nodeName.toLowerCase();b1=bY.querySelector("[ws-attr="+b0+"]");if(n.Equals(b1,null))bV.warn("Filling non-existent attr hole",b0);else{b1.removeAttribute("ws-attr");for(b2=0,b3=bZ.attributes.length-1;b2<=b3;b2++){b4=bZ.attributes.item(b2);b4.name==="class"&&b1.hasAttribute("class")?b1.setAttribute("class",b1.getAttribute("class")+" "+b4.nodeValue):b1.setAttribute(b4.name,b4.nodeValue);}}};$.mapHoles=function(bY,bZ){function b0(b1){w.foreachNotPreserved(bY,"["+b1+"]",function(b2){var b3,b4;b3=(b4=null,[bZ.TryGetValue(b2.getAttribute(b1).toLowerCase(),{get:function(){return b4;},set:function(b5){b4=b5;}}),b4]);b3[0]?b2.setAttribute(b1,b3[1]):void 0;});}b0("ws-hole");b0("ws-replace");b0("ws-attr");b0("ws-onafterrender");b0("ws-var");w.foreachNotPreserved(bY,"[ws-on]",function(b1){b1.setAttribute("ws-on",bi.concat(" ",l.map(function(b2){var b3,b4,b5;b3=bi.SplitChars(b2,[":"],1);b4=(b5=null,[bZ.TryGetValue(l.get(b3,1),{get:function(){return b5;},set:function(b6){b5=b6;}}),b5]);return b4[0]?l.get(b3,0)+":"+b4[1]:b2;},bi.SplitChars(b1.getAttribute("ws-on"),[" "],1))));});w.foreachNotPreserved(bY,"[ws-attr-holes]",function(b1){var b2,b3,b4;b2=bi.SplitChars(b1.getAttribute("ws-attr-holes"),[" "],1);for(b3=0,b4=b2.length-1;b3<=b4;b3++)(function(){var b5;function b6(b7,b8){var b9;b9=e.KeyValue(b8);return b7.replace(new a.RegExp("\\${"+b9[0]+"}","ig"),"${"+b9[1]+"}");}b5=l.get(b2,b3);return b1.setAttribute(b5,(((bT.Curried3(G.fold))(b6))(b1.getAttribute(b5)))(bZ));}());});};$.fill=function(bY,bZ,b0){while(true)if(bY.hasChildNodes())b0=bZ.insertBefore(bY.lastChild,b0);else return null;};$.convertAttrs=function(bY){var b0,b1,b2,b3,b4,b5,b6,b7;function bZ(b8){var b9;b9=bY.getAttribute(b8);b9===null?void 0:bY.setAttribute(b8,b9.toLowerCase());}b0=bY.attributes;b1=[];b2=[];b3=[];for(b4=0,b5=b0.length-1;b4<=b5;b4++){b6=b0.item(b4);bi.StartsWith(b6.nodeName,"ws-on")&&b6.nodeName!=="ws-onafterrender"&&b6.nodeName!=="ws-on"?(b1.push(b6.nodeName),b2.push(ba.string(b6.nodeName,{$:1,$0:"ws-on".length},null)+":"+b6.nodeValue.toLowerCase())):!bi.StartsWith(b6.nodeName,"ws-")&&(new a.RegExp(w.TextHoleRE())).test(b6.nodeValue)?(b6.nodeValue=(b7=new a.RegExp(w.TextHoleRE(),"g"),b6.nodeValue.replace(b7,function(b8,b9){return"${"+b9.toLowerCase()+"}";})),b3.push(b6.nodeName)):void 0;}!(b2.length==0)?bY.setAttribute("ws-on",bi.concat(" ",b2)):void 0;!(b3.length==0)?bY.setAttribute("ws-attr-holes",bi.concat(" ",b3)):void 0;bZ("ws-hole");bZ("ws-replace");bZ("ws-attr");bZ("ws-onafterrender");bZ("ws-var");l.iter(function(b8){bY.removeAttribute(b8);},b1);};ba.string=function(bY,bZ,b0){return bZ==null?b0!=null&&b0.$==1?bY.slice(0,b0.$0+1):"":b0==null?bY.slice(bZ.$0):bY.slice(bZ.$0,b0.$0+1);};G.insufficient=function(){return e.FailWith("The input sequence has an insufficient number of elements.");};G.last=function(bY){var bZ,b0;bZ=V.Get(bY);try{if(!bZ.MoveNext())b0=G.insufficient();else{while(bZ.MoveNext());b0=bZ.Current();}return b0;}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}};bb=s.KeyCollection=bT.Class({GetEnumerator$1:function(){return V.Get(G.map(function(bY){return bY.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,bb);bb.New=bT.Ctor(function(bY){f.New.call(this);this.d=bY;},bb);bc.get_UseAnimations=function(){return bp.UseAnimations();};bc.Play=function(bY){var bZ;bZ=null;return bo.Delay(function(){return bo.Bind(bc.Run(a.ignore,bp.Actions(bY)),function(){bp.Finalize(bY);return bo.Return(null);});});};bc.Append=function(bY,bZ){return{$:0,$0:bw.Append(bY.$0,bZ.$0)};};bc.Run=function(bY,bZ){var b0;function b1(b2){function b3(b4,b5){var b6;b6=b5-b4;bZ.Compute(b6);bY();return b6<=b0?void a.requestAnimationFrame(function(b7){b3(b4,b7);}):b2();}a.requestAnimationFrame(function(b4){b3(b4,b4);});}b0=bZ.Duration;return b0===0?bo.Zero():bo.FromContinuations(function(b2,b3,b4){return b1.apply(null,[b2,b3,b4]);});};bc.Concat=function(bY){return{$:0,$0:bw.Concat(G.map(bp.List,bY))};};bc.get_Empty=function(){return{$:0,$0:bw.Empty()};};bd.BatchUpdatesEnabled=function(){bq.$cctor();return bq.BatchUpdatesEnabled;};be.StartProcessor=function(bY){var bZ;function b0(){var b1;b1=null;return bo.Delay(function(){return bo.Bind(bY,function(){var b2;b2=bZ[0];return b2===1?(bZ[0]=0,bo.Zero()):b2===2?(bZ[0]=1,b0()):bo.Zero();});});}bZ=[0];return function(){var b1;b1=bZ[0];b1===0?(bZ[0]=1,bo.Start(b0(),null)):b1===1?bZ[0]=2:void 0;};};bg.New=function(bY,bZ,b0,b1){var b2;b2={DynElem:bY,DynFlags:bZ,DynNodes:b0};bT.SetOptional(b2,"OnAfterRender",b1);return b2;};R.Obsolete=function(bY){var bZ,b0,b1,b2,b3;b0=bY.s;if(b0==null||(b0!=null&&b0.$==2?(bZ=b0.$1,false):b0!=null&&b0.$==3?(bZ=b0.$1,false):true))void 0;else{bY.s=null;for(b1=0,b2=l.length(bZ)-1;b1<=b2;b1++){b3=l.get(bZ,b1);typeof b3=="object"?function(b4){R.Obsolete(b4);}(b3):b3();}}};R.New=function(bY){return{s:bY};};_6.head=function(bY){return bY.$==1?bY.$0:_6.listEmpty();};_6.tail=function(bY){return bY.$==1?bY.$1:_6.listEmpty();};_6.listEmpty=function(){return e.FailWith("The input list was empty.");};bh.Handler=function(bY,bZ){return _5.Static(function(b0){b0.addEventListener(bY,function(b1){return(bZ(b0))(b1);},false);});};bh.OnAfterRender=function(bY){return new O({$:4,$0:bY});};bh.Value=function(bY){var bZ;bZ=(((bt.StringApply())(bY))(_5.Static))(function(b0){return bh.DynamicCustom(b0,bY.get_View());});return O.Append(bZ[0],bZ[1]);};bh.Checked=function(bY){var bZ;bZ=(((bt.BoolCheckedApply())(bY))(_5.Static))(function(b0){return bh.DynamicCustom(b0,bY.get_View());});return O.Append(bZ[0],bZ[1]);};bh.IntValue=function(bY){var bZ;bZ=(((bt.IntApplyChecked())(bY))(_5.Static))(function(b0){return bh.DynamicCustom(b0,bY.get_View());});return O.Append(bZ[0],bZ[1]);};bh.IntValueUnchecked=function(bY){var bZ;bZ=(((bt.IntApplyUnchecked())(bY))(_5.Static))(function(b0){return bh.DynamicCustom(b0,bY.get_View());});return O.Append(bZ[0],bZ[1]);};bh.FloatValue=function(bY){var bZ;bZ=(((bt.FloatApplyChecked())(bY))(_5.Static))(function(b0){return bh.DynamicCustom(b0,bY.get_View());});return O.Append(bZ[0],bZ[1]);};bh.FloatValueUnchecked=function(bY){var bZ;bZ=(((bt.FloatApplyUnchecked())(bY))(_5.Static))(function(b0){return bh.DynamicCustom(b0,bY.get_View());});return O.Append(bZ[0],bZ[1]);};bh.Dynamic=function(bY,bZ){return _5.Dynamic(bZ,function(b0){return function(b1){return b0.setAttribute(bY,b1);};});};bh.DynamicCustom=function(bY,bZ){return _5.Dynamic(bZ,bY);};bi.concat=function(bY,bZ){return l.ofSeq(bZ).join(bY);};bi.SplitChars=function(bY,bZ,b0){return bi.Split(bY,new a.RegExp("["+bi.RegexEscape(bZ.join(""))+"]"),b0);};bi.StartsWith=function(bY,bZ){return bY.substring(0,bZ.length)==bZ;};bi.Split=function(bY,bZ,b0){return b0===1?l.filter(function(b1){return b1!=="";},bi.SplitWith(bY,bZ)):bi.SplitWith(bY,bZ);};bi.RegexEscape=function(bY){return bY.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bi.SplitWith=function(bY,bZ){return bY.split(bZ);};bi.forall=function(bY,bZ){return G.forall(bY,bi.protect(bZ));};bi.protect=function(bY){return bY===null?"":bY;};bj=g.Updates=bT.Class({},null,bj);bj.Create=function(bY){var bZ;bZ=null;bZ=bj.New(bY,null,function(){var b0;b0=bZ.s;return b0===null?(b0=R.Copy(bZ.c()),bZ.s=b0,R.WhenObsoleteRun(b0,function(){bZ.s=null;}),b0):b0;});return bZ;};bj.New=function(bY,bZ,b0){return new bj({c:bY,s:bZ,v:b0});};bk=s.ValueCollection=bT.Class({GetEnumerator$1:function(){return V.Get(G.map(function(bY){return bY.V;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,bk);bk.New=bT.Ctor(function(bY){f.New.call(this);this.d=bY;},bk);bm.New=function(bY,bZ){return{PreviousNodes:bY,Top:bZ};};bn.get_Empty=function(){return{$:0,$0:new F.New$3()};};bn.FindAll=function(bY){var bZ;function b0(b2){if(b2!=null&&b2.$==0){b0(b2.$0);b0(b2.$1);}else if(b2!=null&&b2.$==1)b1(b2.$0);else if(b2!=null&&b2.$==2)b0(b2.$0.Current);else if(b2!=null&&b2.$==6)l.iter(b1,b2.$0.Holes);}function b1(b2){bZ.push(b2);b0(b2.Children);}bZ=[];b0(bY);return{$:0,$0:new F.New$2(bZ)};};bn.Filter=function(bY,bZ){return{$:0,$0:bH.Filter(bY,bZ.$0)};};bn.Except=function(bY,bZ){return{$:0,$0:bH.Except(bY.$0,bZ.$0)};};bn.ToArray=function(bY){return bH.ToArray(bY.$0);};bn.Intersect=function(bY,bZ){return{$:0,$0:bH.Intersect(bY.$0,bZ.$0)};};bo.Delay=function(bY){return function(bZ){try{(bY(null))(bZ);}catch(b0){bZ.k({$:1,$0:b0});}};};bo.Bind=function(bY,bZ){return bo.checkCancel(function(b0){bY(bE.New(function(b1){var b2;if(b1.$==0){b2=b1.$0;bo.scheduler().Fork(function(){try{(bZ(b2))(b0);}catch(b3){b0.k({$:1,$0:b3});}});}else bo.scheduler().Fork(function(){b0.k(b1);});},b0.ct));});};bo.Zero=function(){bF.$cctor();return bF.Zero;};bo.Start=function(bY,bZ){var b0,b1;b0=(b1=(bo.defCTS())[0],bZ==null?b1:bZ.$0);bo.scheduler().Fork(function(){if(!b0.c)bY(bE.New(function(b2){if(b2.$==1)bo.UncaughtAsyncError(b2.$0);},b0));});};bo.Return=function(bY){return function(bZ){bZ.k({$:0,$0:bY});};};bo.scheduler=function(){bF.$cctor();return bF.scheduler;};bo.checkCancel=function(bY){return function(bZ){if(bZ.ct.c)bo.cancel(bZ);else bY(bZ);};};bo.defCTS=function(){bF.$cctor();return bF.defCTS;};bo.UncaughtAsyncError=function(bY){bV.log("WebSharper: Uncaught asynchronous exception",bY);};bo.FromContinuations=function(bY){return function(bZ){var b0;function b1(b2){if(b0[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{b0[0]=true;bo.scheduler().Fork(b2);}}b0=[false];bY(function(b2){b1(function(){bZ.k({$:0,$0:b2});});},function(b2){b1(function(){bZ.k({$:1,$0:b2});});},function(b2){b1(function(){bZ.k({$:2,$0:b2});});});};};bo.cancel=function(bY){bY.k({$:2,$0:new bN.New(bY.ct)});};bp.UseAnimations=function(){bv.$cctor();return bv.UseAnimations;};bp.Actions=function(bY){return bp.ConcatActions(l.choose(function(bZ){return bZ.$==1?{$:1,$0:bZ.$0}:null;},bw.ToArray(bY.$0)));};bp.Finalize=function(bY){l.iter(function(bZ){if(bZ.$==0)bZ.$0();},bw.ToArray(bY.$0));};bp.ConcatActions=function(bY){var bZ,b0,b1,b2;bZ=S.ofSeqNonCopying(bY);b0=l.length(bZ);return b0===0?bp.Const():b0===1?l.get(bZ,0):(b1=G.max(G.map(function(b3){return b3.Duration;},bZ)),(b2=l.map(function(b3){return bp.Prolong(b1,b3);},bZ),bp.Def(b1,function(b3){l.iter(function(b4){b4.Compute(b3);},b2);})));};bp.List=function(bY){return bY.$0;};bp.Const=function(bY){return bp.Def(0,function(){return bY;});};bp.Def=function(bY,bZ){return{Compute:bZ,Duration:bY};};bp.Prolong=function(bY,bZ){var b0,b1,b2;b0=bZ.Compute;b1=bZ.Duration;b2=bO.Create(function(){return bZ.Compute(bZ.Duration);});return{Compute:function(b3){return b3>=b1?b2.f():b0(b3);},Duration:bY};};bq.$cctor=function(){bq.$cctor=a.ignore;bq.BatchUpdatesEnabled=true;};br.concat=function(bY){var bZ,b0;bZ=[];for(var b1 in bY)bZ.push.apply(bZ,bY[b1]);return bZ;};bs.$cctor=function(){bs.$cctor=a.ignore;bs.counter=0;};M.Parse=function(bY,bZ,b0,b1){var b2;b2=+bY;if(b2!==b2-b2%1)throw new bz.New$1("Input string was not in a correct format.");else if(b2<bZ||b2>b0)throw new bA.New$1(b1);else return b2;};M.TryParse=function(bY,bZ,b0,b1){var b2,b3;b2=+bY;b3=b2===b2-b2%1&&b2>=bZ&&b2<=b0;b3?b1.set(b2):void 0;return b3;};bt.StringApply=function(){bx.$cctor();return bx.StringApply;};bt.BoolCheckedApply=function(){bx.$cctor();return bx.BoolCheckedApply;};bt.IntApplyChecked=function(){bx.$cctor();return bx.IntApplyChecked;};bt.IntApplyUnchecked=function(){bx.$cctor();return bx.IntApplyUnchecked;};bt.FloatApplyChecked=function(){bx.$cctor();return bx.FloatApplyChecked;};bt.FloatApplyUnchecked=function(){bx.$cctor();return bx.FloatApplyUnchecked;};bt.ApplyValue=function(bY,bZ,b0,b1,b2){return[b1(function(b3){function b4(){b0.UpdateMaybe(function(b5){var b6,b7;b6=bY(b3);return b6!=null&&b6.$==1&&(!n.Equals(b6.$0,b5)&&(b7=[b6,b6.$0],true))?b7[0]:null;});}b3.addEventListener("change",b4);b3.addEventListener("input",b4);b3.addEventListener("keypress",b4);}),b2(function(b3){return function(b4){var b5,b6;b5=bY(b3);return b5!=null&&b5.$==1&&(n.Equals(b5.$0,b4)&&(b6=b5.$0,true))?null:bZ(b3,b4);};})];};bt.StringSet=function(){bx.$cctor();return bx.StringSet;};bt.StringGet=function(){bx.$cctor();return bx.StringGet;};bt.IntSetUnchecked=function(){bx.$cctor();return bx.IntSetUnchecked;};bt.IntGetUnchecked=function(){bx.$cctor();return bx.IntGetUnchecked;};bt.IntSetChecked=function(){bx.$cctor();return bx.IntSetChecked;};bt.IntGetChecked=function(){bx.$cctor();return bx.IntGetChecked;};bt.FloatSetUnchecked=function(){bx.$cctor();return bx.FloatSetUnchecked;};bt.FloatGetUnchecked=function(){bx.$cctor();return bx.FloatGetUnchecked;};bt.FloatSetChecked=function(){bx.$cctor();return bx.FloatSetChecked;};bt.FloatGetChecked=function(){bx.$cctor();return bx.FloatGetChecked;};bu.$cctor=function(){var bY;bu.$cctor=a.ignore;bu.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bu.rtagName=new a.RegExp("<([\\w:]+)");bu.rhtml=new a.RegExp("<|&#?\\w+;");bu.wrapMap=(bY=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:bY,tbody:bY,tfoot:bY,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bu.defaultWrap=[0,"",""];};bv.$cctor=function(){bv.$cctor=a.ignore;bv.CubicInOut=bD.Custom(function(bY){var bZ;bZ=bY*bY;return 3*bZ-2*(bZ*bY);});bv.UseAnimations=true;};bw.Append=function(bY,bZ){return bY.$==0?bZ:bZ.$==0?bY:{$:2,$0:bY,$1:bZ};};bw.ToArray=function(bY){var bZ;function b0(b1){if(b1.$==1)bZ.push(b1.$0);else if(b1.$==2){b0(b1.$0);b0(b1.$1);}else if(b1.$==3)l.iter(function(b2){bZ.push(b2);},b1.$0);}bZ=[];b0(bY);return bZ.slice(0);};bw.Concat=function(bY){var bZ;bZ=S.ofSeqNonCopying(bY);return S.TreeReduce(bw.Empty(),bw.Append,bZ);};bw.Empty=function(){bP.$cctor();return bP.Empty;};bx.$cctor=function(){var bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7;bx.$cctor=a.ignore;bx.EmptyAttr=null;bx.BoolCheckedApply=bT.Curried3(function(b8,b9,b_){return[b9(function(b$){b$.addEventListener("change",function(){return!n.Equals(b8.Get(),b$.checked)?b8.Set(b$.checked):null;});}),b_(function(b$){return function(ca){b$.checked=ca;};})];});bx.StringSet=function(b8){return function(b9){b8.value=b9;};};bx.StringGet=function(b8){return{$:1,$0:b8.value};};bx.StringApply=(bY=bt.StringGet(),(bZ=bt.StringSet(),bT.Curried(bt.ApplyValue,3,[bY,function(b8,b9){return(bZ(b8))(b9);}])));bx.IntSetUnchecked=function(b8){return function(b9){b8.value=a.String(b9);};};bx.IntGetUnchecked=function(b8){var b9,b_;b9=b8.value;return bI.isBlank(b9)?{$:1,$0:0}:(b_=+b9,b_!==b_>>0?null:{$:1,$0:b_});};bx.IntApplyUnchecked=(b0=bt.IntGetUnchecked(),(b1=bt.IntSetUnchecked(),bT.Curried(bt.ApplyValue,3,[b0,function(b8,b9){return(b1(b8))(b9);}])));bx.IntSetChecked=function(b8){return function(b9){var b_;b_=b9.get_Input();return b8.value!==b_?void(b8.value=b_):null;};};bx.IntGetChecked=function(b8){var b9,b_,b$;b9=b8.value;return{$:1,$0:bI.isBlank(b9)?(b8.checkValidity?b8.checkValidity():true)?new P({$:2,$0:b9}):new P({$:1,$0:b9}):(b_=(b$=0,[M.TryParseInt32(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]),b_[0]?new P({$:0,$0:b_[1],$1:b9}):new P({$:1,$0:b9}))};};bx.IntApplyChecked=(b2=bt.IntGetChecked(),(b3=bt.IntSetChecked(),bT.Curried(bt.ApplyValue,3,[b2,function(b8,b9){return(b3(b8))(b9);}])));bx.FloatSetUnchecked=function(b8){return function(b9){b8.value=a.String(b9);};};bx.FloatGetUnchecked=function(b8){var b9,b_;b9=b8.value;return bI.isBlank(b9)?{$:1,$0:0}:(b_=+b9,a.isNaN(b_)?null:{$:1,$0:b_});};bx.FloatApplyUnchecked=(b4=bt.FloatGetUnchecked(),(b5=bt.FloatSetUnchecked(),bT.Curried(bt.ApplyValue,3,[b4,function(b8,b9){return(b5(b8))(b9);}])));bx.FloatSetChecked=function(b8){return function(b9){var b_;b_=b9.get_Input();return b8.value!==b_?void(b8.value=b_):null;};};bx.FloatGetChecked=function(b8){var b9,b_;b9=b8.value;return{$:1,$0:bI.isBlank(b9)?(b8.checkValidity?b8.checkValidity():true)?new P({$:2,$0:b9}):new P({$:1,$0:b9}):(b_=+b9,a.isNaN(b_)?new P({$:1,$0:b9}):new P({$:0,$0:b_,$1:b9}))};};bx.FloatApplyChecked=(b6=bt.FloatGetChecked(),(b7=bt.FloatSetChecked(),bT.Curried(bt.ApplyValue,3,[b6,function(b8,b9){return(b7(b8))(b9);}])));};bz=d.FormatException=bT.Class({},by,bz);bz.New$1=bT.Ctor(function(bY){this.message=bY;N.setPrototypeOf(this,bz.prototype);},bz);bA=d.OverflowException=bT.Class({},by,bA);bA.New$1=bT.Ctor(function(bY){this.message=bY;N.setPrototypeOf(this,bA.prototype);},bA);bB=g.DynamicAttrNode=bT.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bY){return bc.get_Empty();},NGetEnterAnim:function(bY){return bc.get_Empty();},NGetChangeAnim:function(bY){return bc.get_Empty();},NSync:function(bY){if(this.dirty){(this.push(bY))(this.value);this.dirty=false;}}},f,bB);bB.New=bT.Ctor(function(bY,bZ){var b0;b0=this;f.New.call(this);this.push=bZ;this.value=void 0;this.dirty=false;this.updates=L.Map(function(b1){b0.value=b1;b0.dirty=true;},bY);},bB);bC=bo.Scheduler=bT.Class({Fork:function(bY){var bZ;bZ=this;this.robin.push(bY);this.idle?(this.idle=false,a.setTimeout(function(){bZ.tick();},0)):void 0;},tick:function(){var bY,bZ,b0;bZ=this;b0=bX.now();bY=true;while(bY)if(this.robin.length===0){this.idle=true;bY=false;}else{(this.robin.shift())();bX.now()-b0>40?(a.setTimeout(function(){bZ.tick();},0),bY=false):void 0;}}},f,bC);bC.New=bT.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},bC);bD=g.Easing=bT.Class({},f,bD);bD.Custom=function(bY){return new bD.New(bY);};bD.New=bT.Ctor(function(bY){f.New.call(this);this.transformTime=bY;},bD);bE.New=function(bY,bZ){return{k:bY,ct:bZ};};bF.$cctor=function(){bF.$cctor=a.ignore;bF.noneCT=bG.New(false,[]);bF.scheduler=new bC.New();bF.defCTS=[new bJ.New()];bF.Zero=bo.Return();bF.GetCT=function(bY){bY.k({$:0,$0:bY.ct});};};bG.New=function(bY,bZ){return{c:bY,r:bZ};};bH.Filter=function(bY,bZ){return new F.New$2(l.filter(bY,bH.ToArray(bZ)));};bH.Except=function(bY,bZ){var b0;b0=new F.New$2(bH.ToArray(bZ));b0.ExceptWith(bH.ToArray(bY));return b0;};bH.ToArray=function(bY){var bZ;bZ=l.create(bY.get_Count(),void 0);bY.CopyTo(bZ);return bZ;};bH.Intersect=function(bY,bZ){var b0;b0=new F.New$2(bH.ToArray(bY));b0.IntersectWith(bH.ToArray(bZ));return b0;};bI.isBlank=function(bY){return bi.forall(bL.IsWhiteSpace,bY);};bJ=d.CancellationTokenSource=bT.Class({},f,bJ);bJ.New=bT.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bJ);bK.Children=function(bY,bZ){var b0,b1,b2;if(bZ!=null&&bZ.$==1){b2=[];b0=bZ.$0[0].nextSibling;while(b0!==bZ.$0[1]){b2.push(b0);b0=b0.nextSibling;}return{$:0,$0:b2};}else return{$:0,$0:l.init(bY.childNodes.length,(b1=bY.childNodes,function(b3){return b1[b3];}))};};bK.Except=function(bY,bZ){var b0;b0=bY.$0;return{$:0,$0:l.filter(function(b1){return l.forall(function(b2){return!(b1===b2);},b0);},bZ.$0)};};bK.Iter=function(bY,bZ){l.iter(bY,bZ.$0);};bK.DocChildren=function(bY){var bZ;function b0(b1){if(b1!=null&&b1.$==2)b0(b1.$0.Current);else if(b1!=null&&b1.$==1)bZ.push(b1.$0.El);else if(b1==null);else if(b1!=null&&b1.$==5)bZ.push(b1.$0);else if(b1!=null&&b1.$==4)bZ.push(b1.$0.Text);else if(b1!=null&&b1.$==6)l.iter(function(b2){if(b2==null||b2.constructor===N)b0(b2);else bZ.push(b2);},b1.$0.Els);else{b0(b1.$0);b0(b1.$1);}}bZ=[];b0(bY.Children);return{$:0,$0:S.ofSeqNonCopying(bZ)};};bL.IsWhiteSpace=function(bY){return bY.match(new a.RegExp("\\s"))!==null;};bM.Clear=function(bY){bY.splice(0,l.length(bY));};bN=d.OperationCanceledException=bT.Class({},by,bN);bN.New=bT.Ctor(function(bY){bN.New$1.call(this,"The operation was canceled.",null,bY);},bN);bN.New$1=bT.Ctor(function(bY,bZ,b0){this.message=bY;this.inner=bZ;N.setPrototypeOf(this,bN.prototype);this.ct=b0;},bN);bO.Create=function(bY){return bR.New(false,bY,bO.forceLazy);};bO.forceLazy=function(){var bY;bY=this.v();this.c=true;this.v=bY;this.f=bO.cachedLazy;return bY;};bO.cachedLazy=function(){return this.v;};bP.$cctor=function(){bP.$cctor=a.ignore;bP.Empty={$:0};};bR.New=function(bY,bZ,b0){return{c:bY,v:bZ,f:b0};};bT.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
