function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(this);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS;a=self;b=a.FSharpSPA=a.FSharpSPA||{};c=b.Client=b.Client||{};d=a.WebSharper=a.WebSharper||{};e=d.Obj=d.Obj||{};f=d.UI=d.UI||{};g=f.Var$1=f.Var$1||{};h=d.Operators=d.Operators||{};i=f.Templating=f.Templating||{};j=i.Runtime=i.Runtime||{};k=j.Server=j.Server||{};l=k.TemplateInstance=k.TemplateInstance||{};m=d.Arrays=d.Arrays||{};n=k.ProviderBuilder=k.ProviderBuilder||{};o=f.ListModel=f.ListModel||{};p=d.Unchecked=d.Unchecked||{};q=a.FSharpSPA_Templates=a.FSharpSPA_Templates||{};r=k.Handler=k.Handler||{};s=f.Var=f.Var||{};t=f.ConcreteVar=f.ConcreteVar||{};u=f.Snap=f.Snap||{};v=a.System=a.System||{};w=v.Guid=v.Guid||{};x=d.Collections=d.Collections||{};y=x.List=x.List||{};z=a.StartupCode$FSharpSPA$Client=a.StartupCode$FSharpSPA$Client||{};A=f.Client=f.Client||{};B=A.Templates=A.Templates||{};C=f.Doc=f.Doc||{};D=d.JavaScript=d.JavaScript||{};E=D.Pervasives=D.Pervasives||{};F=f.Abbrev=f.Abbrev||{};G=F.Fresh=F.Fresh||{};H=x.Dictionary=x.Dictionary||{};I=f.View=f.View||{};J=a.Object;K=f.AttrProxy=f.AttrProxy||{};L=f.CheckedInput=f.CheckedInput||{};M=d.Numeric=d.Numeric||{};N=x.HashSet=x.HashSet||{};O=d.Seq=d.Seq||{};P=k.TemplateInitializer=k.TemplateInitializer||{};Q=a.EventTarget;R=a.Node;S=D.JS=D.JS||{};T=x.DictionaryUtil=x.DictionaryUtil||{};U=d.Enumerator=d.Enumerator||{};V=U.T=U.T||{};W=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};X=a.WindowOrWorkerGlobalScope;Y=f.Docs=f.Docs||{};Z=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_0=f.DocElemNode=f.DocElemNode||{};_1=a.CharacterData;_2=f.Storage=f.Storage||{};_3=f.Elt=f.Elt||{};_4=B.Prepare=B.Prepare||{};_5=d.Slice=d.Slice||{};_6=f.DomUtility=f.DomUtility||{};_7=x.KeyCollection=x.KeyCollection||{};_8=f.An=f.An||{};_9=A.Settings=A.Settings||{};_=F.Mailbox=F.Mailbox||{};$=A.Attrs=A.Attrs||{};ba=$.Dyn=$.Dyn||{};bb=f.Array=f.Array||{};bc=_2.ArrayStorage=_2.ArrayStorage||{};bd=f.Attrs=f.Attrs||{};be=f.AttrModule=f.AttrModule||{};bf=d.List=d.List||{};bg=bf.T=bf.T||{};bh=d.Strings=d.Strings||{};bi=f.Updates=f.Updates||{};bj=x.ValueCollection=x.ValueCollection||{};bk=A.Docs=A.Docs||{};bl=bk.RunState=bk.RunState||{};bm=bk.NodeSet=bk.NodeSet||{};bn=d.Concurrency=d.Concurrency||{};bo=f.Anims=f.Anims||{};bp=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bq=x.HashSetUtil=x.HashSetUtil||{};br=f.BindVar=f.BindVar||{};bs=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bt=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bu=f.AppendList=f.AppendList||{};bv=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bw=f.DynamicAttrNode=f.DynamicAttrNode||{};bx=bn.Scheduler=bn.Scheduler||{};by=f.Easing=f.Easing||{};bz=bn.AsyncBody=bn.AsyncBody||{};bA=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bB=bn.CT=bn.CT||{};bC=F.HashSet=F.HashSet||{};bD=f.String=f.String||{};bE=d.CancellationTokenSource=d.CancellationTokenSource||{};bF=bk.DomNodes=bk.DomNodes||{};bG=d.Queue=d.Queue||{};bH=d.Char=d.Char||{};bI=a.Error;bJ=d.OperationCanceledException=d.OperationCanceledException||{};bK=d.Lazy=d.Lazy||{};bL=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bM=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};bN=bM.LazyRecord=bM.LazyRecord||{};bO=a.IntelliFactory;bP=bO&&bO.Runtime;bQ=a.console;bR=a.Math;bS=a.Date;c.Main=function(){var bT,bU,bV,bW,bX,bY,bZ,b0,b1;bT=g.Create$1("");bU=(bV=(bW=(bX=(bY=C.Convert(function(b2){var b3,b4,b5,b6;return(b3=(b4=new n.New$1(),(b4.h.push({$:1,$0:"name",$1:b2}),b4)),(b5=r.CompleteHoles(b3.k,b3.h,[]),(b6=new l.New(b5[1],q.listitem(b5[0])),b3.i=b6,b6))).get_Doc();},c.People().v),(bZ=new n.New$1(),(bZ.h.push({$:0,$0:"listcontainer",$1:bY}),bZ))),(bX.h.push({$:8,$0:"name",$1:bT}),bX)),(bW.h.push(r.EventQ2(bW.k,"add",function(){return bW.i;},function(){c.People().Append(bT.Get());bT.Set("");})),bW)),(b0=r.CompleteHoles(bV.k,bV.h,[["name",0]]),(b1=new l.New(b0[1],q.main(b0[0])),bV.i=b1,b1))).get_Doc();B.LoadLocalTemplates("");C.RunById("main",bU);};c.People=function(){z.$cctor();return z.People;};e=d.Obj=bP.Class({Equals:function(bT){return this===bT;},GetHashCode:function(){return -1;}},null,e);e.New=bP.Ctor(function(){},e);g=f.Var$1=bP.Class({},e,g);g.Create$1=function(bT){return new t.New(false,u.New({$:2,$0:bT,$1:[]}),bT);};h.FailWith=function(bT){throw new bI(bT);};h.KeyValue=function(bT){return[bT.K,bT.V];};l=k.TemplateInstance=bP.Class({get_Doc:function(){return this.doc;}},e,l);l.New=bP.Ctor(function(bT,bU){e.New.call(this);this.doc=bU;this.allVars=bT.$==0?bT.$0:h.FailWith("Should not happen");},l);m.get=function(bT,bU){m.checkBounds(bT,bU);return bT[bU];};m.set=function(bT,bU,bV){m.checkBounds(bT,bU);bT[bU]=bV;};m.checkBounds=function(bT,bU){if(bU<0||bU>=bT.length)h.FailWith("Index was outside the bounds of the array.");};m.length=function(bT){return bT.dims===2?bT.length*bT.length:bT.length;};n=k.ProviderBuilder=bP.Class({},e,n);n.New$1=bP.Ctor(function(){var bT;e.New.call(this);this.i=null;this.k=(bT=w.NewGuid(),a.String(bT));this.h=[];bP.SetOptional(this,"s",null);},n);o=f.ListModel=bP.Class({Append:function(bT){var bU,bV,bW,bX;bU=this;bV=this["var"].Get();bW=this.key(bT);bX=m.tryFindIndex(function(bY){return p.Equals(bU.key(bY),bW);},bV);bX!=null&&bX.$==1?this["var"].Set(this.storage.SSetAt(bX.$0,bT,bV)):this["var"].Set(this.storage.SAppend(bT,bV));this.ObsoleteKey(bW);},ObsoleteKey:function(bT){var bU,bV;bU=(bV=null,[this.it.TryGetValue(bT,{get:function(){return bV;},set:function(bW){bV=bW;}}),bV]);bU[0]?(u.Obsolete(bU[1]),this.it.Remove(bT)):void 0;},GetEnumerator:function(){return U.Get(this["var"].Get());},GetEnumerator0:function(){return U.Get0(this["var"].Get());}},e,o);o.New=bP.Ctor(function(bT,bU){o.New$3.call(this,bT,g.Create$1(m.ofSeq(O.distinctBy(bT,bU.SInit()))),bU);},o);o.New$3=bP.Ctor(function(bT,bU,bV){e.New.call(this);this.key=bT;this["var"]=bU;this.storage=bV;this.v=I.Map(function(bW){return bW.slice();},this["var"].get_View());this.it=new H.New$5();},o);p.Equals=function(bT,bU){var bV,bW,bX,bY;if(bT===bU)return true;else{bV=typeof bT;if(bV=="object"){if(bT===null||bT===void 0||bU===null||bU===void 0)return false;else if("Equals"in bT)return bT.Equals(bU);else if(bT instanceof a.Array&&bU instanceof a.Array)return p.arrayEquals(bT,bU);else if(bT instanceof a.Date&&bU instanceof a.Date)return p.dateEquals(bT,bU);else{bW=[true];for(var bZ in bT)if(function(b0){bW[0]=!bT.hasOwnProperty(b0)||bU.hasOwnProperty(b0)&&p.Equals(bT[b0],bU[b0]);return!bW[0];}(bZ))break;if(bW[0]){for(var b0 in bU)if(function(b1){bW[0]=!bU.hasOwnProperty(b1)||bT.hasOwnProperty(b1);return!bW[0];}(b0))break;}return bW[0];}}else return bV=="function"&&("$Func"in bT?bT.$Func===bU.$Func&&bT.$Target===bU.$Target:"$Invokes"in bT&&"$Invokes"in bU&&p.arrayEquals(bT.$Invokes,bU.$Invokes));}};p.arrayEquals=function(bT,bU){var bV,bW;if(m.length(bT)===m.length(bU)){bV=true;bW=0;while(bV&&bW<m.length(bT)){!p.Equals(m.get(bT,bW),m.get(bU,bW))?bV=false:void 0;bW=bW+1;}return bV;}else return false;};p.dateEquals=function(bT,bU){return bT.getTime()===bU.getTime();};p.Hash=function(bT){var bU;bU=typeof bT;return bU=="function"?0:bU=="boolean"?bT?1:0:bU=="number"?bT:bU=="string"?p.hashString(bT):bU=="object"?bT==null?0:bT instanceof a.Array?p.hashArray(bT):p.hashObject(bT):0;};p.hashString=function(bT){var bU,bV,bW;if(bT===null)return 0;else{bU=5381;for(bV=0,bW=bT.length-1;bV<=bW;bV++)bU=p.hashMix(bU,bT[bV].charCodeAt());return bU;}};p.hashArray=function(bT){var bU,bV,bW;bU=-34948909;for(bV=0,bW=m.length(bT)-1;bV<=bW;bV++)bU=p.hashMix(bU,p.Hash(m.get(bT,bV)));return bU;};p.hashObject=function(bT){var bU,bV;if("GetHashCode"in bT)return bT.GetHashCode();else{bU=[0];for(var bW in bT)if(function(bX){bU[0]=p.hashMix(p.hashMix(bU[0],p.hashString(bX)),p.Hash(bT[bX]));return false;}(bW))break;return bU[0];}};p.hashMix=function(bT,bU){return(bT<<5)+bT+bU;};p.Compare=function(bT,bU){var bV,bW,bX,bY,bZ,b0;if(bT===bU)return 0;else{bW=typeof bT;switch(bW=="function"?1:bW=="boolean"?2:bW=="number"?2:bW=="string"?2:bW=="object"?3:0){case 0:return typeof bU=="undefined"?0:-1;case 1:return h.FailWith("Cannot compare function values.");case 2:return bT<bU?-1:1;case 3:if(bT===null)bX=-1;else if(bU===null)bX=1;else if("CompareTo"in bT)bX=bT.CompareTo(bU);else if("CompareTo0"in bT)bX=bT.CompareTo0(bU);else if(bT instanceof a.Array&&bU instanceof a.Array)bX=p.compareArrays(bT,bU);else if(bT instanceof a.Date&&bU instanceof a.Date)bX=p.compareDates(bT,bU);else{bY=[0];for(var b1 in bT)if(function(b2){return!bT.hasOwnProperty(b2)?false:!bU.hasOwnProperty(b2)?(bY[0]=1,true):(bY[0]=p.Compare(bT[b2],bU[b2]),bY[0]!==0);}(b1))break;if(bY[0]===0){for(var b2 in bU)if(function(b3){return!bU.hasOwnProperty(b3)?false:!bT.hasOwnProperty(b3)&&(bY[0]=-1,true);}(b2))break;}bX=bY[0];}return bX;}}};p.compareArrays=function(bT,bU){var bV,bW;if(m.length(bT)<m.length(bU))return -1;else if(m.length(bT)>m.length(bU))return 1;else{bV=0;bW=0;while(bV===0&&bW<m.length(bT)){bV=p.Compare(m.get(bT,bW),m.get(bU,bW));bW=bW+1;}return bV;}};p.compareDates=function(bT,bU){return p.Compare(bT.getTime(),bU.getTime());};q.listitem=function(bT){B.LoadLocalTemplates("index");return bT?B.NamedTemplate("index",{$:1,$0:"listitem"},bT):void 0;};q.main=function(bT){B.LoadLocalTemplates("index");return bT?B.NamedTemplate("index",{$:1,$0:"main"},bT):void 0;};r.EventQ2=function(bT,bU,bV,bW){return{$:5,$0:bU,$1:function(bX){return function(bY){return bW({Vars:bV(),Target:bX,Event:bY});};}};};r.CompleteHoles=function(bT,bU,bV){var bX,bY,bZ,b0,b1;function bW(b2,b3){var b4;return bY.Contains(b2)?null:(b4=b3===0?P.GetOrAddHoleFor(bT,b2,function(){return{$:8,$0:b2,$1:g.Create$1("")};}):b3===1?P.GetOrAddHoleFor(bT,b2,function(){return{$:13,$0:b2,$1:g.Create$1(0)};}):b3===2?P.GetOrAddHoleFor(bT,b2,function(){return{$:9,$0:b2,$1:g.Create$1(false)};}):h.FailWith("Invalid value type"),(bX.set_Item(b2,b4),{$:1,$0:b4}));}bX=new H.New$5();bY=new N.New$3();bZ=U.Get(bU);try{while(bZ.MoveNext()){b0=bZ.Current();b1=b0.$0;bY.Add(b1);bX.set_Item(b1,b0);}}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}return[O.append(bU,m.choose(function(b2){return bW(b2[0],b2[1]);},bV)),{$:0,$0:bX}];};s=f.Var=bP.Class({},e,s);s.New=bP.Ctor(function(){e.New.call(this);},s);t=f.ConcreteVar=bP.Class({Get:function(){return this.current;},Set:function(bT){if(this.isConst)(function(bU){return bU("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bU){bQ.log(bU);}));else{u.Obsolete(this.snap);this.current=bT;this.snap=u.New({$:2,$0:bT,$1:[]});}},get_View:function(){return this.view;},UpdateMaybe:function(bT){var bU;bU=bT(this.Get());bU!=null&&bU.$==1?this.Set(bU.$0):void 0;}},s,t);t.New=bP.Ctor(function(bT,bU,bV){var bW;bW=this;s.New.call(this);this.isConst=bT;this.current=bV;this.snap=bU;this.view=function(){return bW.snap;};this.id=G.Int();},t);u.Map=function(bT,bU){var bV,bW;bV=bU.s;return bV!=null&&bV.$==0?u.New({$:0,$0:bT(bV.$0)}):(bW=u.New({$:3,$0:[],$1:[]}),(u.When(bU,function(bX){u.MarkDone(bW,bU,bT(bX));},bW),bW));};u.WhenRun=function(bT,bU,bV){var bW;bW=bT.s;bW==null?bV():bW!=null&&bW.$==2?(bW.$1.push(bV),bU(bW.$0)):bW!=null&&bW.$==3?(bW.$0.push(bU),bW.$1.push(bV)):bU(bW.$0);};u.WhenObsoleteRun=function(bT,bU){var bV;bV=bT.s;bV==null?bU():bV!=null&&bV.$==2?bV.$1.push(bU):bV!=null&&bV.$==3?bV.$1.push(bU):void 0;};u.When=function(bT,bU,bV){var bW;bW=bT.s;bW==null?u.Obsolete(bV):bW!=null&&bW.$==2?(u.EnqueueSafe(bW.$1,bV),bU(bW.$0)):bW!=null&&bW.$==3?(bW.$0.push(bU),u.EnqueueSafe(bW.$1,bV)):bU(bW.$0);};u.MarkDone=function(bT,bU,bV){var bW;if(bW=bU.s,bW!=null&&bW.$==0)u.MarkForever(bT,bV);else u.MarkReady(bT,bV);};u.Map3=function(bT,bU,bV,bW){var bX,bY,bZ,b0;function b1(b2){var b3,b4,b5,b6;if(!(b3=b0.s,b3!=null&&b3.$==0||b3!=null&&b3.$==2)){b4=u.ValueAndForever(bU);b5=u.ValueAndForever(bV);b6=u.ValueAndForever(bW);b4!=null&&b4.$==1?b5!=null&&b5.$==1?b6!=null&&b6.$==1?b4.$0[1]&&b5.$0[1]&&b6.$0[1]?u.MarkForever(b0,bT(b4.$0[0],b5.$0[0],b6.$0[0])):u.MarkReady(b0,bT(b4.$0[0],b5.$0[0],b6.$0[0])):void 0:void 0:void 0;}}bX=bU.s;bY=bV.s;bZ=bW.s;return bX!=null&&bX.$==0?bY!=null&&bY.$==0?bZ!=null&&bZ.$==0?u.New({$:0,$0:bT(bX.$0,bY.$0,bZ.$0)}):u.Map3Opt1(bT,bX.$0,bY.$0,bW):bZ!=null&&bZ.$==0?u.Map3Opt2(bT,bX.$0,bZ.$0,bV):u.Map3Opt3(bT,bX.$0,bV,bW):bY!=null&&bY.$==0?bZ!=null&&bZ.$==0?u.Map3Opt4(bT,bY.$0,bZ.$0,bU):u.Map3Opt5(bT,bY.$0,bU,bW):bZ!=null&&bZ.$==0?u.Map3Opt6(bT,bZ.$0,bU,bV):(b0=u.New({$:3,$0:[],$1:[]}),(u.When(bU,b1,b0),u.When(bV,b1,b0),u.When(bW,b1,b0),b0));};u.Sequence=function(bT){var bU,bV,bW;function bX(bY){var bZ;if(bW[0]===0){bZ=m.map(function(b0){var b1;b1=b0.s;return b1!=null&&b1.$==0?b1.$0:b1!=null&&b1.$==2?b1.$0:h.FailWith("value not found by View.Sequence");},bU);m.forall(function(b0){var b1;b1=b0.s;return b1!=null&&b1.$==0;},bU)?u.MarkForever(bV,bZ):u.MarkReady(bV,bZ);}else bW[0]--;}bU=m.ofSeq(bT);return bU.length==0?u.New({$:0,$0:[]}):(bV=u.New({$:3,$0:[],$1:[]}),(bW=[m.length(bU)-1],(m.iter(function(bY){u.When(bY,bX,bV);},bU),bV)));};u.Map2=function(bT,bU,bV){var bW,bX,bY;function bZ(b0){var b1,b2,b3;if(!(b1=bY.s,b1!=null&&b1.$==0||b1!=null&&b1.$==2)){b2=u.ValueAndForever(bU);b3=u.ValueAndForever(bV);b2!=null&&b2.$==1?b3!=null&&b3.$==1?b2.$0[1]&&b3.$0[1]?u.MarkForever(bY,bT(b2.$0[0],b3.$0[0])):u.MarkReady(bY,bT(b2.$0[0],b3.$0[0])):void 0:void 0;}}bW=bU.s;bX=bV.s;return bW!=null&&bW.$==0?bX!=null&&bX.$==0?u.New({$:0,$0:bT(bW.$0,bX.$0)}):u.Map2Opt1(bT,bW.$0,bV):bX!=null&&bX.$==0?u.Map2Opt2(bT,bX.$0,bU):(bY=u.New({$:3,$0:[],$1:[]}),(u.When(bU,bZ,bY),u.When(bV,bZ,bY),bY));};u.Map2Unit=function(bT,bU){var bV,bW,bX;function bY(){var bZ,b0,b1;if(!(bZ=bX.s,bZ!=null&&bZ.$==0||bZ!=null&&bZ.$==2)){b0=u.ValueAndForever(bT);b1=u.ValueAndForever(bU);b0!=null&&b0.$==1?b1!=null&&b1.$==1?b0.$0[1]&&b1.$0[1]?u.MarkForever(bX,null):u.MarkReady(bX,null):void 0:void 0;}}bV=bT.s;bW=bU.s;return bV!=null&&bV.$==0?bW!=null&&bW.$==0?u.New({$:0,$0:null}):bU:bW!=null&&bW.$==0?bT:(bX=u.New({$:3,$0:[],$1:[]}),(u.When(bT,bY,bX),u.When(bU,bY,bX),bX));};u.Copy=function(bT){var bU,bV,bW;bU=bT.s;return bU==null?bT:bU!=null&&bU.$==2?(bV=u.New({$:2,$0:bU.$0,$1:[]}),(u.WhenObsolete(bT,bV),bV)):bU!=null&&bU.$==3?(bW=u.New({$:3,$0:[],$1:[]}),(u.When(bT,function(bX){u.MarkDone(bW,bT,bX);},bW),bW)):bT;};u.EnqueueSafe=function(bT,bU){var bV,bW,bX,bY;bT.push(bU);if(bT.length%20===0){bV=bT.slice(0);bG.Clear(bT);for(bW=0,bX=m.length(bV)-1;bW<=bX;bW++){bY=m.get(bV,bW);typeof bY=="object"?function(bZ){if(bZ.s)bT.push(bZ);}(bY):function(bZ){bT.push(bZ);}(bY);}}else void 0;};u.MarkForever=function(bT,bU){var bV,bW,bX,bY;bV=bT.s;if(bV!=null&&bV.$==3){bT.s={$:0,$0:bU};bW=bV.$0;for(bX=0,bY=m.length(bW)-1;bX<=bY;bX++)(m.get(bW,bX))(bU);}else void 0;};u.MarkReady=function(bT,bU){var bV,bW,bX,bY;bV=bT.s;if(bV!=null&&bV.$==3){bT.s={$:2,$0:bU,$1:bV.$1};bW=bV.$0;for(bX=0,bY=m.length(bW)-1;bX<=bY;bX++)(m.get(bW,bX))(bU);}else void 0;};u.Join=function(bT){var bU;bU=u.New({$:3,$0:[],$1:[]});u.When(bT,function(bV){var bW;bW=bV();u.When(bW,function(bX){var bY,bZ;if((bY=bW.s,bY!=null&&bY.$==0)&&(bZ=bT.s,bZ!=null&&bZ.$==0))u.MarkForever(bU,bX);else u.MarkReady(bU,bX);},bU);},bU);return bU;};u.Map3Opt1=function(bT,bU,bV,bW){return u.Map(function(bX){return bT(bU,bV,bX);},bW);};u.Map3Opt2=function(bT,bU,bV,bW){return u.Map(function(bX){return bT(bU,bX,bV);},bW);};u.Map3Opt3=function(bT,bU,bV,bW){return u.Map2(function(bX,bY){return bT(bU,bX,bY);},bV,bW);};u.Map3Opt4=function(bT,bU,bV,bW){return u.Map(function(bX){return bT(bX,bU,bV);},bW);};u.Map3Opt5=function(bT,bU,bV,bW){return u.Map2(function(bX,bY){return bT(bX,bU,bY);},bV,bW);};u.Map3Opt6=function(bT,bU,bV,bW){return u.Map2(function(bX,bY){return bT(bX,bY,bU);},bV,bW);};u.ValueAndForever=function(bT){var bU;bU=bT.s;return bU!=null&&bU.$==0?{$:1,$0:[bU.$0,true]}:bU!=null&&bU.$==2?{$:1,$0:[bU.$0,false]}:null;};u.Map2Opt1=function(bT,bU,bV){return u.Map(function(bW){return bT(bU,bW);},bV);};u.Map2Opt2=function(bT,bU,bV){return u.Map(function(bW){return bT(bW,bU);},bV);};u.WhenObsolete=function(bT,bU){var bV;bV=bT.s;bV==null?u.Obsolete(bU):bV!=null&&bV.$==2?u.EnqueueSafe(bV.$1,bU):bV!=null&&bV.$==3?u.EnqueueSafe(bV.$1,bU):void 0;};w.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bT){var bU,bV;bU=bR.random()*16|0;bV=bT=="x"?bU:bU&3|8;return bV.toString(16);});};y=x.List=bP.Class({GetEnumerator:function(){return U.Get(this);},GetEnumerator0:function(){return U.Get0(this);}},null,y);z.$cctor=function(){z.$cctor=a.ignore;z.People=o.FromSeq(["John","Paul"]);};B.LoadLocalTemplates=function(bT){!B.LocalTemplatesLoaded()?(B.set_LocalTemplatesLoaded(true),B.LoadNestedTemplates(self.document.body,"")):void 0;B.LoadedTemplates().set_Item(bT,B.LoadedTemplateFile(""));};B.NamedTemplate=function(bT,bU,bV){var bW,bX;bW=(bX=null,[B.LoadedTemplateFile(bT).TryGetValue(bU==null?"":bU.$0,{get:function(){return bX;},set:function(bY){bX=bY;}}),bX]);return bW[0]?B.ChildrenTemplate(bW[1].cloneNode(true),bV):(bQ.warn("Local template doesn't exist",bU),C.get_Empty());};B.LocalTemplatesLoaded=function(){W.$cctor();return W.LocalTemplatesLoaded;};B.set_LocalTemplatesLoaded=function(bT){W.$cctor();W.LocalTemplatesLoaded=bT;};B.LoadNestedTemplates=function(bT,bU){var bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8;function bV(b9){var b_,b$;if(!bW.ContainsKey(b9)){b_=(b$=null,[bX.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);b_[0]?(b8.Add(b9),bX.Remove(b9),B.PrepareTemplateStrict(bU,{$:1,$0:b9},b_[1],{$:1,$0:bV})):bQ.warn(b8.Contains(b9)?"Encountered loop when instantiating "+b9:"Local template does not exist: "+b9);}}bW=B.LoadedTemplateFile(bU);bX=new H.New$5();bY=bT.querySelectorAll("[ws-template]");for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++){b1=bY[bZ];b2=b1.getAttribute("ws-template").toLowerCase();b1.removeAttribute("ws-template");bX.set_Item(b2,B.FakeRootSingle(b1));}b3=bT.querySelectorAll("[ws-children-template]");for(b4=0,b5=b3.length-1;b4<=b5;b4++){b6=b3[b4];b7=b6.getAttribute("ws-children-template").toLowerCase();b6.removeAttribute("ws-children-template");bX.set_Item(b7,B.FakeRoot(b6));}b8=new N.New$3();while(bX.count>0)bV(O.head(bX.get_Keys()));};B.LoadedTemplates=function(){W.$cctor();return W.LoadedTemplates;};B.LoadedTemplateFile=function(bT){var bU,bV,bW;bU=(bV=null,[B.LoadedTemplates().TryGetValue(bT,{get:function(){return bV;},set:function(bX){bV=bX;}}),bV]);return bU[0]?bU[1]:(bW=new H.New$5(),(B.LoadedTemplates().set_Item(bT,bW),bW));};B.ChildrenTemplate=function(bT,bU){var bV,bW,bX,bY,bZ;bV=B.InlineTemplate(bT,O.append(bU,B.GlobalHoles().get_Values()));bW=bV[1];bX=bV[0];bY=bX.Els;return!p.Equals(bY,null)&&bY.length===1&&(m.get(bY,0)instanceof R&&(p.Equals(m.get(bY,0).nodeType,R.ELEMENT_NODE)&&(bZ=m.get(bY,0),true)))?_3.TreeNode(bX,bW):C.Mk({$:6,$0:bX},bW);};B.FakeRootSingle=function(bT){var bU,bV,bW,bX;bT.removeAttribute("ws-template");bU=bT.getAttribute("ws-replace");bU===null?void 0:(bT.removeAttribute("ws-replace"),bV=bT.parentNode,p.Equals(bV,null)?void 0:(bW=self.document.createElement(bT.tagName),bW.setAttribute("ws-replace",bU),bV.replaceChild(bW,bT)));bX=self.document.createElement("div");bX.appendChild(bT);return bX;};B.FakeRoot=function(bT){var bU;bU=self.document.createElement("div");while(bT.hasChildNodes())bU.appendChild(bT.firstChild);return bU;};B.PrepareTemplateStrict=function(bT,bU,bV,bW){var bX;function bY(b3,b4){var b5,b6,b7,b8,b9,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct;function b_(cu){}while(true)switch(b3){case 0:if(b4!==null){b5=b4.nextSibling;if(p.Equals(b4.nodeType,R.TEXT_NODE))_4.convertTextNode(b4);else if(p.Equals(b4.nodeType,R.ELEMENT_NODE))b0(b4);b4=b5;}else return null;break;case 1:b$=_5.string(b4.nodeName,{$:1,$0:3},null).toLowerCase();ca=(b6=b$.indexOf("."),b6===-1?[bT,b$]:[_5.string(b$,null,{$:1,$0:b6-1}),_5.string(b$,{$:1,$0:b6+1},null)]);cb=ca[1];cc=ca[0];if(cc!==""&&!B.LoadedTemplates().ContainsKey(cc))return _4.failNotLoaded(cb);else{if(cc===""&&bW!=null)bW.$0(cb);cd=B.LoadedTemplates().get_Item(cc);if(!cd.ContainsKey(cb))return _4.failNotLoaded(cb);else{ce=cd.get_Item(cb);cf=ce.cloneNode(true);cg=new N.New$3();ch=new H.New$5();ci=b4.attributes;for(cj=0,ck=ci.length-1;cj<=ck;cj++){cl=ci.item(cj).name.toLowerCase();ch.set_Item(cl,(cm=ci.item(cj).nodeValue,cm===""?cl:cm.toLowerCase()));!cg.Add(cl)?bQ.warn("Hole mapped twice",cl):void 0;}for(cn=0,co=b4.childNodes.length-1;cn<=co;cn++){cp=b4.childNodes[cn];p.Equals(cp.nodeType,R.ELEMENT_NODE)?!cg.Add(cp.nodeName.toLowerCase())?bQ.warn("Hole filled twice",cb):void 0:void 0;}cq=b4.childNodes.length===1&&p.Equals(b4.firstChild.nodeType,R.TEXT_NODE);if(cq){b8=_4.fillTextHole(cf,b4.firstChild.textContent,cb);((function(cu){return function(cv){if(cv!=null)cu(cv.$0);};}((b9=function(cu){return function(cv){return cu.Add(cv);};}(cg),function(cu){return b_(b9(cu));})))(b8));}_4.removeHolesExcept(cf,cg);if(!cq){for(cr=0,cs=b4.childNodes.length-1;cr<=cs;cr++){ct=b4.childNodes[cr];p.Equals(ct.nodeType,R.ELEMENT_NODE)?ct.hasAttributes()?_4.fillInstanceAttrs(cf,ct):bZ(cf,ct):void 0;}}_4.mapHoles(cf,ch);_4.fill(cf,b4.parentNode,b4);b4.parentNode.removeChild(b4);return;}}break;}}function bZ(b3,b4){var b5,b7,b8;function b6(b9,b_){var b$;if(b7==="title"&&b4.hasChildNodes()){b$=_6.ParseHTMLIntoFakeRoot(b4.textContent);b4.removeChild(b4.firstChild);while(b$.hasChildNodes())b4.appendChild(b$.firstChild);}else null;b0(b4);return _4.fill(b4,b9,b_);}b7=b4.nodeName.toLowerCase();B.foreachNotPreserved(b3,"[ws-attr-holes]",function(b9){var b_,b$,ca,cb,cc;b_=bh.SplitChars(b9.getAttribute("ws-attr-holes"),[" "],1);for(b$=0,ca=b_.length-1;b$<=ca;b$++){cb=m.get(b_,b$);b9.setAttribute(cb,(cc=new a.RegExp("\\${"+b7+"}","ig"),b9.getAttribute(cb).replace(cc,b4.textContent)));}});b8=b3.querySelector("[ws-hole="+b7+"]");if(p.Equals(b8,null)){b5=b3.querySelector("[ws-replace="+b7+"]");return p.Equals(b5,null)?null:(b6(b5.parentNode,b5),void b5.parentNode.removeChild(b5));}else{while(b8.hasChildNodes())b8.removeChild(b8.lastChild);b8.removeAttribute("ws-hole");return b6(b8,null);}}function b0(b3){if(!b3.hasAttribute("ws-preserve"))if(bh.StartsWith(b3.nodeName.toLowerCase(),"ws-"))b2(b3);else{_4.convertAttrs(b3);b1(b3.firstChild);}}function b1(b3){return bY(0,b3);}function b2(b3){return bY(1,b3);}bX=(bU==null?"":bU.$0).toLowerCase();B.LoadedTemplateFile(bT).set_Item(bX,bV);bV.hasChildNodes()?(function(b3){var b4,b5,b6,b7;while(true){b4=b3.querySelector("[ws-template]");if(p.Equals(b4,null)){b5=b3.querySelector("[ws-children-template]");if(p.Equals(b5,null))return null;else{b6=b5.getAttribute("ws-children-template");b5.removeAttribute("ws-children-template");B.PrepareTemplateStrict(bT,{$:1,$0:b6},b5,null);b3=b3;}}else{b7=b4.getAttribute("ws-template");(B.PrepareSingleTemplate(bT,{$:1,$0:b7},b4))(null);b3=b3;}}}(bV),b1(bV.firstChild)):void 0;};B.InlineTemplate=function(bT,bU){var bV,bW,bX,bY,b1,b2,b3,b4,b5,b6,b7;function bZ(b8,b9){var b_,b$,ca;b_=bd.Insert(b8,b9);b2.push(bd.Updates(b_));b3.push([b8,b_]);b$=bP.GetOptional(b_.OnAfterRender);return b$==null?null:(ca=b$.$0,void b4.push(function(){ca(b8);}));}function b0(b8){var b9,b_;b9=(b_=null,[b5.TryGetValue(b8,{get:function(){return b_;},set:function(b$){b_=b$;}}),b_]);return b9[0]?b9[1].$==0?{$:1,$0:b9[1].$1}:b9[1].$==1?{$:1,$0:C.TextNode(b9[1].$1)}:b9[1].$==2?{$:1,$0:C.TextView(b9[1].$1)}:b9[1].$==8?{$:1,$0:C.TextView(b9[1].$1.get_View())}:b9[1].$==9?{$:1,$0:C.TextView(I.Map(a.String,b9[1].$1.get_View()))}:b9[1].$==10?{$:1,$0:C.TextView(I.Map(function(b$){return b$.get_Input();},b9[1].$1.get_View()))}:b9[1].$==11?{$:1,$0:C.TextView(I.Map(a.String,b9[1].$1.get_View()))}:b9[1].$==12?{$:1,$0:C.TextView(I.Map(function(b$){return b$.get_Input();},b9[1].$1.get_View()))}:b9[1].$==13?{$:1,$0:C.TextView(I.Map(a.String,b9[1].$1.get_View()))}:(bQ.warn("Content hole filled with attribute data",b8),null):null;}b1=[];b2=[];b3=[];b4=[];b5=new H.New$5();b6=U.Get(bU);try{while(b6.MoveNext()){b7=b6.Current();b5.set_Item(b7.$0,b7);}}finally{if(typeof b6=="object"&&"Dispose"in b6)b6.Dispose();}bV=_6.ChildrenArray(bT);B.foreachNotPreserved(bT,"[ws-hole]",function(b8){var b9,b_,b$;b$=b8.getAttribute("ws-hole");b8.removeAttribute("ws-hole");while(b8.hasChildNodes())b8.removeChild(b8.lastChild);b9=b0(b$);b9!=null&&b9.$==1?(b_=b9.$0,Y.LinkElement(b8,b_.docNode),b1.push(_0.New(bd.Empty(b8),b_.docNode,null,b8,G.Int(),null)),b2.push(b_.updates)):void 0;});B.foreachNotPreserved(bT,"[ws-replace]",function(b8){var b9,b_,b$,ca,cb,cc;b9=b0(b8.getAttribute("ws-replace"));b9!=null&&b9.$==1?(b_=b9.$0,b$=b8.parentNode,ca=self.document.createTextNode(""),b$.replaceChild(ca,b8),cb=Y.InsertBeforeDelim(ca,b_.docNode),cc=m.tryFindIndex(function(cd){return b8===cd;},bV),cc==null?void 0:m.set(bV,cc.$0,b_.docNode),b1.push(_0.New(bd.Empty(b$),b_.docNode,{$:1,$0:[cb,ca]},b$,G.Int(),null)),b2.push(b_.updates)):void 0;});B.foreachNotPreserved(bT,"[ws-attr]",function(b8){var b9,b_,b$;b9=b8.getAttribute("ws-attr");b8.removeAttribute("ws-attr");b_=(b$=null,[b5.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);b_[0]?b_[1].$==3?bZ(b8,b_[1].$1):bQ.warn("Attribute hole filled with non-attribute data",b9):void 0;});B.foreachNotPreserved(bT,"[ws-on]",function(b8){bZ(b8,K.Concat(m.choose(function(b9){var b_,b$,ca;b_=bh.SplitChars(b9,[":"],1);b$=(ca=null,[b5.TryGetValue(m.get(b_,1),{get:function(){return ca;},set:function(cb){ca=cb;}}),ca]);return b$[0]?b$[1].$==4?{$:1,$0:be.Handler(m.get(b_,0),b$[1].$1)}:b$[1].$==5?{$:1,$0:K.Handler(m.get(b_,0),b$[1].$1)}:(bQ.warn("Event hole on"+m.get(b_,0)+" filled with non-event data",m.get(b_,1)),null):null;},bh.SplitChars(b8.getAttribute("ws-on"),[" "],1))));b8.removeAttribute("ws-on");});B.foreachNotPreserved(bT,"[ws-onafterrender]",function(b8){var b9,b_,b$;b9=b8.getAttribute("ws-onafterrender");b_=(b$=null,[b5.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);b_[0]?b_[1].$==6?(b8.removeAttribute("ws-onafterrender"),bZ(b8,be.OnAfterRender(b_[1].$1))):b_[1].$==7?(b8.removeAttribute("ws-onafterrender"),bZ(b8,be.OnAfterRender(b_[1].$1))):bQ.warn("onafterrender hole filled with non-onafterrender data",b9):void 0;});B.foreachNotPreserved(bT,"[ws-var]",function(b8){var b9,b_,b$;b9=b8.getAttribute("ws-var");b8.removeAttribute("ws-var");b_=(b$=null,[b5.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);b_[0]?b_[1].$==8?bZ(b8,be.Value(b_[1].$1)):b_[1].$==9?bZ(b8,be.Checked(b_[1].$1)):b_[1].$==10?bZ(b8,be.IntValue(b_[1].$1)):b_[1].$==11?bZ(b8,be.IntValueUnchecked(b_[1].$1)):b_[1].$==12?bZ(b8,be.FloatValue(b_[1].$1)):b_[1].$==13?bZ(b8,be.FloatValueUnchecked(b_[1].$1)):bQ.warn("Var hole filled with non-Var data",b9):void 0;});B.foreachNotPreserved(bT,"[ws-attr-holes]",function(b8){var b9,b_,b$,ca;b9=new a.RegExp(B.TextHoleRE(),"g");b_=bh.SplitChars(b8.getAttribute("ws-attr-holes"),[" "],1);b8.removeAttribute("ws-attr-holes");for(b$=0,ca=b_.length-1;b$<=ca;b$++)(function(){var cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn;ck=m.get(b_,b$);cl=b8.getAttribute(ck);cb=null;cc=0;cm=[];while(cb=b9.exec(cl),cb!==null){cn=_5.string(cl,{$:1,$0:cc},{$:1,$0:b9.lastIndex-m.get(cb,0).length-1});cc=b9.lastIndex;cm.push([cn,m.get(cb,1)]);}ce=_5.string(cl,{$:1,$0:cc},null);b9.lastIndex=0;cf=m.foldBack(function(co,cp){return(function(cq){var cr,cs;cr=cq[0];cs=cq[1];return function(ct){var cu,cv,cw,cx,cy;cu=ct[0];cv=ct[1];cw=(cx=(cy=null,[b5.TryGetValue(cs,{get:function(){return cy;},set:function(cz){cy=cz;}}),cy]),cx[0]?cx[1].$==1?{$:0,$0:cx[1].$1}:cx[1].$==2?{$:1,$0:cx[1].$1}:cx[1].$==8?{$:1,$0:cx[1].$1.get_View()}:cx[1].$==9?{$:1,$0:I.Map(a.String,cx[1].$1.get_View())}:cx[1].$==10?{$:1,$0:I.Map(function(cz){return cz.get_Input();},cx[1].$1.get_View())}:cx[1].$==11?{$:1,$0:I.Map(a.String,cx[1].$1.get_View())}:cx[1].$==12?{$:1,$0:I.Map(function(cz){return cz.get_Input();},cx[1].$1.get_View())}:cx[1].$==13?{$:1,$0:I.Map(a.String,cx[1].$1.get_View())}:(bQ.warn("Attribute value hole filled with non-text data",cs),{$:0,$0:""}):{$:0,$0:""});return cw.$==1?[cr,new bg({$:1,$0:cu===""?cw.$0:I.Map(function(cz){return cz+cu;},cw.$0),$1:cv})]:[cr+cw.$0+cu,cv];};}(co))(cp);},cm,[ce,bg.Empty]);return bZ(b8,cf[1].$==1?cf[1].$1.$==1?cf[1].$1.$1.$==1?cf[1].$1.$1.$1.$==0?(cg=cf[0],be.Dynamic(ck,I.Map3(function(co,cp,cq){return cg+co+cp+cq;},cf[1].$0,cf[1].$1.$0,cf[1].$1.$1.$0))):(ch=cf[0],be.Dynamic(ck,I.Map(function(co){return ch+bh.concat("",co);},I.Sequence(cf[1])))):(ci=cf[0],be.Dynamic(ck,I.Map2(function(co,cp){return ci+co+cp;},cf[1].$0,cf[1].$1.$0))):cf[0]===""?be.Dynamic(ck,cf[1].$0):(cj=cf[0],be.Dynamic(ck,I.Map(function(co){return cj+co;},cf[1].$0))):K.Create(ck,cf[0]));}());});return[bP.DeleteEmptyFields({Els:bV,Dirty:true,Holes:b1,Attrs:b3,Render:(bW=b4.length==0?null:{$:1,$0:function(b8){m.iter(function(b9){b9(b8);},b4);}},bW?bW.$0:void 0),El:(bX=!p.Equals(bV,null)&&bV.length===1&&(m.get(bV,0)instanceof R&&(m.get(bV,0)instanceof a.Element&&(bY=m.get(bV,0),true)))?{$:1,$0:bY}:null,bX?bX.$0:void 0)},["Render","El"]),bb.TreeReduce(I.Const(),I.Map2Unit,b2)];};B.GlobalHoles=function(){W.$cctor();return W.GlobalHoles;};B.foreachNotPreserved=function(bT,bU,bV){_6.IterSelector(bT,bU,function(bW){if(bW.closest("[ws-preserve]")==null)bV(bW);});};B.PrepareSingleTemplate=function(bT,bU,bV){var bW;bW=B.FakeRootSingle(bV);return function(bX){B.PrepareTemplateStrict(bT,bU,bW,bX);};};B.TextHoleRE=function(){W.$cctor();return W.TextHoleRE;};C=f.Doc=bP.Class({},e,C);C.RunById=function(bT,bU){var bV;bV=self.document.getElementById(bT);p.Equals(bV,null)?h.FailWith("invalid id: "+bT):C.Run(bV,bU);};C.Convert=function(bT,bU){return C.Flatten(I.MapSeqCached(bT,bU));};C.Run=function(bT,bU){Y.LinkElement(bT,bU.docNode);C.RunInPlace(false,bT,bU);};C.Flatten=function(bT){return C.EmbedView(I.Map(C.Concat,bT));};C.get_Empty=function(){return C.Mk(null,I.Const());};C.RunInPlace=function(bT,bU,bV){var bW;bW=Y.CreateRunState(bU,bV.docNode);I.Sink(_8.get_UseAnimations()||_9.BatchUpdatesEnabled()?_.StartProcessor(Y.PerformAnimatedUpdate(bT,bW,bV.docNode)):function(){Y.PerformSyncUpdate(bT,bW,bV.docNode);},bV.updates);};C.Concat=function(bT){var bU;bU=bb.ofSeqNonCopying(bT);return bb.TreeReduce(C.get_Empty(),C.Append,bU);};C.EmbedView=function(bT){var bU;bU=Y.CreateEmbedNode();return C.Mk({$:2,$0:bU},I.Map(a.ignore,I.Bind(function(bV){Y.UpdateEmbedNode(bU,bV.docNode);return bV.updates;},bT)));};C.Mk=function(bT,bU){return new C.New(bT,bU);};C.Append=function(bT,bU){return C.Mk({$:0,$0:bT.docNode,$1:bU.docNode},I.Map2Unit(bT.updates,bU.updates));};C.TextNode=function(bT){return C.Mk({$:5,$0:self.document.createTextNode(bT)},I.Const());};C.TextView=function(bT){var bU;bU=Y.CreateTextNode();return C.Mk({$:4,$0:bU},I.Map(function(bV){Y.UpdateTextNode(bU,bV);},bT));};C.New=bP.Ctor(function(bT,bU){e.New.call(this);this.docNode=bT;this.updates=bU;},C);E.NewFromSeq=function(bT){var bU,bV,bW;bU={};bV=U.Get(bT);try{while(bV.MoveNext()){bW=bV.Current();bU[bW[0]]=bW[1];}}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}return bU;};G.Int=function(){G.set_counter(G.counter()+1);return G.counter();};G.set_counter=function(bT){Z.$cctor();Z.counter=bT;};G.counter=function(){Z.$cctor();return Z.counter;};H=x.Dictionary=bP.Class({set_Item:function(bT,bU){this.set(bT,bU);},set:function(bT,bU){var bV,bW,bX,bY;bV=this;bW=this.hash(bT);bX=this.data[bW];bX==null?(this.count=this.count+1,this.data[bW]=new a.Array({K:bT,V:bU})):(bY=m.tryFindIndex(function(bZ){return bV.equals.apply(null,[(h.KeyValue(bZ))[0],bT]);},bX),bY==null?(this.count=this.count+1,bX.push({K:bT,V:bU})):bX[bY.$0]={K:bT,V:bU});},TryGetValue:function(bT,bU){var bV,bW,bX;bV=this;bW=this.data[this.hash(bT)];return bW==null?false:(bX=m.tryPick(function(bY){var bZ;bZ=h.KeyValue(bY);return bV.equals.apply(null,[bZ[0],bT])?{$:1,$0:bZ[1]}:null;},bW),bX!=null&&bX.$==1&&(bU.set(bX.$0),true));},Remove:function(bT){return this.remove(bT);},ContainsKey:function(bT){var bU,bV;bU=this;bV=this.data[this.hash(bT)];return bV==null?false:m.exists(function(bW){return bU.equals.apply(null,[(h.KeyValue(bW))[0],bT]);},bV);},get_Keys:function(){return new _7.New(this);},get_Values:function(){return new bj.New(this);},remove:function(bT){var bU,bV,bW,bX;bU=this;bV=this.hash(bT);bW=this.data[bV];return bW==null?false:(bX=m.filter(function(bY){return!bU.equals.apply(null,[(h.KeyValue(bY))[0],bT]);},bW),m.length(bX)<bW.length&&(this.count=this.count-1,this.data[bV]=bX,true));},get_Item:function(bT){return this.get(bT);},get:function(bT){var bU,bV;bU=this;bV=this.data[this.hash(bT)];return bV==null?T.notPresent():m.pick(function(bW){var bX;bX=h.KeyValue(bW);return bU.equals.apply(null,[bX[0],bT])?{$:1,$0:bX[1]}:null;},bV);},GetEnumerator:function(){return U.Get0(this);},GetEnumerator0:function(){return U.Get0(m.concat(S.GetFieldValues(this.data)));}},e,H);H.New$5=bP.Ctor(function(){H.New$6.call(this,[],p.Equals,p.Hash);},H);H.New$6=bP.Ctor(function(bT,bU,bV){var bW,bX;e.New.call(this);this.equals=bU;this.hash=bV;this.count=0;this.data=[];bW=U.Get(bT);try{while(bW.MoveNext()){bX=bW.Current();this.set(bX.K,bX.V);}}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}},H);I=f.View=bP.Class({},null,I);u.Obsolete=function(bT){var bU,bV,bW,bX,bY;bV=bT.s;if(bV==null||(bV!=null&&bV.$==2?(bU=bV.$1,false):bV!=null&&bV.$==3?(bU=bV.$1,false):true))void 0;else{bT.s=null;for(bW=0,bX=m.length(bU)-1;bW<=bX;bW++){bY=m.get(bU,bW);typeof bY=="object"?function(bZ){u.Obsolete(bZ);}(bY):bY();}}};u.New=function(bT){return{s:bT};};o.FromSeq=function(bT){return o.Create(a.id,bT);};o.Create=function(bT,bU){return o.CreateWithStorage(bT,_2.InMemory(m.ofSeq(bU)));};o.CreateWithStorage=function(bT,bU){return new o.New(bT,bU);};K=f.AttrProxy=bP.Class({},null,K);K.Handler=function(bT,bU){return K.HandlerImpl(bT,bU);};K.Concat=function(bT){var bU;bU=bb.ofSeqNonCopying(bT);return bb.TreeReduce(bd.EmptyAttr(),K.Append,bU);};K.Create=function(bT,bU){return bd.Static(function(bV){bV.setAttribute(bT,bU);});};K.HandlerImpl=function(bT,bU){return bd.Static(function(bV){bV.addEventListener(bT,function(bW){return(bU(bV))(bW);},false);});};K.Append=function(bT,bU){return bd.AppendTree(bT,bU);};L=f.CheckedInput=bP.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,L);M.TryParseInt32=function(bT,bU){return M.TryParse(bT,-2147483648,2147483647,bU);};N=x.HashSet=bP.Class({Add:function(bT){return this.add(bT);},Contains:function(bT){var bU;bU=this.data[this.hash(bT)];return bU==null?false:this.arrContains(bT,bU);},add:function(bT){var bU,bV;bU=this.hash(bT);bV=this.data[bU];return bV==null?(this.data[bU]=[bT],this.count=this.count+1,true):this.arrContains(bT,bV)?false:(bV.push(bT),this.count=this.count+1,true);},arrContains:function(bT,bU){var bV,bW,bX,bY;bV=true;bW=0;bY=bU.length;while(bV&&bW<bY)if(this.equals.apply(null,[bU[bW],bT]))bV=false;else bW=bW+1;return!bV;},ExceptWith:function(bT){var bU;bU=U.Get(bT);try{while(bU.MoveNext())this.Remove(bU.Current());}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bT){var bU,bV,bW,bX;bU=0;bV=bq.concat(this.data);for(bW=0,bX=bV.length-1;bW<=bX;bW++)m.set(bT,bW,bV[bW]);},IntersectWith:function(bT){var bU,bV,bW,bX,bY;bU=new N.New$4(bT,this.equals,this.hash);bV=bq.concat(this.data);for(bW=0,bX=bV.length-1;bW<=bX;bW++){bY=bV[bW];!bU.Contains(bY)?this.Remove(bY):void 0;}},Remove:function(bT){var bU;bU=this.data[this.hash(bT)];return bU==null?false:this.arrRemove(bT,bU)&&(this.count=this.count-1,true);},arrRemove:function(bT,bU){var bV,bW,bX,bY;bV=true;bW=0;bY=bU.length;while(bV&&bW<bY)if(this.equals.apply(null,[bU[bW],bT])){bU.splice.apply(bU,[bW,1]);bV=false;}else bW=bW+1;return!bV;},GetEnumerator:function(){return U.Get(bq.concat(this.data));},GetEnumerator0:function(){return U.Get(bq.concat(this.data));}},e,N);N.New$3=bP.Ctor(function(){N.New$4.call(this,[],p.Equals,p.Hash);},N);N.New$4=bP.Ctor(function(bT,bU,bV){var bW;e.New.call(this);this.equals=bU;this.hash=bV;this.data=[];this.count=0;bW=U.Get(bT);try{while(bW.MoveNext())this.add(bW.Current());}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}},N);N.New$2=bP.Ctor(function(bT){N.New$4.call(this,bT,p.Equals,p.Hash);},N);O.append=function(bT,bU){return{GetEnumerator:function(){var bV,bW;bV=U.Get(bT);bW=[true];return new V.New(bV,null,function(bX){var bY;return bX.s.MoveNext()?(bX.c=bX.s.Current(),true):(bY=bX.s,!p.Equals(bY,null)?bY.Dispose():void 0,bX.s=null,bW[0]&&(bW[0]=false,bX.s=U.Get(bU),bX.s.MoveNext()?(bX.c=bX.s.Current(),true):(bX.s.Dispose(),bX.s=null,false)));},function(bX){var bY;bY=bX.s;!p.Equals(bY,null)?bY.Dispose():void 0;});}};};O.head=function(bT){var bU;bU=U.Get(bT);try{return bU.MoveNext()?bU.Current():O.insufficient();}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}};O.fold=function(bT,bU,bV){var bW,bX;bW=bU;bX=U.Get(bV);try{while(bX.MoveNext())bW=bT(bW,bX.Current());return bW;}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}};O.distinctBy=function(bT,bU){return{GetEnumerator:function(){var bV,bW;bV=U.Get(bU);bW=new N.New$3();return new V.New(null,null,function(bX){var bY,bZ;if(bV.MoveNext()){bY=bV.Current();bZ=bW.Add(bT(bY));while(!bZ&&bV.MoveNext()){bY=bV.Current();bZ=bW.Add(bT(bY));}return bZ&&(bX.c=bY,true);}else return false;},function(){bV.Dispose();});}};};O.iter=function(bT,bU){var bV;bV=U.Get(bU);try{while(bV.MoveNext())bT(bV.Current());}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}};O.map=function(bT,bU){return{GetEnumerator:function(){var bV;bV=U.Get(bU);return new V.New(null,null,function(bW){return bV.MoveNext()&&(bW.c=bT(bV.Current()),true);},function(){bV.Dispose();});}};};O.max=function(bT){var bU,bV,bW;bU=U.Get(bT);try{if(!bU.MoveNext())O.seqEmpty();bV=bU.Current();while(bU.MoveNext()){bW=bU.Current();p.Compare(bW,bV)===1?bV=bW:void 0;}return bV;}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}};O.seqEmpty=function(){return h.FailWith("The input sequence was empty.");};O.forall=function(bT,bU){return!O.exists(function(bV){return!bT(bV);},bU);};O.exists=function(bT,bU){var bV,bW;bV=U.Get(bU);try{bW=false;while(!bW&&bV.MoveNext())bW=bT(bV.Current());return bW;}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}};m.choose=function(bT,bU){var bV,bW,bX,bY;bV=[];for(bW=0,bX=bU.length-1;bW<=bX;bW++){bY=bT(bU[bW]);bY==null?void 0:bV.push(bY.$0);}return bV;};m.tryFindIndex=function(bT,bU){var bV,bW;bV=null;bW=0;while(bW<bU.length&&bV==null){bT(bU[bW])?bV={$:1,$0:bW}:void 0;bW=bW+1;}return bV;};m.tryPick=function(bT,bU){var bV,bW,bX;bV=null;bW=0;while(bW<bU.length&&bV==null){bX=bT(bU[bW]);bX!=null&&bX.$==1?bV=bX:void 0;bW=bW+1;}return bV;};m.exists=function(bT,bU){var bV,bW,bX,bY;bV=false;bW=0;bY=m.length(bU);while(!bV&&bW<bY)if(bT(bU[bW]))bV=true;else bW=bW+1;return bV;};m.concat=function(bT){return a.Array.prototype.concat.apply([],m.ofSeq(bT));};m.ofSeq=function(bT){var bU,bV;if(bT instanceof a.Array)return bT.slice();else if(bT instanceof bg)return m.ofList(bT);else{bU=[];bV=U.Get(bT);try{while(bV.MoveNext())bU.push(bV.Current());return bU;}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}}};m.foldBack=function(bT,bU,bV){var bW,bX,bY,bZ,b0;bW=bV;bY=bU.length;for(bZ=1,b0=bY;bZ<=b0;bZ++)bW=bT(bU[bY-bZ],bW);return bW;};m.iter=function(bT,bU){var bV,bW;for(bV=0,bW=bU.length-1;bV<=bW;bV++)bT(bU[bV]);};m.map=function(bT,bU){var bV,bW,bX;bV=new a.Array(bU.length);for(bW=0,bX=bU.length-1;bW<=bX;bW++)bV[bW]=bT(bU[bW]);return bV;};m.filter=function(bT,bU){var bV,bW,bX;bV=[];for(bW=0,bX=bU.length-1;bW<=bX;bW++)if(bT(bU[bW]))bV.push(bU[bW]);return bV;};m.ofList=function(bT){var bU,bV;bV=[];bU=bT;while(!(bU.$==0)){bV.push(bf.head(bU));bU=bf.tail(bU);}return bV;};m.pick=function(bT,bU){var bV;bV=m.tryPick(bT,bU);return bV==null?h.FailWith("KeyNotFoundException"):bV.$0;};m.forall=function(bT,bU){var bV,bW,bX,bY;bV=true;bW=0;bY=m.length(bU);while(bV&&bW<bY)if(bT(bU[bW]))bW=bW+1;else bV=false;return bV;};m.create=function(bT,bU){var bV,bW,bX;bV=new a.Array(bT);for(bW=0,bX=bT-1;bW<=bX;bW++)bV[bW]=bU;return bV;};m.init=function(bT,bU){var bV,bW,bX;bT<0?h.FailWith("Negative size given."):null;bV=new a.Array(bT);for(bW=0,bX=bT-1;bW<=bX;bW++)bV[bW]=bU(bW);return bV;};P.$cctor=function(){P.$cctor=a.ignore;P.initialized=new H.New$5();};P=k.TemplateInitializer=bP.Class({},e,P);P.GetOrAddHoleFor=function(bT,bU,bV){var bW,bX,bY,bZ;P.$cctor();bW=P.GetHolesFor(bT);bX=(bY=null,[bW.TryGetValue(bU,{get:function(){return bY;},set:function(b0){bY=b0;}}),bY]);return bX[0]?bX[1]:(bZ=bV(),(bW.set_Item(bU,bZ),bZ));};P.GetHolesFor=function(bT){var bU,bV,bW;P.$cctor();bU=(bV=null,[P.initialized.TryGetValue(bT,{get:function(){return bV;},set:function(bX){bV=bX;}}),bV]);return bU[0]?bU[1]:(bW=new H.New$5(),(P.initialized.set_Item(bT,bW),bW));};S.GetFieldValues=function(bT){var bU,bV;bU=[];for(var bW in bT)bU.push(bT[bW]);return bU;};I.MapSeqCached=function(bT,bU){return I.MapSeqCachedBy(a.id,bT,bU);};I.MapSeqCachedBy=function(bT,bU,bV){var bW;bW=[new H.New$5()];return I.Map(function(bX){var bY,bZ,b0;bY=bW[0];bZ=new H.New$5();b0=bb.mapInPlace(function(b1){var b2,b3;b2=bT(b1);b3=bY.ContainsKey(b2)?bY.get_Item(b2):bU(b1);bZ.set_Item(b2,b3);return b3;},m.ofSeq(bX));bW[0]=bZ;return b0;},bV);};I.Map=function(bT,bU){return I.CreateLazy(function(){return u.Map(bT,bU());});};I.Const=function(bT){var bU;bU=u.New({$:0,$0:bT});return function(){return bU;};};I.Sink=function(bT,bU){function bV(){u.WhenRun(bU(),bT,function(){bn.scheduler().Fork(bV);});}bn.scheduler().Fork(bV);};I.CreateLazy=function(bT){var bU;bU={c:null,o:bT};return function(){var bV,bW;bV=bU.c;return bV===null?(bV=bU.o(),bU.c=bV,(bW=bV.s,bW!=null&&bW.$==0)?bU.o=null:u.WhenObsoleteRun(bV,function(){bU.c=null;}),bV):bV;};};I.Bind=function(bT,bU){return I.Join(I.Map(bT,bU));};I.Map3=function(bT,bU,bV,bW){return I.CreateLazy(function(){return u.Map3(bT,bU(),bV(),bW());});};I.Sequence=function(bT){return I.CreateLazy(function(){return u.Sequence(O.map(function(bU){return bU();},bT));});};I.Map2=function(bT,bU,bV){return I.CreateLazy(function(){return u.Map2(bT,bU(),bV());});};I.Map2Unit=function(bT,bU){return I.CreateLazy(function(){return u.Map2Unit(bT(),bU());});};I.Join=function(bT){return I.CreateLazy(function(){return u.Join(bT());});};T.notPresent=function(){return h.FailWith("The given key was not present in the dictionary.");};U.Get=function(bT){return bT instanceof a.Array?U.ArrayEnumerator(bT):p.Equals(typeof bT,"string")?U.StringEnumerator(bT):bT.GetEnumerator();};U.ArrayEnumerator=function(bT){return new V.New(0,null,function(bU){var bV;bV=bU.s;return bV<m.length(bT)&&(bU.c=m.get(bT,bV),bU.s=bV+1,true);},void 0);};U.StringEnumerator=function(bT){return new V.New(0,null,function(bU){var bV;bV=bU.s;return bV<bT.length&&(bU.c=bT[bV],bU.s=bV+1,true);},void 0);};U.Get0=function(bT){return bT instanceof a.Array?U.ArrayEnumerator(bT):p.Equals(typeof bT,"string")?U.StringEnumerator(bT):"GetEnumerator0"in bT?bT.GetEnumerator0():bT.GetEnumerator();};V=U.T=bP.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},e,V);V.New=bP.Ctor(function(bT,bU,bV,bW){e.New.call(this);this.s=bT;this.c=bU;this.n=bV;this.d=bW;},V);W.$cctor=function(){W.$cctor=a.ignore;W.LoadedTemplates=new H.New$5();W.LocalTemplatesLoaded=false;W.GlobalHoles=new H.New$5();W.TextHoleRE="\\${([^}]+)}";W.RenderedFullDocTemplate=null;};Y.LinkElement=function(bT,bU){Y.InsertDoc(bT,bU,null);};Y.InsertDoc=function(bT,bU,bV){var bW;return bU!=null&&bU.$==1?Y.InsertNode(bT,bU.$0.El,bV):bU!=null&&bU.$==2?(bW=bU.$0,(bW.Dirty=false,Y.InsertDoc(bT,bW.Current,bV))):bU==null?bV:bU!=null&&bU.$==4?Y.InsertNode(bT,bU.$0.Text,bV):bU!=null&&bU.$==5?Y.InsertNode(bT,bU.$0,bV):bU!=null&&bU.$==6?m.foldBack(function(bX,bY){return bX==null||bX.constructor===J?Y.InsertDoc(bT,bX,bY):Y.InsertNode(bT,bX,bY);},bU.$0.Els,bV):Y.InsertDoc(bT,bU.$0,Y.InsertDoc(bT,bU.$1,bV));};Y.CreateRunState=function(bT,bU){return bl.New(bm.get_Empty(),Y.CreateElemNode(bT,bd.EmptyAttr(),bU));};Y.PerformAnimatedUpdate=function(bT,bU,bV){var bW;return _8.get_UseAnimations()?(bW=null,bn.Delay(function(){var bX,bY,bZ;bX=bm.FindAll(bV);bY=Y.ComputeChangeAnim(bU,bX);bZ=Y.ComputeEnterAnim(bU,bX);return bn.Bind(_8.Play(_8.Append(bY,Y.ComputeExitAnim(bU,bX))),function(){return bn.Bind(Y.SyncElemNodesNextFrame(bT,bU),function(){return bn.Bind(_8.Play(bZ),function(){bU.PreviousNodes=bX;return bn.Return(null);});});});})):Y.SyncElemNodesNextFrame(bT,bU);};Y.PerformSyncUpdate=function(bT,bU,bV){var bW;bW=bm.FindAll(bV);Y.SyncElemNode(bT,bU.Top);bU.PreviousNodes=bW;};Y.CreateEmbedNode=function(){return{Current:null,Dirty:false};};Y.UpdateEmbedNode=function(bT,bU){bT.Current=bU;bT.Dirty=true;};Y.InsertBeforeDelim=function(bT,bU){var bV,bW;bV=bT.parentNode;bW=self.document.createTextNode("");bV.insertBefore(bW,bT);Y.LinkPrevElement(bT,bU);return bW;};Y.InsertNode=function(bT,bU,bV){_6.InsertAt(bT,bV,bU);return bU;};Y.CreateElemNode=function(bT,bU,bV){var bW;Y.LinkElement(bT,bV);bW=bd.Insert(bT,bU);return _0.New(bW,bV,null,bT,G.Int(),bP.GetOptional(bW.OnAfterRender));};Y.SyncElemNodesNextFrame=function(bT,bU){function bV(bW){a.requestAnimationFrame(function(){Y.SyncElemNode(bT,bU.Top);bW();});}return _9.BatchUpdatesEnabled()?bn.FromContinuations(function(bW,bX,bY){return bV.apply(null,[bW,bX,bY]);}):(Y.SyncElemNode(bT,bU.Top),bn.Return(null));};Y.ComputeExitAnim=function(bT,bU){return _8.Concat(m.map(function(bV){return bd.GetExitAnim(bV.Attr);},bm.ToArray(bm.Except(bU,bm.Filter(function(bV){return bd.HasExitAnim(bV.Attr);},bT.PreviousNodes)))));};Y.ComputeEnterAnim=function(bT,bU){return _8.Concat(m.map(function(bV){return bd.GetEnterAnim(bV.Attr);},bm.ToArray(bm.Except(bT.PreviousNodes,bm.Filter(function(bV){return bd.HasEnterAnim(bV.Attr);},bU)))));};Y.ComputeChangeAnim=function(bT,bU){var bV;function bW(bX){return bd.HasChangeAnim(bX.Attr);}bV=function(bX){return bm.Filter(bW,bX);};return _8.Concat(m.map(function(bX){return bd.GetChangeAnim(bX.Attr);},bm.ToArray(bm.Intersect(bV(bT.PreviousNodes),bV(bU)))));};Y.SyncElemNode=function(bT,bU){!bT?Y.SyncElement(bU):void 0;Y.Sync(bU.Children);Y.AfterRender(bU);};Y.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};Y.UpdateTextNode=function(bT,bU){bT.Value=bU;bT.Dirty=true;};Y.LinkPrevElement=function(bT,bU){Y.InsertDoc(bT.parentNode,bU,bT);};Y.SyncElement=function(bT){function bU(bV){function bW(bX){var bY,bZ;return bX!=null&&bX.$==0?bW(bX.$0)||bW(bX.$1):bX!=null&&bX.$==2?(bY=bX.$0,bY.Dirty||bW(bY.Current)):bX!=null&&bX.$==6&&(bZ=bX.$0,bZ.Dirty||m.exists(bU,bZ.Holes));}return bW(bV.Children);}bd.Sync(bT.El,bT.Attr);bU(bT)?Y.DoSyncElement(bT):void 0;};Y.Sync=function(bT){var bU,bV;if(bT!=null&&bT.$==1)Y.SyncElemNode(false,bT.$0);else if(bT!=null&&bT.$==2)Y.Sync(bT.$0.Current);else if(bT==null);else if(bT!=null&&bT.$==5);else if(bT!=null&&bT.$==4){bU=bT.$0;bU.Dirty?(bU.Text.nodeValue=bU.Value,bU.Dirty=false):void 0;}else if(bT!=null&&bT.$==6){bV=bT.$0;m.iter(function(bW){Y.SyncElemNode(false,bW);},bV.Holes);m.iter(function(bW){bd.Sync(bW[0],bW[1]);},bV.Attrs);Y.AfterRender(bV);}else{Y.Sync(bT.$0);Y.Sync(bT.$1);}};Y.AfterRender=function(bT){var bU;bU=bP.GetOptional(bT.Render);bU!=null&&bU.$==1?(bU.$0(bT.El),bP.SetOptional(bT,"Render",null)):void 0;};Y.DoSyncElement=function(bT){var bU,bV,bW;function bX(bY,bZ){var b0,b1;return bY!=null&&bY.$==1?bY.$0.El:bY!=null&&bY.$==2?(b0=bY.$0,b0.Dirty?(b0.Dirty=false,Y.InsertDoc(bU,b0.Current,bZ)):bX(b0.Current,bZ)):bY==null?bZ:bY!=null&&bY.$==4?bY.$0.Text:bY!=null&&bY.$==5?bY.$0:bY!=null&&bY.$==6?(b1=bY.$0,(b1.Dirty?b1.Dirty=false:void 0,m.foldBack(function(b2,b3){return b2==null||b2.constructor===J?bX(b2,b3):b2;},b1.Els,bZ))):bX(bY.$0,bX(bY.$1,bZ));}bU=bT.El;bF.Iter((bV=bT.El,function(bY){_6.RemoveNode(bV,bY);}),bF.Except(bF.DocChildren(bT),bF.Children(bT.El,bP.GetOptional(bT.Delimiters))));bX(bT.Children,(bW=bP.GetOptional(bT.Delimiters),bW!=null&&bW.$==1?bW.$0[1]:null));};Z.$cctor=function(){Z.$cctor=a.ignore;Z.counter=0;};_0=f.DocElemNode=bP.Class({Equals:function(bT){return this.ElKey===bT.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_0);_0.New=function(bT,bU,bV,bW,bX,bY){var bZ;return new _0((bZ={Attr:bT,Children:bU,El:bW,ElKey:bX},(bP.SetOptional(bZ,"Delimiters",bV),bP.SetOptional(bZ,"Render",bY),bZ)));};_2.InMemory=function(bT){return new bc.New(bT);};_3=f.Elt=bP.Class({},C,_3);_3.TreeNode=function(bT,bU){var bV,bW;function bX(bY){return bY[1];}bV=bi.Create(bU);return new _3.New$1({$:6,$0:bT},I.Map2Unit((bW=m.map(function(bY){return bd.Updates(bX(bY));},bT.Attrs),bb.TreeReduce(I.Const(),I.Map2Unit,bW)),bV.v),m.get(bT.Els,0),bV);};_3.New$1=bP.Ctor(function(bT,bU,bV,bW){C.New.call(this,bT,bU);this.docNode$1=bT;this.updates$1=bU;this.elt=bV;this.rvUpdates=bW;},_3);_4.convertTextNode=function(bT){var bU,bV,bW,bX,bY,bZ;bU=null;bV=0;bX=bT.textContent;bY=new a.RegExp(B.TextHoleRE(),"g");while(bU=bY.exec(bX),bU!==null){bT.parentNode.insertBefore(self.document.createTextNode(_5.string(bX,{$:1,$0:bV},{$:1,$0:bY.lastIndex-m.get(bU,0).length-1})),bT);bV=bY.lastIndex;bZ=self.document.createElement("span");bZ.setAttribute("ws-replace",m.get(bU,1).toLowerCase());bT.parentNode.insertBefore(bZ,bT);}bY.lastIndex=0;bT.textContent=_5.string(bX,{$:1,$0:bV},null);};_4.failNotLoaded=function(bT){bQ.warn("Instantiating non-loaded template",bT);};_4.fillTextHole=function(bT,bU,bV){var bW;bW=bT.querySelector("[ws-replace]");return p.Equals(bW,null)?(bQ.warn("Filling non-existent text hole",bV),null):(bW.parentNode.replaceChild(self.document.createTextNode(bU),bW),{$:1,$0:bW.getAttribute("ws-replace")});};_4.removeHolesExcept=function(bT,bU){function bV(bW){B.foreachNotPreserved(bT,"["+bW+"]",function(bX){if(!bU.Contains(bX.getAttribute(bW)))bX.removeAttribute(bW);});}bV("ws-attr");bV("ws-onafterrender");bV("ws-var");B.foreachNotPreserved(bT,"[ws-hole]",function(bW){if(!bU.Contains(bW.getAttribute("ws-hole"))){bW.removeAttribute("ws-hole");while(bW.hasChildNodes())bW.removeChild(bW.lastChild);}});B.foreachNotPreserved(bT,"[ws-replace]",function(bW){if(!bU.Contains(bW.getAttribute("ws-replace")))bW.parentNode.removeChild(bW);});B.foreachNotPreserved(bT,"[ws-on]",function(bW){bW.setAttribute("ws-on",bh.concat(" ",m.filter(function(bX){return bU.Contains(m.get(bh.SplitChars(bX,[":"],1),1));},bh.SplitChars(bW.getAttribute("ws-on"),[" "],1))));});B.foreachNotPreserved(bT,"[ws-attr-holes]",function(bW){var bX,bY,bZ,b0,b1;bX=bh.SplitChars(bW.getAttribute("ws-attr-holes"),[" "],1);for(bY=0,bZ=bX.length-1;bY<=bZ;bY++){b0=m.get(bX,bY);bW.setAttribute(b0,(b1=new a.RegExp(B.TextHoleRE(),"g"),bW.getAttribute(b0).replace(b1,function(b2,b3){return bU.Contains(b3)?b2:"";})));}});};_4.fillInstanceAttrs=function(bT,bU){var bV,bW,bX,bY,bZ;_4.convertAttrs(bU);bV=bU.nodeName.toLowerCase();bW=bT.querySelector("[ws-attr="+bV+"]");if(p.Equals(bW,null))bQ.warn("Filling non-existent attr hole",bV);else{bW.removeAttribute("ws-attr");for(bX=0,bY=bU.attributes.length-1;bX<=bY;bX++){bZ=bU.attributes.item(bX);bZ.name==="class"&&bW.hasAttribute("class")?bW.setAttribute("class",bW.getAttribute("class")+" "+bZ.nodeValue):bW.setAttribute(bZ.name,bZ.nodeValue);}}};_4.mapHoles=function(bT,bU){function bV(bW){B.foreachNotPreserved(bT,"["+bW+"]",function(bX){var bY,bZ;bY=(bZ=null,[bU.TryGetValue(bX.getAttribute(bW).toLowerCase(),{get:function(){return bZ;},set:function(b0){bZ=b0;}}),bZ]);bY[0]?bX.setAttribute(bW,bY[1]):void 0;});}bV("ws-hole");bV("ws-replace");bV("ws-attr");bV("ws-onafterrender");bV("ws-var");B.foreachNotPreserved(bT,"[ws-on]",function(bW){bW.setAttribute("ws-on",bh.concat(" ",m.map(function(bX){var bY,bZ,b0;bY=bh.SplitChars(bX,[":"],1);bZ=(b0=null,[bU.TryGetValue(m.get(bY,1),{get:function(){return b0;},set:function(b1){b0=b1;}}),b0]);return bZ[0]?m.get(bY,0)+":"+bZ[1]:bX;},bh.SplitChars(bW.getAttribute("ws-on"),[" "],1))));});B.foreachNotPreserved(bT,"[ws-attr-holes]",function(bW){var bX,bY,bZ;bX=bh.SplitChars(bW.getAttribute("ws-attr-holes"),[" "],1);for(bY=0,bZ=bX.length-1;bY<=bZ;bY++)(function(){var b0;function b1(b2,b3){var b4;b4=h.KeyValue(b3);return b2.replace(new a.RegExp("\\${"+b4[0]+"}","ig"),"${"+b4[1]+"}");}b0=m.get(bX,bY);return bW.setAttribute(b0,(((bP.Curried3(O.fold))(b1))(bW.getAttribute(b0)))(bU));}());});};_4.fill=function(bT,bU,bV){while(true)if(bT.hasChildNodes())bV=bU.insertBefore(bT.lastChild,bV);else return null;};_4.convertAttrs=function(bT){var bV,bW,bX,bY,bZ,b0,b1,b2;function bU(b3){var b4;b4=bT.getAttribute(b3);b4===null?void 0:bT.setAttribute(b3,b4.toLowerCase());}bV=bT.attributes;bW=[];bX=[];bY=[];for(bZ=0,b0=bV.length-1;bZ<=b0;bZ++){b1=bV.item(bZ);bh.StartsWith(b1.nodeName,"ws-on")&&b1.nodeName!=="ws-onafterrender"&&b1.nodeName!=="ws-on"?(bW.push(b1.nodeName),bX.push(_5.string(b1.nodeName,{$:1,$0:"ws-on".length},null)+":"+b1.nodeValue.toLowerCase())):!bh.StartsWith(b1.nodeName,"ws-")&&(new a.RegExp(B.TextHoleRE())).test(b1.nodeValue)?(b1.nodeValue=(b2=new a.RegExp(B.TextHoleRE(),"g"),b1.nodeValue.replace(b2,function(b3,b4){return"${"+b4.toLowerCase()+"}";})),bY.push(b1.nodeName)):void 0;}!(bX.length==0)?bT.setAttribute("ws-on",bh.concat(" ",bX)):void 0;!(bY.length==0)?bT.setAttribute("ws-attr-holes",bh.concat(" ",bY)):void 0;bU("ws-hole");bU("ws-replace");bU("ws-attr");bU("ws-onafterrender");bU("ws-var");m.iter(function(b3){bT.removeAttribute(b3);},bW);};_5.string=function(bT,bU,bV){return bU==null?bV!=null&&bV.$==1?bT.slice(0,bV.$0+1):"":bV==null?bT.slice(bU.$0):bT.slice(bU.$0,bV.$0+1);};_6.ParseHTMLIntoFakeRoot=function(bT){var bU,bV,bW,bX,bY;bU=self.document.createElement("div");return!_6.rhtml().test(bT)?(bU.appendChild(self.document.createTextNode(bT)),bU):(bV=(bW=_6.rtagName().exec(bT),p.Equals(bW,null)?"":m.get(bW,1).toLowerCase()),(bX=(bY=(_6.wrapMap())[bV],bY?bY:_6.defaultWrap()),(bU.innerHTML=bX[1]+bT.replace(_6.rxhtmlTag(),"<$1></$2>")+bX[2],function(bZ,b0){var b1;while(true)if(b0===0)return bZ;else{b1=b0;bZ=bZ.lastChild;b0=b1-1;}}(bU,bX[0]))));};_6.ChildrenArray=function(bT){var bU,bV,bW;bU=[];for(bV=0,bW=bT.childNodes.length-1;bV<=bW;bV++)bU.push(bT.childNodes[bV]);return bU;};_6.rhtml=function(){bs.$cctor();return bs.rhtml;};_6.wrapMap=function(){bs.$cctor();return bs.wrapMap;};_6.defaultWrap=function(){bs.$cctor();return bs.defaultWrap;};_6.rxhtmlTag=function(){bs.$cctor();return bs.rxhtmlTag;};_6.rtagName=function(){bs.$cctor();return bs.rtagName;};_6.IterSelector=function(bT,bU,bV){var bW,bX,bY;bW=bT.querySelectorAll(bU);for(bX=0,bY=bW.length-1;bX<=bY;bX++)bV(bW[bX]);};_6.InsertAt=function(bT,bU,bV){var bW;if(!(bV.parentNode===bT&&bU===(bW=bV.nextSibling,p.Equals(bW,null)?null:bW)))bT.insertBefore(bV,bU);};_6.RemoveNode=function(bT,bU){if(bU.parentNode===bT)bT.removeChild(bU);};O.insufficient=function(){return h.FailWith("The input sequence has an insufficient number of elements.");};_7=x.KeyCollection=bP.Class({GetEnumerator$1:function(){return U.Get(O.map(function(bT){return bT.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},e,_7);_7.New=bP.Ctor(function(bT){e.New.call(this);this.d=bT;},_7);_8.get_UseAnimations=function(){return bo.UseAnimations();};_8.Play=function(bT){var bU;bU=null;return bn.Delay(function(){return bn.Bind(_8.Run(a.ignore,bo.Actions(bT)),function(){bo.Finalize(bT);return bn.Return(null);});});};_8.Append=function(bT,bU){return{$:0,$0:bu.Append(bT.$0,bU.$0)};};_8.Run=function(bT,bU){var bV;function bW(bX){function bY(bZ,b0){var b1;b1=b0-bZ;bU.Compute(b1);bT();return b1<=bV?void a.requestAnimationFrame(function(b2){bY(bZ,b2);}):bX();}a.requestAnimationFrame(function(bZ){bY(bZ,bZ);});}bV=bU.Duration;return bV===0?bn.Zero():bn.FromContinuations(function(bX,bY,bZ){return bW.apply(null,[bX,bY,bZ]);});};_8.Concat=function(bT){return{$:0,$0:bu.Concat(O.map(bo.List,bT))};};_8.get_Empty=function(){return{$:0,$0:bu.Empty()};};_9.BatchUpdatesEnabled=function(){bp.$cctor();return bp.BatchUpdatesEnabled;};_.StartProcessor=function(bT){var bU;function bV(){var bW;bW=null;return bn.Delay(function(){return bn.Bind(bT,function(){var bX;bX=bU[0];return bX===1?(bU[0]=0,bn.Zero()):bX===2?(bU[0]=1,bV()):bn.Zero();});});}bU=[0];return function(){var bW;bW=bU[0];bW===0?(bU[0]=1,bn.Start(bV(),null)):bW===1?bU[0]=2:void 0;};};ba.New=function(bT,bU,bV,bW){var bX;bX={DynElem:bT,DynFlags:bU,DynNodes:bV};bP.SetOptional(bX,"OnAfterRender",bW);return bX;};bb.mapInPlace=function(bT,bU){var bV,bW;for(bV=0,bW=bU.length-1;bV<=bW;bV++)bU[bV]=bT(bU[bV]);return bU;};bb.ofSeqNonCopying=function(bT){var bU,bV;if(bT instanceof a.Array)return bT;else if(bT instanceof bg)return m.ofList(bT);else if(bT===null)return[];else{bU=[];bV=U.Get(bT);try{while(bV.MoveNext())bU.push(bV.Current());return bU;}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}}};bb.TreeReduce=function(bT,bU,bV){var bW;function bX(bY,bZ){var b0,b1;return bZ<=0?bT:bZ===1&&(bY>=0&&bY<bW)?m.get(bV,bY):(b1=bZ/2>>0,bU(bX(bY,b1),bX(bY+b1,bZ-b1)));}bW=m.length(bV);return bX(0,bW);};bb.MapTreeReduce=function(bT,bU,bV,bW){var bX;function bY(bZ,b0){var b1,b2;return b0<=0?bU:b0===1&&(bZ>=0&&bZ<bX)?bT(m.get(bW,bZ)):(b2=b0/2>>0,bV(bY(bZ,b2),bY(bZ+b2,b0-b2)));}bX=m.length(bW);return bY(0,bX);};bc=_2.ArrayStorage=bP.Class({SSetAt:function(bT,bU,bV){m.set(bV,bT,bU);return bV;},SAppend:function(bT,bU){bU.push(bT);return bU;},SInit:function(){return this.init;}},e,bc);bc.New=bP.Ctor(function(bT){e.New.call(this);this.init=bT;},bc);bd.Insert=function(bT,bU){var bV,bW,bX;function bY(bZ){if(!(bZ===null))if(bZ!=null&&bZ.$==1)bV.push(bZ.$0);else if(bZ!=null&&bZ.$==2){bY(bZ.$0);bY(bZ.$1);}else if(bZ!=null&&bZ.$==3)bZ.$0(bT);else if(bZ!=null&&bZ.$==4)bW.push(bZ.$0);}bV=[];bW=[];bY(bU);bX=bV.slice(0);return ba.New(bT,bd.Flags(bU),bX,bW.length===0?null:{$:1,$0:function(bZ){O.iter(function(b0){b0(bZ);},bW);}});};bd.Updates=function(bT){return bb.MapTreeReduce(function(bU){return bU.NChanged();},I.Const(),I.Map2Unit,bT.DynNodes);};bd.Empty=function(bT){return ba.New(bT,0,[],null);};bd.Flags=function(bT){return bT!==null&&bT.hasOwnProperty("flags")?bT.flags:0;};bd.Static=function(bT){return new K({$:3,$0:bT});};bd.Dynamic=function(bT,bU){return new K({$:1,$0:new bw.New(bT,bU)});};bd.EmptyAttr=function(){bv.$cctor();return bv.EmptyAttr;};bd.HasExitAnim=function(bT){var bU;bU=2;return(bT.DynFlags&bU)===bU;};bd.GetExitAnim=function(bT){return bd.GetAnim(bT,function(bU,bV){return bU.NGetExitAnim(bV);});};bd.HasEnterAnim=function(bT){var bU;bU=1;return(bT.DynFlags&bU)===bU;};bd.GetEnterAnim=function(bT){return bd.GetAnim(bT,function(bU,bV){return bU.NGetEnterAnim(bV);});};bd.HasChangeAnim=function(bT){var bU;bU=4;return(bT.DynFlags&bU)===bU;};bd.GetChangeAnim=function(bT){return bd.GetAnim(bT,function(bU,bV){return bU.NGetChangeAnim(bV);});};bd.AppendTree=function(bT,bU){var bV;return bT===null?bU:bU===null?bT:(bV=new K({$:2,$0:bT,$1:bU}),(bd.SetFlags(bV,bd.Flags(bT)|bd.Flags(bU)),bV));};bd.GetAnim=function(bT,bU){return _8.Concat(m.map(function(bV){return bU(bV,bT.DynElem);},bT.DynNodes));};bd.Sync=function(bT,bU){m.iter(function(bV){bV.NSync(bT);},bU.DynNodes);};bd.SetFlags=function(bT,bU){bT.flags=bU;};be.Handler=function(bT,bU){return bd.Static(function(bV){bV.addEventListener(bT,function(bW){return(bU(bV))(bW);},false);});};be.OnAfterRender=function(bT){return new K({$:4,$0:bT});};be.Value=function(bT){var bU;bU=(((br.StringApply())(bT))(bd.Static))(function(bV){return be.DynamicCustom(bV,bT.get_View());});return K.Append(bU[0],bU[1]);};be.Checked=function(bT){var bU;bU=(((br.BoolCheckedApply())(bT))(bd.Static))(function(bV){return be.DynamicCustom(bV,bT.get_View());});return K.Append(bU[0],bU[1]);};be.IntValue=function(bT){var bU;bU=(((br.IntApplyChecked())(bT))(bd.Static))(function(bV){return be.DynamicCustom(bV,bT.get_View());});return K.Append(bU[0],bU[1]);};be.IntValueUnchecked=function(bT){var bU;bU=(((br.IntApplyUnchecked())(bT))(bd.Static))(function(bV){return be.DynamicCustom(bV,bT.get_View());});return K.Append(bU[0],bU[1]);};be.FloatValue=function(bT){var bU;bU=(((br.FloatApplyChecked())(bT))(bd.Static))(function(bV){return be.DynamicCustom(bV,bT.get_View());});return K.Append(bU[0],bU[1]);};be.FloatValueUnchecked=function(bT){var bU;bU=(((br.FloatApplyUnchecked())(bT))(bd.Static))(function(bV){return be.DynamicCustom(bV,bT.get_View());});return K.Append(bU[0],bU[1]);};be.Dynamic=function(bT,bU){return bd.Dynamic(bU,function(bV){return function(bW){return bV.setAttribute(bT,bW);};});};be.DynamicCustom=function(bT,bU){return bd.Dynamic(bU,bT);};bg=bf.T=bP.Class({GetEnumerator:function(){return new V.New(this,null,function(bT){var bU;bU=bT.s;return bU.$==0?false:(bT.c=bU.$0,bT.s=bU.$1,true);},void 0);},GetEnumerator0:function(){return U.Get(this);}},null,bg);bg.Empty=new bg({$:0});bh.concat=function(bT,bU){return m.ofSeq(bU).join(bT);};bh.SplitChars=function(bT,bU,bV){return bh.Split(bT,new a.RegExp("["+bh.RegexEscape(bU.join(""))+"]"),bV);};bh.StartsWith=function(bT,bU){return bT.substring(0,bU.length)==bU;};bh.Split=function(bT,bU,bV){return bV===1?m.filter(function(bW){return bW!=="";},bh.SplitWith(bT,bU)):bh.SplitWith(bT,bU);};bh.RegexEscape=function(bT){return bT.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bh.SplitWith=function(bT,bU){return bT.split(bU);};bh.forall=function(bT,bU){return O.forall(bT,bh.protect(bU));};bh.protect=function(bT){return bT===null?"":bT;};bi=f.Updates=bP.Class({},null,bi);bi.Create=function(bT){var bU;bU=null;bU=bi.New(bT,null,function(){var bV;bV=bU.s;return bV===null?(bV=u.Copy(bU.c()),bU.s=bV,u.WhenObsoleteRun(bV,function(){bU.s=null;}),bV):bV;});return bU;};bi.New=function(bT,bU,bV){return new bi({c:bT,s:bU,v:bV});};bj=x.ValueCollection=bP.Class({GetEnumerator$1:function(){return U.Get(O.map(function(bT){return bT.V;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},e,bj);bj.New=bP.Ctor(function(bT){e.New.call(this);this.d=bT;},bj);bl.New=function(bT,bU){return{PreviousNodes:bT,Top:bU};};bm.get_Empty=function(){return{$:0,$0:new N.New$3()};};bm.FindAll=function(bT){var bU;function bV(bX){if(bX!=null&&bX.$==0){bV(bX.$0);bV(bX.$1);}else if(bX!=null&&bX.$==1)bW(bX.$0);else if(bX!=null&&bX.$==2)bV(bX.$0.Current);else if(bX!=null&&bX.$==6)m.iter(bW,bX.$0.Holes);}function bW(bX){bU.push(bX);bV(bX.Children);}bU=[];bV(bT);return{$:0,$0:new N.New$2(bU)};};bm.Filter=function(bT,bU){return{$:0,$0:bC.Filter(bT,bU.$0)};};bm.Except=function(bT,bU){return{$:0,$0:bC.Except(bT.$0,bU.$0)};};bm.ToArray=function(bT){return bC.ToArray(bT.$0);};bm.Intersect=function(bT,bU){return{$:0,$0:bC.Intersect(bT.$0,bU.$0)};};bn.Delay=function(bT){return function(bU){try{(bT(null))(bU);}catch(bV){bU.k({$:1,$0:bV});}};};bn.Bind=function(bT,bU){return bn.checkCancel(function(bV){bT(bz.New(function(bW){var bX;if(bW.$==0){bX=bW.$0;bn.scheduler().Fork(function(){try{(bU(bX))(bV);}catch(bY){bV.k({$:1,$0:bY});}});}else bn.scheduler().Fork(function(){bV.k(bW);});},bV.ct));});};bn.Zero=function(){bA.$cctor();return bA.Zero;};bn.Start=function(bT,bU){var bV,bW;bV=(bW=(bn.defCTS())[0],bU==null?bW:bU.$0);bn.scheduler().Fork(function(){if(!bV.c)bT(bz.New(function(bX){if(bX.$==1)bn.UncaughtAsyncError(bX.$0);},bV));});};bn.Return=function(bT){return function(bU){bU.k({$:0,$0:bT});};};bn.scheduler=function(){bA.$cctor();return bA.scheduler;};bn.checkCancel=function(bT){return function(bU){if(bU.ct.c)bn.cancel(bU);else bT(bU);};};bn.defCTS=function(){bA.$cctor();return bA.defCTS;};bn.UncaughtAsyncError=function(bT){bQ.log("WebSharper: Uncaught asynchronous exception",bT);};bn.FromContinuations=function(bT){return function(bU){var bV;function bW(bX){if(bV[0])h.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bV[0]=true;bn.scheduler().Fork(bX);}}bV=[false];bT(function(bX){bW(function(){bU.k({$:0,$0:bX});});},function(bX){bW(function(){bU.k({$:1,$0:bX});});},function(bX){bW(function(){bU.k({$:2,$0:bX});});});};};bn.cancel=function(bT){bT.k({$:2,$0:new bJ.New(bT.ct)});};bo.UseAnimations=function(){bt.$cctor();return bt.UseAnimations;};bo.Actions=function(bT){return bo.ConcatActions(m.choose(function(bU){return bU.$==1?{$:1,$0:bU.$0}:null;},bu.ToArray(bT.$0)));};bo.Finalize=function(bT){m.iter(function(bU){if(bU.$==0)bU.$0();},bu.ToArray(bT.$0));};bo.ConcatActions=function(bT){var bU,bV,bW,bX;bU=bb.ofSeqNonCopying(bT);bV=m.length(bU);return bV===0?bo.Const():bV===1?m.get(bU,0):(bW=O.max(O.map(function(bY){return bY.Duration;},bU)),(bX=m.map(function(bY){return bo.Prolong(bW,bY);},bU),bo.Def(bW,function(bY){m.iter(function(bZ){bZ.Compute(bY);},bX);})));};bo.List=function(bT){return bT.$0;};bo.Const=function(bT){return bo.Def(0,function(){return bT;});};bo.Def=function(bT,bU){return{Compute:bU,Duration:bT};};bo.Prolong=function(bT,bU){var bV,bW,bX;bV=bU.Compute;bW=bU.Duration;bX=bK.Create(function(){return bU.Compute(bU.Duration);});return{Compute:function(bY){return bY>=bW?bX.f():bV(bY);},Duration:bT};};bp.$cctor=function(){bp.$cctor=a.ignore;bp.BatchUpdatesEnabled=true;};bq.concat=function(bT){var bU,bV;bU=[];for(var bW in bT)bU.push.apply(bU,bT[bW]);return bU;};br.StringApply=function(){bv.$cctor();return bv.StringApply;};br.BoolCheckedApply=function(){bv.$cctor();return bv.BoolCheckedApply;};br.IntApplyChecked=function(){bv.$cctor();return bv.IntApplyChecked;};br.IntApplyUnchecked=function(){bv.$cctor();return bv.IntApplyUnchecked;};br.FloatApplyChecked=function(){bv.$cctor();return bv.FloatApplyChecked;};br.FloatApplyUnchecked=function(){bv.$cctor();return bv.FloatApplyUnchecked;};br.ApplyValue=function(bT,bU,bV,bW,bX){return[bW(function(bY){function bZ(){bV.UpdateMaybe(function(b0){var b1,b2;b1=bT(bY);return b1!=null&&b1.$==1&&(!p.Equals(b1.$0,b0)&&(b2=[b1,b1.$0],true))?b2[0]:null;});}bY.addEventListener("change",bZ);bY.addEventListener("input",bZ);bY.addEventListener("keypress",bZ);}),bX(function(bY){return function(bZ){var b0,b1;b0=bT(bY);return b0!=null&&b0.$==1&&(p.Equals(b0.$0,bZ)&&(b1=b0.$0,true))?null:bU(bY,bZ);};})];};br.StringSet=function(){bv.$cctor();return bv.StringSet;};br.StringGet=function(){bv.$cctor();return bv.StringGet;};br.IntSetUnchecked=function(){bv.$cctor();return bv.IntSetUnchecked;};br.IntGetUnchecked=function(){bv.$cctor();return bv.IntGetUnchecked;};br.IntSetChecked=function(){bv.$cctor();return bv.IntSetChecked;};br.IntGetChecked=function(){bv.$cctor();return bv.IntGetChecked;};br.FloatSetUnchecked=function(){bv.$cctor();return bv.FloatSetUnchecked;};br.FloatGetUnchecked=function(){bv.$cctor();return bv.FloatGetUnchecked;};br.FloatSetChecked=function(){bv.$cctor();return bv.FloatSetChecked;};br.FloatGetChecked=function(){bv.$cctor();return bv.FloatGetChecked;};bs.$cctor=function(){var bT;bs.$cctor=a.ignore;bs.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bs.rtagName=new a.RegExp("<([\\w:]+)");bs.rhtml=new a.RegExp("<|&#?\\w+;");bs.wrapMap=(bT=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:bT,tbody:bT,tfoot:bT,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bs.defaultWrap=[0,"",""];};bt.$cctor=function(){bt.$cctor=a.ignore;bt.CubicInOut=by.Custom(function(bT){var bU;bU=bT*bT;return 3*bU-2*(bU*bT);});bt.UseAnimations=true;};bu.Append=function(bT,bU){return bT.$==0?bU:bU.$==0?bT:{$:2,$0:bT,$1:bU};};bu.ToArray=function(bT){var bU;function bV(bW){if(bW.$==1)bU.push(bW.$0);else if(bW.$==2){bV(bW.$0);bV(bW.$1);}else if(bW.$==3)m.iter(function(bX){bU.push(bX);},bW.$0);}bU=[];bV(bT);return bU.slice(0);};bu.Concat=function(bT){var bU;bU=bb.ofSeqNonCopying(bT);return bb.TreeReduce(bu.Empty(),bu.Append,bU);};bu.Empty=function(){bL.$cctor();return bL.Empty;};bf.head=function(bT){return bT.$==1?bT.$0:bf.listEmpty();};bf.tail=function(bT){return bT.$==1?bT.$1:bf.listEmpty();};bf.listEmpty=function(){return h.FailWith("The input list was empty.");};bv.$cctor=function(){var bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2;bv.$cctor=a.ignore;bv.EmptyAttr=null;bv.BoolCheckedApply=bP.Curried3(function(b3,b4,b5){return[b4(function(b6){b6.addEventListener("change",function(){return!p.Equals(b3.Get(),b6.checked)?b3.Set(b6.checked):null;});}),b5(function(b6){return function(b7){b6.checked=b7;};})];});bv.StringSet=function(b3){return function(b4){b3.value=b4;};};bv.StringGet=function(b3){return{$:1,$0:b3.value};};bv.StringApply=(bT=br.StringGet(),(bU=br.StringSet(),bP.Curried(br.ApplyValue,3,[bT,function(b3,b4){return(bU(b3))(b4);}])));bv.IntSetUnchecked=function(b3){return function(b4){b3.value=a.String(b4);};};bv.IntGetUnchecked=function(b3){var b4,b5;b4=b3.value;return bD.isBlank(b4)?{$:1,$0:0}:(b5=+b4,b5!==b5>>0?null:{$:1,$0:b5});};bv.IntApplyUnchecked=(bV=br.IntGetUnchecked(),(bW=br.IntSetUnchecked(),bP.Curried(br.ApplyValue,3,[bV,function(b3,b4){return(bW(b3))(b4);}])));bv.IntSetChecked=function(b3){return function(b4){var b5;b5=b4.get_Input();return b3.value!==b5?void(b3.value=b5):null;};};bv.IntGetChecked=function(b3){var b4,b5,b6;b4=b3.value;return{$:1,$0:bD.isBlank(b4)?(b3.checkValidity?b3.checkValidity():true)?new L({$:2,$0:b4}):new L({$:1,$0:b4}):(b5=(b6=0,[M.TryParseInt32(b4,{get:function(){return b6;},set:function(b7){b6=b7;}}),b6]),b5[0]?new L({$:0,$0:b5[1],$1:b4}):new L({$:1,$0:b4}))};};bv.IntApplyChecked=(bX=br.IntGetChecked(),(bY=br.IntSetChecked(),bP.Curried(br.ApplyValue,3,[bX,function(b3,b4){return(bY(b3))(b4);}])));bv.FloatSetUnchecked=function(b3){return function(b4){b3.value=a.String(b4);};};bv.FloatGetUnchecked=function(b3){var b4,b5;b4=b3.value;return bD.isBlank(b4)?{$:1,$0:0}:(b5=+b4,a.isNaN(b5)?null:{$:1,$0:b5});};bv.FloatApplyUnchecked=(bZ=br.FloatGetUnchecked(),(b0=br.FloatSetUnchecked(),bP.Curried(br.ApplyValue,3,[bZ,function(b3,b4){return(b0(b3))(b4);}])));bv.FloatSetChecked=function(b3){return function(b4){var b5;b5=b4.get_Input();return b3.value!==b5?void(b3.value=b5):null;};};bv.FloatGetChecked=function(b3){var b4,b5;b4=b3.value;return{$:1,$0:bD.isBlank(b4)?(b3.checkValidity?b3.checkValidity():true)?new L({$:2,$0:b4}):new L({$:1,$0:b4}):(b5=+b4,a.isNaN(b5)?new L({$:1,$0:b4}):new L({$:0,$0:b5,$1:b4}))};};bv.FloatApplyChecked=(b1=br.FloatGetChecked(),(b2=br.FloatSetChecked(),bP.Curried(br.ApplyValue,3,[b1,function(b3,b4){return(b2(b3))(b4);}])));};bw=f.DynamicAttrNode=bP.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bT){return _8.get_Empty();},NGetEnterAnim:function(bT){return _8.get_Empty();},NGetChangeAnim:function(bT){return _8.get_Empty();},NSync:function(bT){if(this.dirty){(this.push(bT))(this.value);this.dirty=false;}}},e,bw);bw.New=bP.Ctor(function(bT,bU){var bV;bV=this;e.New.call(this);this.push=bU;this.value=void 0;this.dirty=false;this.updates=I.Map(function(bW){bV.value=bW;bV.dirty=true;},bT);},bw);bx=bn.Scheduler=bP.Class({Fork:function(bT){var bU;bU=this;this.robin.push(bT);this.idle?(this.idle=false,a.setTimeout(function(){bU.tick();},0)):void 0;},tick:function(){var bT,bU,bV;bU=this;bV=bS.now();bT=true;while(bT)if(this.robin.length===0){this.idle=true;bT=false;}else{(this.robin.shift())();bS.now()-bV>40?(a.setTimeout(function(){bU.tick();},0),bT=false):void 0;}}},e,bx);bx.New=bP.Ctor(function(){e.New.call(this);this.idle=true;this.robin=[];},bx);by=f.Easing=bP.Class({},e,by);by.Custom=function(bT){return new by.New(bT);};by.New=bP.Ctor(function(bT){e.New.call(this);this.transformTime=bT;},by);bz.New=function(bT,bU){return{k:bT,ct:bU};};bA.$cctor=function(){bA.$cctor=a.ignore;bA.noneCT=bB.New(false,[]);bA.scheduler=new bx.New();bA.defCTS=[new bE.New()];bA.Zero=bn.Return();bA.GetCT=function(bT){bT.k({$:0,$0:bT.ct});};};bB.New=function(bT,bU){return{c:bT,r:bU};};bC.Filter=function(bT,bU){return new N.New$2(m.filter(bT,bC.ToArray(bU)));};bC.Except=function(bT,bU){var bV;bV=new N.New$2(bC.ToArray(bU));bV.ExceptWith(bC.ToArray(bT));return bV;};bC.ToArray=function(bT){var bU;bU=m.create(bT.get_Count(),void 0);bT.CopyTo(bU);return bU;};bC.Intersect=function(bT,bU){var bV;bV=new N.New$2(bC.ToArray(bT));bV.IntersectWith(bC.ToArray(bU));return bV;};bD.isBlank=function(bT){return bh.forall(bH.IsWhiteSpace,bT);};bE=d.CancellationTokenSource=bP.Class({},e,bE);bE.New=bP.Ctor(function(){e.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bE);bF.Children=function(bT,bU){var bV,bW,bX;if(bU!=null&&bU.$==1){bX=[];bV=bU.$0[0].nextSibling;while(bV!==bU.$0[1]){bX.push(bV);bV=bV.nextSibling;}return{$:0,$0:bX};}else return{$:0,$0:m.init(bT.childNodes.length,(bW=bT.childNodes,function(bY){return bW[bY];}))};};bF.Except=function(bT,bU){var bV;bV=bT.$0;return{$:0,$0:m.filter(function(bW){return m.forall(function(bX){return!(bW===bX);},bV);},bU.$0)};};bF.Iter=function(bT,bU){m.iter(bT,bU.$0);};bF.DocChildren=function(bT){var bU;function bV(bW){if(bW!=null&&bW.$==2)bV(bW.$0.Current);else if(bW!=null&&bW.$==1)bU.push(bW.$0.El);else if(bW==null);else if(bW!=null&&bW.$==5)bU.push(bW.$0);else if(bW!=null&&bW.$==4)bU.push(bW.$0.Text);else if(bW!=null&&bW.$==6)m.iter(function(bX){if(bX==null||bX.constructor===J)bV(bX);else bU.push(bX);},bW.$0.Els);else{bV(bW.$0);bV(bW.$1);}}bU=[];bV(bT.Children);return{$:0,$0:bb.ofSeqNonCopying(bU)};};bG.Clear=function(bT){bT.splice(0,m.length(bT));};bH.IsWhiteSpace=function(bT){return bT.match(new a.RegExp("\\s"))!==null;};M.TryParse=function(bT,bU,bV,bW){var bX,bY;bX=+bT;bY=bX===bX-bX%1&&bX>=bU&&bX<=bV;bY?bW.set(bX):void 0;return bY;};bJ=d.OperationCanceledException=bP.Class({},bI,bJ);bJ.New=bP.Ctor(function(bT){bJ.New$1.call(this,"The operation was canceled.",null,bT);},bJ);bJ.New$1=bP.Ctor(function(bT,bU,bV){this.message=bT;this.inner=bU;J.setPrototypeOf(this,bJ.prototype);this.ct=bV;},bJ);bK.Create=function(bT){return bN.New(false,bT,bK.forceLazy);};bK.forceLazy=function(){var bT;bT=this.v();this.c=true;this.v=bT;this.f=bK.cachedLazy;return bT;};bK.cachedLazy=function(){return this.v;};bL.$cctor=function(){bL.$cctor=a.ignore;bL.Empty={$:0};};bN.New=function(bT,bU,bV){return{c:bT,v:bU,f:bV};};bP.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
